var opr, safari, Utils; !
    function(e) {
        var t = (i.update = function() {
            var t = window.getComputedStyle(document.querySelector("body"), ":before").getPropertyValue("content").replace(/[\"\']/g, "");
            e.breakpoint = {
                desktop: "desktop" === t,
                phone: "phone" === t,
                tablet: "tablet" === t,
                value: t
            }
        },
            i);
        function i() {}
        e.Breakpoint = t
    } (Project = Project || {}),
    function(t) {
        t.generateUID = function() {
            return "" + (new Date).getTime() + Math.floor(65536 * (1 + Math.random())).toString(16).substring(1)
        },
            t.vibrate = function(t) {
                void 0 !== navigator.vibrate && navigator.vibrate(t)
            },
            t.translations = {
                "invalid-email": {
                    en: "Invalid email address format",
                    pl: "Niepoprawny format adresu e-mail"
                },
                "required-field": {
                    en: "Required field",
                    pl: "Pole obowiÄzkowe"
                }
            },
            t.keys = {
                enter: 13,
                esc: 27,
                space: 32,
                left: 37,
                up: 38,
                right: 39,
                down: 40,
                pageUp: 33,
                pageDown: 34,
                end: 35,
                home: 36
            },
            t.getBrowser = function() {
                var t = window.navigator.userAgent,
                    e = {
                        mobile: !(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t) && !/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0, 4))),
                        ios: /iPad|iPhone|iPod/.test(t),
                        mac: 0 <= navigator.platform.toUpperCase().indexOf("MAC"),
                        ie: 0 < t.indexOf("MSIE ") || !!t.match(/Trident.*rv\:11\./),
                        opera: !!window.opr && !!opr.addons || !!window.opera || 0 <= navigator.userAgent.indexOf(" OPR/"),
                        firefox: -1 < t.toLowerCase().indexOf("firefox"),
                        safari: /^((?!chrome|android).)*safari/i.test(t),
                        windows: -1 < window.navigator.platform.toLowerCase().indexOf("win")
                    };
                return $("html").toggleClass("mac", !e.windows && (e.ios || e.mac)).toggleClass("mobile", e.mobile).toggleClass("firefox", e.firefox).toggleClass("safari", e.safari).toggleClass("ie", e.ie),
                    e
            },
            t.stats = function() {
                var e = new Stats;
                return e.showPanel(0),
                    $(e.dom).css("pointer-events", "none"),
                    document.body.appendChild(e.dom),
                    requestAnimationFrame(function t() {
                        e.begin(),
                            e.end(),
                            requestAnimationFrame(t)
                    }),
                    e
            },
            t.parseToTime = function(t) {
                var e = parseInt("" + t, 10),
                    i = parseInt("" + e / 3600, 10) % 24,
                    s = parseInt("" + e / 60, 10) % 60,
                    o = e % 60;
                return (0 < i ? (i < 10 ? "0" + i: i) + ":": "") + (s < 10 ? "0" + s: s) + ":" + (o < 10 ? "0" + o: o)
            },
            t.updateQueryParam = function(t, e, i) {
                var s = "",
                    o = (t || window.location.href).split("?"),
                    n = o[0],
                    a = o[1],
                    r = "";
                if (a) {
                    o = a.split("&");
                    for (var h = 0; h < o.length; h++) o[h].split("=")[0] !== e && (s += r + o[h], r = "&")
                }
                return n + "?" + s + (r + "" + e + "=" + i)
            },
            t.removeQueryParam = function(t, e) {
                var i = t.split("?");
                if (2 <= i.length) {
                    for (var s = encodeURIComponent(e) + "=", o = i[1].split(/[&;]/g), n = o.length; 0 < n--;) - 1 !== o[n].lastIndexOf(s, 0) && o.splice(n, 1);
                    return t = i[0] + "?" + o.join("&")
                }
                return t
            },
            t.setCookie = function(t, e, i) {
                var s = new Date;
                s.setTime(s.getTime() + 24 * i * 60 * 60 * 1e3);
                var o = t + "=" + e + ";" + ("expires=" + s.toUTCString()) + ";path=/";
                document.cookie = o
            },
            t.getCookie = function(t) {
                t += "=";
                for (var e = decodeURIComponent(document.cookie).split(";"), i = 0; i < e.length; i++) {
                    for (var s = e[i];
                         " " === s.charAt(0);) s = s.substring(1);
                    if (0 === s.indexOf(t)) return s.substring(t.length, s.length)
                }
                return null
            },
            t.setStorageItem = function(t, e) {
                localStorage.setItem(t, e)
            },
            t.getStorageItem = function(t) {
                return localStorage.getItem(t)
            }
    } (Utils = Utils || {});
var InstallTrigger = function() {}; !
    function(t) {
        var e = (i.prototype.tryToShow = function() { ! this.shown && Modernizr.cookies && this.view && !Utils.getCookie(i.COOKIE_SLUG) ? this.show() : this.destroy()
        },
            i.prototype.show = function() {
                this.view.show(),
                    this.shown = !0,
                    TweenMax.fromTo(this.view, 1.8, {
                            y: .5 * -window.innerHeight
                        },
                        {
                            y: 0,
                            ease: Elastic.easeOut.config(1.01, .7),
                            delay: .1
                        }),
                    TweenMax.fromTo(this.view, 4.8, {
                            rotation: -10,
                            transformOrigin: "0 -500px"
                        },
                        {
                            rotation: 0,
                            ease: Elastic.easeOut.config(1.1, .5)
                        })
            },
            i.prototype.hide = function() {
                var t = this;
                this.shown = !1,
                    TweenMax.to(this.view, .6, {
                        y: .5 * -window.innerHeight,
                        ease: Elastic.easeIn.config(1.1, .8),
                        onComplete: function() {
                            t.destroy()
                        }
                    })
            },
            i.prototype.destroy = function() {
                this.view && (this.view.remove(), this.view = null, i.instance = null)
            },
            i.COOKIE_SLUG = "ciastko", i);
        function i(t) {
            var e = this;
            this.view = t,
                this.shown = !1,
            t[0] && ((i.instance = this).view.find(".js-cookies-close").on("click",
                function(t) {
                    t.preventDefault(),
                        t.stopPropagation(),
                        e.hide()
                }), this.view.find(".js-cookies-agree").on("click",
                function(t) {
                    t.preventDefault(),
                        t.stopPropagation(),
                        Utils.setCookie(i.COOKIE_SLUG, "lalka", 365),
                        e.hide()
                }))
        }
        t.Cookies = e
    } (Project = Project || {}),
    function(t) {
        var e = (i.prototype.on = function(t, e) {
            return this.events[t] || (this.events[t] = []),
                this.events[t].push(e),
                this
        },
            i.prototype.off = function(t, e) {
                if (void 0 === t) return this.events = {},
                    this;
                if (void 0 === e && this.events[t]) return this.events[t] = [],
                    this;
                if (!this.events[t]) return this;
                var i = this.events[t].indexOf(e);
                return - 1 < i && this.events[t].splice(i, 1),
                    this
            },
            i.prototype.trigger = function(t) {
                for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i];
                if (this.events[t]) {
                    var s = this.events[t].length;
                    if (s) for (var o = 0; o < s; o++) this.events[t][o].apply(this, [].slice.call(arguments, 1))
                }
            },
            i.prototype.destroy = function() {
                this.events = {}
            },
            i);
        function i() {
            this.events = {}
        }
        t.Handler = e
    } (Project = Project || {});
var __extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var i, e = (i = t.Handler, __extends(s, i), s.prototype.setLogo = function() {
            this.logo.top = this.$logo.offset().top,
                this.logo.h = this.$logo.outerHeight(),
                this.logo.bottom = this.$logo.offset().top + this.$logo.outerHeight()
        },
            s.prototype.update = function(t, e, i) {
                this.invertEl(this.logo, t, e, i),
                    this.invertEl(this.menu, t, e, i)
            },
            s.prototype.clear = function() {
                this.resetEl(this.logo),
                    this.resetEl(this.menu)
            },
            s.prototype.invertEl = function(t, e, i, s) {
                var o, n;
                e >= t.bottom && this.resetEl(t),
                e < t.bottom && e >= t.top && (o = e - t.bottom, n = -(e - t.bottom)),
                e < t.top && i > t.top && (o = -t.h, n = t.h),
                i < t.bottom && i > t.top && (o = i - t.bottom - t.h, n = -(i - t.bottom - t.h)),
                i < t.top && (o = 2 * -t.h, n = 2 * t.h),
                    TweenMax.set(t.alt, {
                        y: o
                    }),
                    TweenMax.set(t.alt.children(), {
                        y: n
                    })
            },
            s.prototype.resetEl = function(t) {
                TweenMax.set(t.alt, {
                    y: 0
                }),
                    TweenMax.set(t.alt.children(), {
                        y: 0
                    })
            },
            s.prototype.animateLogo = function() {
                var e = this;
                this.animating || (this.animating = !0, this.view.addClass("is-logo-hover"), TweenMax.fromTo(this.logoAnimation, this.logoAnimation.frames / 30, {
                        frame: 0
                    },
                    {
                        frame: this.logoAnimation.frames,
                        ease: Power0.easeInOut,
                        roundProps: "frame",
                        onUpdate: function() {
                            var t = -e.logoAnimation.frame * e.logoAnimation.width;
                            e.$blueLogo.css({
                                backgroundPosition: t + "px 0px"
                            }),
                                e.$whiteLogo.css({
                                    backgroundPosition: t + "px " + e.logoAnimation.height + "px"
                                })
                        },
                        onComplete: function() {
                            e.view.removeClass("is-logo-hover"),
                                e.animating = !1
                        }
                    }))
            },
            s);
        function s(t) {
            var e = this;
            i.call(this),
                this.view = t,
                this.animating = !1,
                this.logoAnimation = {
                    frame: 0,
                    frames: 16,
                    width: 256,
                    height: 150
                },
                this.$logo = this.view.find(".js-logo"),
                this.logo = {
                    el: this.$logo,
                    top: this.$logo.offset().top,
                    h: this.$logo.outerHeight(),
                    bottom: this.$logo.offset().top + this.$logo.outerHeight(),
                    alt: this.view.find(".js-logo-alt")
                },
                this.$menu = this.view.find(".js-hamburger"),
                this.menu = {
                    el: this.$menu,
                    top: this.$menu.offset().top,
                    h: this.$menu.innerHeight(),
                    bottom: this.$menu.offset().top + this.$menu.innerHeight(),
                    alt: this.view.find(".js-hamburger-alt")
                },
                this.setLogo(),
                this.$blueLogo = $(".js-blue-logo"),
                this.$whiteLogo = $(".js-white-logo"),
                this.$svgLogo = $(".js-logo svg"),
                this.$logo.off(".header").on("mouseenter.header",
                    function() {
                        return e.animateLogo()
                    })
        }
        t.Header = e
    } (Project = Project || {}),
    function(t) {
        var e = (h.rotatePoint = function(t, e, i, s, o) {
            var n = Math.cos(o),
                a = Math.sin(o);
            return {
                x: n * (i - t) + a * (s - e) + t,
                y: n * (s - e) - a * (i - t) + e
            }
        },
            h.prototype.preload = function() {
                var s = this;
                function t(t, e) {
                    return (e = new Image).src = s.data.assetsPath + t + ".png",
                        s.il.addBackground(e.src, e),
                        e
                }
                return this.il = imagesLoaded([], {
                    background: !0
                }),
                    this.image = t(this.data.imageSrc, this.image),
                this.data.altImageSrc && (this.altImage = t(this.data.altImageSrc, this.altImage)),
                this.data.sprite && this.data.sprite.image && (this.spriteImage = t(this.data.sprite.image, this.spriteImage)),
                    new Promise(function(i, t) {
                        s.il.jqDeferred.fail(function(t, e) {
                            i()
                        }).done(function() {
                            s.loaded = !0,
                                s.prerender(),
                                i()
                        })
                    })
            },

            h.prototype.countTheDistance = function(t) {
                var e = this.data.width * t.x,
                    i = this.data.height * t.y,
                    s = this.data.width * this.data.origin.x,
                    o = this.data.height * this.data.origin.y;
                this.data.distance = Math.sqrt(Math.pow(s - e, 2) + Math.pow(o - i, 2)),
                    this.data.angle = Math.atan((s - e) / (o - i))
            },
            h.prototype.update = function(n, a, t, e) {
                var r = this;
                if (n) {
                    var i = this.data;
                    this.coords.parentPivot = t,
                        this.coords.x = n.x,
                        this.coords.y = n.y,
                        this.coords.cx = n.x + i.width * i.origin.x,
                        this.coords.cy = n.y + i.height * i.origin.y;
                    var s = {
                        x: 0,
                        y: 0
                    };
                    if (t) {
                        var o = h.rotatePoint(t.x, t.y, this.coords.cx, this.coords.cy, -e);
                        s.x = (o.x - this.coords.cx) * this.data.rigidity,
                            s.y = (o.y - this.coords.cy) * this.data.rigidity
                    }
                    this.coords.cx += s.x + this.x,
                        this.coords.cy += s.y + this.y,
                        this.coords.x += s.x + this.x,
                        this.coords.y += s.y + this.y,
                        this.acceleration = -1 * this.gravity / this.data.mass * Math.sin(this.coords.angle),
                        this.velocity += this.acceleration,
                        this.velocity *= this.damping,
                        this.coords.angle -= a * (this.data.reverse ? -1 : 1),
                        this.coords.angle += this.velocity,
                        this.coords.angle = (e || 0) * (1 - this.data.elasticity) + this.coords.angle * this.data.elasticity,
                        this.coords.angle *= .95,
                    Math.abs(this.coords.angle) < .02 && (this.coords.angle *= .8),
                    Math.abs(this.coords.angle) < .001 && (this.coords.angle = 0),
                    this.parts && this.parts.forEach(function(t) {
                        var e = {
                                x: n.x,
                                y: n.y
                            },
                            i = 1.2 * a,
                            s = {
                                x: r.coords.cx,
                                y: r.coords.cy
                            },
                            o = r.coords.angle + r.rotation / 180 * Math.PI;
                        t.update(e, i, s, o)
                    })
                }
            },
            h.prototype.render = function(t) {
                if (this.loaded) {
                    var e = this.useAlternateImage ? this.altCanvas: this.canvas,
                        i = this.coords.x + this.coords.parentShift.x,
                        s = this.coords.y + this.coords.parentShift.y;
                    t.globalAlpha = Project.Site.debug ? .2 : 1,
                        t.translate(this.coords.cx, this.coords.cy),
                        t.rotate(this.coords.angle + this.rotation / 180 * Math.PI),
                        t.translate( - this.coords.cx, -this.coords.cy),
                        this.useSprite ? t.drawImage(this.spriteImage, this.data.sprite.currentFrame * this.data.sprite.width, 0, this.data.sprite.width, this.data.sprite.height, i, s, this.data.width, this.data.height) : t.drawImage(e, i, s),
                        t.setTransform(1, 0, 0, 1, 0, 0),
                        t.globalAlpha = 1
                }
            },
            h.prototype.renderStick = function(t) {
                this.data.stick && (t.translate(this.coords.cx, this.coords.cy), t.rotate(.2 * (this.coords.angle + this.rotation / 180 * Math.PI)), t.translate( - this.coords.cx, -this.coords.cy), t.beginPath(), t.strokeStyle = "#888", t.lineWidth = 1, t.globalAlpha = .9, t.moveTo(Math.floor(this.coords.cx), this.coords.cy), t.lineTo(Math.floor(this.coords.cx), this.coords.cy + this.data.sceneHeight), t.stroke(), t.setTransform(1, 0, 0, 1, 0, 0), t.globalAlpha = 1)
            },
            h.prototype.renderRig = function(t) {
                t.beginPath(),
                    t.fillStyle = "#FF0000",
                    t.arc(this.coords.cx, this.coords.cy, (5 + .05 * this.data.mass) * Project.Site.pixelRatio, 0, 2 * Math.PI, !1),
                    t.fill(),
                this.coords.parentPivot && (t.beginPath(), t.strokeStyle = "#ff0000", t.lineWidth = (5 + 2 * (1 - this.data.elasticity) - 2 * this.data.rigidity) * Project.Site.pixelRatio, t.moveTo(this.coords.parentPivot.x, this.coords.parentPivot.y), t.lineTo(this.coords.cx, this.coords.cy), t.stroke())
            },
            h.prototype.animateSprite = function(i) {
                var s = this;
                return new Promise(function(t, e) {
                    s.data.sprite && s.spriteImage ? (s.useSprite = !0, s.data.sprite.currentFrame = s.data.sprite.currentFrame || 0, new TimelineMax({
                        repeat: i || 0,
                        onComplete: function() {
                            s.useSprite = !1,
                                t()
                        }
                    }).to(s.data.sprite, s.data.sprite.frames / s.data.sprite.fps, {
                        currentFrame: s.data.sprite.frames - 1,
                        roundProps: "currentFrame",
                        ease: Power0.easeInOut,
                        onComplete: function() {
                            s.data.sprite.currentFrame = 0
                        }
                    })) : t()
                })
            },
            h.prototype.resize = function() {
                this.prerender()
            },
            h.prototype.prerender = function() {
                this.loaded && (this.image && (this.canvas || (this.canvas = document.createElement("canvas")), this.canvas.width = this.data.width, this.canvas.height = this.data.height, this.canvas.getContext("2d").drawImage(this.image, 0, 0, this.data.width, this.data.height)), this.altImage && (this.altCanvas || (this.altCanvas = document.createElement("canvas")), this.altCanvas.width = this.data.width, this.altCanvas.height = this.data.height, this.altCanvas.getContext("2d").drawImage(this.altImage, 0, 0, this.data.width, this.data.height)))
            },
            h);
        function h(t) {
            this.data = t,
                this.rotation = 0,
                this.x = 0,
                this.y = 0,
                this.useAlternateImage = !1,
                this.useSprite = !1,
                this.coords = {
                    angle: 0,
                    x: 0,
                    y: 0,
                    cx: 0,
                    cy: 0,
                    parentShift: {
                        x: 0,
                        y: 0
                    }
                },
                this.gravity = .4,
                this.damping = .99,
                this.velocity = 0,
                this.acceleration = 0,
                this.loaded = !1
        }
        t.PuppetPart = e
    } (Puppets = Puppets || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var i, e = (i = Project.Handler, __extends(s, i), s.prototype.render = function(t, e, i) {
            this.shown && (t.globalAlpha = this.opacity, t.drawImage(this.canvas, Math.round(e) - 14, Math.max(this.maxTopPosition * this.pixelRatio, Math.round(i) - 75 + this.y - .5 * this.canvas.height)), t.globalAlpha = 1)
        },
            s.prototype.show = function() {
                this.shown || (this.shown = !0, TweenMax.killTweensOf(this), TweenMax.to(this, .5, {
                    y: 0,
                    opacity: 1,
                    ease: Back.easeOut.config(1.5),
                    delay: .4
                }))
            },
            s.prototype.hide = function() {
                var i = this;
                return new Promise(function(t, e) {
                    TweenMax.killTweensOf(i),
                        TweenMax.to(i, .3, {
                            delay: .2,
                            y: 5,
                            opacity: 0,
                            ease: Expo.easeOut,
                            onComplete: function() {
                                i.shown = !1,
                                    t()
                            }
                        })
                })
            },
            s.prototype.destroy = function() {
                TweenMax.killTweensOf(this),
                    this.ctx = null,
                    delete this.canvas
            },
            s.prototype.prerender = function() {
                this.ctx.font = 16 * this.pixelRatio + 'px "Din"';
                var t = this.ctx.measureText(this.data.text).width;
                this.drawBackground(t, 53),
                    this.ctx.textBaseline = "top",
                    this.ctx.fillStyle = "#0f00ce",
                    this.ctx.fillText(this.data.text, 25 * this.pixelRatio, 14 * this.pixelRatio)
            },
            s.prototype.drawBackground = function(t, e) {
                this.ctx.fillStyle = "#E6E0E0",
                    this.ctx.fillRect(0, 0, t, e),
                    this.ctx.beginPath(),
                    this.ctx.moveTo(14 * this.pixelRatio, e),
                    this.ctx.lineTo(35 * this.pixelRatio, e),
                    this.ctx.lineTo(14 * this.pixelRatio, e + 16 * this.pixelRatio),
                    this.ctx.fill()
            },
            s.prototype.preload = function() {
                return new Promise(function(t, e) {
                    var i = setInterval(function() {
                            $(document).hasClass("wf-loading") || (window.clearInterval(i), t())
                        },
                        1e3)
                })
            },
            s);
        function s(t) {
            var e = this;
            i.call(this),
                this.data = t,
                this.opacity = 0,
                this.y = 5,
                this.shown = !1,
                this.pixelRatio = 1,
                this.maxTopPosition = 60,
                this.pixelRatio = Project.Site.pixelRatio,
                this.canvas = document.createElement("canvas"),
                this.ctx = this.canvas.getContext("2d"),
                this.canvas.width = 1e3,
                this.canvas.height = 1e3,
                this.preload().then(function() {
                    return e.prerender()
                })
        }
        t.Hint = e
    } (Puppets = Puppets || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var e, i = (e = t.Hint, __extends(s, e), s.prototype.prerender = function() {
            var i = this,
                e = 0,
                s = 0,
                t = [{
                    text: this.data.text,
                    fontSize: 12,
                    lineHeight: 18,
                    fontFamily: "Din"
                },
                    {
                        text: this.data.title,
                        fontSize: 11,
                        lineHeight: 13,
                        fontFamily: "Lalka"
                    },
                    {
                        text: this.data.year,
                        fontSize: 12,
                        lineHeight: 14,
                        fontFamily: "Din"
                    }];
            t.forEach(function(t) {
                t.text && "" !== t.text && (i.ctx.font = i.pixelRatio * t.fontSize + 'px "' + t.fontFamily + '"', e = Math.max(e, i.ctx.measureText(t.text).width), s += t.lineHeight * i.pixelRatio)
            }),
                this.canvas.width = e + 40 * this.pixelRatio,
                this.canvas.height = s + 48 * this.pixelRatio,
                this.drawBackground(e + 40 * this.pixelRatio, s + 32 * this.pixelRatio);
            var o = 14;
            t.forEach(function(t) {
                if (t.text && "" !== t.text) {
                    var e = Project.browser.mac && "Lalka" === t.fontFamily ? Math.ceil(.14 * t.lineHeight) : 0;
                    i.ctx.font = i.pixelRatio * t.fontSize + 'px "' + t.fontFamily + '"',
                        i.ctx.textBaseline = "top",
                        i.ctx.fillStyle = "#0f00ce",
                        i.ctx.fillText(t.text, 18 * i.pixelRatio, (o + e) * i.pixelRatio),
                        o += t.lineHeight
                }
            })
        },
            s);
        function s() {
            e.apply(this, arguments)
        }
        t.Label = i
    } (Puppets = Puppets || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(s) {
        var o, t = (o = Project.Handler, __extends(e, o), e.prototype.destroy = function() {
            window.clearTimeout(this.timeout),
                TweenMax.killChildTweensOf(this),
            this.floatingTimeline && this.floatingTimeline.kill(),
                this.sortedParts.forEach(function(t) {
                    t.destroy()
                }),
                this.parts = null,
                this.partsData = null,
                this.sortedParts = null,
            this.label && this.label.destroy(),
                o.prototype.destroy.call(this)
        },
            e.prototype.resize = function(t, e, i, s, o, n) {
                var a = this;
                this.canvasWidth = t,
                    this.canvasHeight = e,
                    this.width = this.originalWidth * this.scale * (o || 1),
                    this.height = this.originalHeight * this.scale * (o || 1),
                    this.position = {
                        x: Project.breakpoint.phone ? .5 * t + n * t: this.pos.x * i,
                        y: (Project.breakpoint.phone ? .5 : this.pos.y) * s - .5 * this.height
                    },
                    Object.keys(this.partsData).forEach(function(t) {
                        var e = a.partsData[t];
                        e.width = a.width,
                            e.height = a.height,
                            e.sceneHeight = s
                    }),
                    this.sortedParts.forEach(function(t) {
                        t.resize()
                    })
            },
            e.prototype.preload = function() {
                var s = this;
                return new Promise(function(e, t) {
                    var i = [];
                    s.sortedParts.forEach(function(t) {
                        i.push(t.preload())
                    }),
                        Promise.all(i).then(function(t) {
                            e()
                        })
                })
            },
            e.prototype.setLabelData = function(t) {
                t && (this.labelData = {
                    text: t[0] || null,
                    title: t[1] || null,
                    year: t[2] || null
                })
            },
            e.prototype.addInfoLabel = function() {
                this.labelData && (this.label = new s.Label(this.labelData))
            },
            e.prototype.addHintLabel = function(t) {
                this.label = new s.Hint({
                    text: t
                }),
                    this.showLabel()
            },
            e.prototype.hideHintLabel = function() {
                var t = this;
                this.hideLabel().then(function() {
                    t.label.destroy(),
                        t.label = null
                })
            },
            e.prototype.showLabel = function() {
                this.label && this.label.show()
            },
            e.prototype.hideLabel = function() {
                if (this.label) return this.label.hide()
            },
            e.prototype.hitTest = function(t, e) {
                return t > this.position.x + this.shift.x + this.shift.hoverX + this.shift.perspectiveX + this.shift.cameraX - .5 * this.width && t < this.position.x + this.shift.x + this.shift.hoverX + this.shift.perspectiveX + this.shift.cameraX + .5 * this.width && e > this.position.y + this.shift.y + this.shift.hoverY + this.shift.perspectiveY && e < this.position.y + this.shift.y + this.shift.hoverY + this.shift.perspectiveY + this.height
            },
            e.prototype.isVisible = function() {
                return this.canvasHeight > this.position.y + this.shift.y + this.shift.hoverY + this.shift.perspectiveY && this.canvasWidth > this.position.x + this.shift.x + this.shift.hoverX + this.shift.perspectiveX + this.shift.cameraX - .5 * this.width && 0 < this.position.x + this.shift.x + this.shift.hoverX + this.shift.perspectiveX + this.shift.cameraX + .5 * this.width
            },
            e.prototype.rollover = function(t, e, i) {
                this.hovered || (this.hovered = !0, 0 < i && TweenMax.to(this, .4, {
                    acceleration: (t > this.position.x ? "+": "-") + "=" + Math.min(100, Math.max(5, 80 * i)),
                    ease: Sine.easeInOut
                }), TweenMax.to(this.shift, .5, {
                    hoverY: -20,
                    ease: Sine.easeOut
                }))
            },
            e.prototype.rollout = function() {
                this.hovered = !1,
                    TweenMax.killTweensOf(this.shift, {
                        hoverY: !0
                    }),
                    TweenMax.to(this.shift, .9, {
                        hoverX: 0,
                        hoverY: 0,
                        ease: Elastic.easeOut.config(1.2, .8),
                        delay: .1
                    })
            },
            e.prototype.build = function(o) {
                var n = this;
                this.partsData = o,
                    Object.keys(o).forEach(function(t) {
                        var e = o[t];
                        e.assetsPath = n.assetsPath,
                            e.puppetName = n.name;
                        var i = new s.PuppetPart(e);
                        n.parts[t] = i
                    }),
                    Object.keys(o).forEach(function(t) {
                        var i = o[t];
                        if (i.name = t, i.zIndex = void 0 === i.zIndex ? 0 : i.zIndex, i.rigidity = void 0 === i.rigidity ? 1 : i.rigidity, i.elasticity = void 0 === i.elasticity ? 1 : i.elasticity, i.parts) {
                            var s = [];
                            i.parts.forEach(function(t) {
                                var e = n.parts[t];
                                e && (e.countTheDistance(i.origin), s.push(e))
                            }),
                                n.parts[t].parts = s
                        }
                    }),
                    this.sortedParts = Object.keys(o).map(function(t) {
                        return o[t]
                    }).sort(function(t, e) {
                        return t.zIndex - e.zIndex || 1
                    }).map(function(t) {
                        return n.parts[t.name]
                    }),
                    this.bg = {
                        opacity: 0,
                        color: "#222"
                    },
                    this.startTimeout(),
                    this.startFloating()
            },
            e.prototype.resetPosition = function() {
                TweenMax.to(this.shift, .7, {
                    ease: Back.easeOut,
                    x: 0,
                    y: 0
                })
            },
            e.prototype.render = function(e, t) {
                var i = this.shift.x + this.shift.hoverX + this.shift.perspectiveX + this.shift.floatX + this.shift.cameraX,
                    s = this.shift.y + this.shift.hoverY + this.shift.perspectiveY + this.shift.floatY,
                    o = this.shift.lastX - i,
                    n = this.shift.lastY - s;
                if (this.acceleration += o + n, this.shift.lastX = i, this.shift.lastY = s, Math.abs(this.acceleration) < .1 ? this.acceleration = 0 : this.acceleration *= .75, this.parts.body) {
                    var a = {
                            x: this.position.x - .5 * this.width + i + this.x,
                            y: this.position.y + s + this.y
                        },
                        r = 1 === this.partsData.body.elasticity ? this.shift.rotation: null;
                    this.parts.body.update(a, this.acceleration / 1500, null, r)
                }
                if (this.isVisible()) {
                    if (this.bg && 0 < this.bg.opacity && this.settings.home && (e.fillStyle = this.bg.color, e.globalAlpha = this.bg.opacity, e.fillRect(0, 0, this.canvasWidth, this.canvasHeight), e.globalAlpha = 1), t && t.hideStick || this.sortedParts.forEach(function(t) {
                        t.renderStick(e)
                    }), this.sortedParts.forEach(function(t) {
                        t.render(e)
                    }), this.label) {
                        var h = this.labelPosition.x + this.shift.x + this.shift.hoverX + this.shift.perspectiveX + this.shift.cameraX,
                            l = -20 + this.labelPosition.y + this.shift.y + this.shift.hoverY + this.shift.perspectiveY;
                        this.label.render(e, this.position.x + this.x + h, this.position.y + this.y + l)
                    }
                    Project.Site.debug && this.sortedParts.forEach(function(t) {
                        t.renderRig(e)
                    })
                }
            },
            e.prototype.startTimeout = function() {
                var t = this;
                if (this.settings.timeoutAnimations) {
                    window.clearTimeout(this.timeout);
                    var e = 3e3 + 3e3 * Math.random();
                    this.timeout = setTimeout(function() {
                            return t.onTimeout()
                        },
                        e)
                }
            },
            e.prototype.onTimeout = function() {
                this.startTimeout()
            },
            e.prototype.startFloating = function() {
                var t = this;
                this.settings.floating && (this.floatingTimeline = new TimelineMax({
                    onComplete: function() {
                        t.startFloating()
                    }
                }).to(this.shift, 5 + 5 * Math.random(), {
                    delay: 1 + 4 * Math.random(),
                    floatX: 20 * Math.random() - 10,
                    floatY: 20 * Math.random() - 10,
                    rotation: 4 * Math.random() - 2,
                    ease: Elastic.easeInOut.config(1, .5)
                }))
            },
            e);
        function e(t, e, i, s) {
            o.call(this),
                this.pos = t,
                this.scale = e,
                this.name = i,
                this.options = s,
                this.shift = {
                    x: 0,
                    y: 0,
                    lastX: 0,
                    lastY: 0,
                    hoverX: 0,
                    hoverY: 0,
                    perspectiveX: 0,
                    perspectiveY: 0,
                    cameraX: 0,
                    floatX: 0,
                    floatY: 0,
                    rotation: 0
                },
                this.grabbed = !1,
                this.hovered = !1,
                this.animating = !1,
                this.perspective = 1,
                this.x = 0,
                this.y = 0,
                this.acceleration = 0,
                this.parts = {},
                this.partsData = {},
                this.labelPosition = {
                    x: 0,
                    y: 0
                },
                this.settings = {
                    floating: !0,
                    home: !1,
                    timeoutAnimations: !0
                },
            void 0 !== t && "object" == typeof s && $.extend(this.settings, s)
        }
        s.Puppet = t
    } (Puppets = Puppets || {}),
    function(i) {
        var t; (t = i.InterludePuppetDataIndex || (i.InterludePuppetDataIndex = {}))[t.Name = 0] = "Name",
            t[t.Color = 1] = "Color",
            t[t.PositionX = 2] = "PositionX",
            t[t.PositionY = 3] = "PositionY",
            t[t.Scale = 4] = "Scale";
        var e, r = i.InterludePuppetDataIndex; (e = i.InterludeSteps || (i.InterludeSteps = {}))[e.In = 0] = "In",
            e[e.Out = 1] = "Out";
        var s = i.InterludeSteps,
            o = (n.prototype.preload = function() {
                var s = this;
                return new Promise(function(e, t) {
                    var i = [];
                    s.puppets.forEach(function(t) {
                        i.push(t.preload())
                    }),
                        Promise.all(i).then(function(t) {
                            e()
                        })
                })
            },
                n.prototype.animateIn = function() {
                    var i = this;
                    return this.setCurrentPuppet(),
                        this.step = s.In,
                        this.shown = !0,
                        this.view.show(),
                        this.resize(),
                        new Promise(function(t, e) {
                            i.timeline && i.timeline.kill(),
                                i.timeline = new TimelineMax({
                                    onUpdate: function() {
                                        return i.draw()
                                    }
                                }).fromTo(i.bg, 1.2, {
                                        radius: 0
                                    },
                                    {
                                        radius: i.diagonal,
                                        ease: Power3.easeOut
                                    }).fromTo(i.circle, .6, {
                                        radius: 0,
                                        y: i.windowCenter.y
                                    },
                                    {
                                        radius: i.radius,
                                        ease: Back.easeOut.config(1.5)
                                    },
                                    .2).fromTo(i.current.puppet.shift, 2, {
                                        y: i.canvasHeight
                                    },
                                    {
                                        y: 0,
                                        ease: Elastic.easeOut.config(1.2, .8)
                                    },
                                    .2).call(function() {
                                    return t()
                                }).call(function() {
                                    i.current.puppet.animate(i.settings.silent)
                                }).addPause("+=5")
                        })
                },
                n.prototype.animateOut = function() {
                    var i = this;
                    return new Promise(function(t, e) {
                        i.shown ? (i.shown = !1, i.step = s.Out, i.timeline && i.timeline.kill(), i.timeline = new TimelineMax({
                            onUpdate: function() {
                                return i.draw()
                            },
                            onComplete: function() {
                                i.view.hide(),
                                    t()
                            }
                        }).fromTo(i.current.puppet.shift, .6, {
                                y: 0
                            },
                            {
                                y: window.innerHeight * i.pixelRatio,
                                ease: Back.easeIn.config(1.2)
                            }).fromTo(i.circle, .7, {
                                y: i.windowCenter.y
                            },
                            {
                                y: window.innerHeight + i.radius,
                                ease: Power3.easeInOut
                            },
                            .2).fromTo(i.bg, .7, {
                                y: 0
                            },
                            {
                                y: window.innerHeight,
                                ease: Power3.easeInOut
                            },
                            .2)) : t()
                    })
                },
                n.prototype.resize = function(t, e) {
                    if (this.shown) {
                        var i = this.view.width() * this.pixelRatio,
                            s = this.view.height() * this.pixelRatio;
                        this.canvasWidth = i,
                            this.canvasHeight = s,
                            this.canvas.width = this.canvasWidth,
                            this.canvas.height = this.canvasHeight,
                            this.windowCenter.x = Math.round(.5 * (t || window.innerWidth)),
                            this.windowCenter.y = Math.round(.5 * (e || window.innerHeight)),
                            this.diagonal = .6 * Math.sqrt(Math.pow(window.innerWidth, 2) + Math.pow(window.innerHeight, 2)),
                        this.current.puppet && this.current.puppet.resize(this.canvasWidth, this.canvasHeight, this.canvasWidth, this.canvasHeight, 1, 0),
                            this.draw()
                    }
                },
                n.prototype.build = function() {
                    var a = this;
                    this.settings.sets.forEach(function(t) {
                        var e = t[r.Name],
                            i = t[r.Scale] / 2 * a.pixelRatio,
                            s = t[r.PositionX],
                            o = t[r.PositionY],
                            n = new Puppets[e]({
                                    x: s,
                                    y: o
                                },
                                i, e, {
                                    floating: !1,
                                    timeoutAnimations: !1
                                });
                        n.shift.y = window.innerHeight * a.pixelRatio,
                            a.puppets.push(n)
                    })
                },
                n.prototype.setCurrentPuppet = function() {
                    var t = Math.floor(Math.random() * this.settings.sets.length);
                    if ("undefined" != typeof Storage) {
                        var e = parseInt(Utils.getStorageItem("interlude"), 10);
                        t = (t = e ? e + 1 : t) === this.settings.sets.length ? 0 : t,
                            Utils.setStorageItem("interlude", t + "")
                    }
                    var i = this.settings.sets[t];
                    this.current.color = i[r.Color],
                        this.current.puppet = this.puppets[t],
                        this.circle.color = this.current.color
                },
                n.prototype.draw = function() {
                    this.view && this.view[0] && this.current && this.current.puppet && (this.drawBackground(), this.drawPuppet(), this.drawMask())
                },
                n.prototype.drawBackground = function() {
                    this.context.clearRect(0, 0, this.canvasWidth, this.canvasHeight),
                        this.context.beginPath(),
                        this.context.fillStyle = this.bg.color,
                        this.step === s.In ? (this.context.arc(this.windowCenter.x * this.pixelRatio, this.windowCenter.y * this.pixelRatio, this.bg.radius * this.pixelRatio, 0, 2 * Math.PI, !1), this.context.closePath()) : this.step === s.Out && this.context.fillRect(0, this.bg.y * this.pixelRatio, this.canvasWidth, this.canvasHeight - this.bg.y * this.pixelRatio),
                        this.context.fill(),
                        this.context.beginPath(),
                        this.context.fillStyle = this.circle.color,
                        this.context.arc(this.windowCenter.x * this.pixelRatio, this.circle.y * this.pixelRatio, this.circle.radius * this.pixelRatio, 0, 2 * Math.PI, !1),
                        this.context.closePath(),
                        this.context.fill()
                },
                n.prototype.drawMask = function() {
                    this.circle.radius < this.radius || (this.context.beginPath(), this.context.fillStyle = this.bg.color, this.context.arc(this.windowCenter.x * this.pixelRatio, this.circle.y * this.pixelRatio, this.circle.radius * this.pixelRatio, 0, Math.PI, !1), this.context.lineTo(0, this.circle.y * this.pixelRatio), this.context.lineTo(0, this.canvasHeight), this.context.lineTo(this.canvasWidth, this.canvasHeight), this.context.lineTo(this.canvasWidth, this.circle.y * this.pixelRatio), this.context.closePath(), this.context.fill())
                },
                n.prototype.drawPuppet = function() {
                    var t = {
                        hideStick: this.circle.radius < this.radius
                    };
                    this.current.puppet.render(this.context, t)
                },
                n);
        function n(t, e) {
            this.view = t,
                this.settings = {
                    sets: [["Karabinier", "#E82E2E", .5, .41, .97], ["Turon", "#F3747E", .5, .39, .94], ["Janosik", "#E5BE3C", .513, .41, 1], ["DoboszMaly", "#1E0EB6", .5, .38, .66], ["Guignol", "#E82E2E", .49, .42, 1], ["Punch", "#F3747E", .495, .4, 1.1], ["Sowa", "#B69B82", .5, .48, 1], ["Lew", "#F3747E", .5, .42, 1], ["Tatar", "#E82E2E", .5, .435, 1], ["Malpka", "#1E0EB6", .5, .39, .95], ["DoboszDuzy", "#E82E2E", .5, .41, .9], ["Kat", "#B69B82", .52, .44, 1], ["Archaniol", "#E5BE3C", .5, .4, 1], ["Krol", "#1E0EB6", .5, .42, 1], ["Poduszkowiec", "#B69B82", .5, .395, 1], ["Ksiezniczka", "#1E0EB6", .5, .44, .8]],
                    silent: !0
                },
                this.radius = 134,
                this.diagonal = null,
                this.pixelRatio = 1,
                this.current = {},
                this.windowCenter = {
                    x: 0,
                    y: 0
                },
                this.step = 0,
                this.shown = !1,
                this.puppets = [],
                this.bg = {
                    radius: 0,
                    y: 0,
                    color: "#f5f3f3"
                },
                this.circle = {
                    radius: 0,
                    y: 0,
                    color: "#edeaea"
                },
            t[0] && ("object" == typeof e && $.extend(this.settings, e), this.view.find("canvas")[0] || this.view.append("<canvas>"), this.canvas = this.view.find("canvas")[0], this.context = this.canvas.getContext("2d"), this.pixelRatio = i.Site.pixelRatio, this.build())
        }
        i.Interlude = o
    } (Project = Project || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var e = (i.CHANGE = "change", i);
        function i() {}
        t.ComponentEvents = e;
        var s, o = (s = Project.Handler, __extends(n, s), n.prototype.preloadImages = function() {
            return []
        },
            n.prototype.onState = function() {
                return ! 1
            },
            n.prototype.animateIn = function(t, e) {},
            n.prototype.animateOut = function(t) {
                return Promise.resolve(!0)
            },
            n.prototype.turnOff = function() {},
            n.prototype.turnOn = function() {},
            n.prototype.resize = function(t, e, i, s) {},
            n.prototype.destroy = function() {
                s.prototype.destroy.call(this)
            },
            n);
        function n(t, e) {
            s.call(this),
                this.view = t,
                this.options = e
        }
        t.Component = o
    } (Components = Components || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(s) {
        var i, t = (i = s.Handler, __extends(e, i), e.prototype.onState = function() {
            return this.toggle(!1),
                !1
        },
            e.prototype.isShown = function() {
                return !! this.shown
            },
            e.prototype.toggle = function(t, e) {
                var i = this;
                void 0 !== t ? t && !this.shown ? this.show(e) : !t && this.shown && this.hide(e) : (this.shown ?
                    function(t) {
                        return i.hide(t)
                    }: function(t) {
                        return i.show(t)
                    })(e)
            },
            e.prototype.resize = function(t, e, i, s) {
                s && (TweenMax.set(this.$menuItems.add(this.$menuBottomItems).add(this.$menuLeftItems), {
                    clearProps: "x y opacity"
                }), this.toggle(this.shown, !0))
            },
            e.prototype.showCurtain = function(i) {
                var s = this;
                return new Promise(function(t, e) {
                    $body.addClass("has-curtain"),
                        TweenMax.to(s.$bg.show(), i ? 0 : .6, {
                            yPercent: 0,
                            skewY: 0,
                            ease: Power2.easeOut,
                            onComplete: function() {
                                t()
                            }
                        })
                })
            },
            e.prototype.hideCurtain = function(i) {
                var s = this;
                return new Promise(function(t, e) { (new TimelineMax).to(s.$bg, i ? 0 : .6, {
                    yPercent: -150,
                    skewY: 20,
                    ease: Power2.easeIn,
                    delay: .3,
                    onComplete: function() {
                        s.$bg.hide(),
                            t()
                    }
                }).call(function() {
                        $body.removeClass("has-curtain")
                    },
                    null, null, "-=0.1")
                })
            },
            e.prototype.show = function(t) {
                var e = this;
                this.$wrap.css({
                    display: "block"
                }),
                    TweenMax.set(this.$bg, {
                        yPercent: -150,
                        skewType: "simple",
                        skewY: 20
                    }),
                (this.shown = !0) === t && (this.animated = !0),
                    this.setHeader(),
                    this.toggleFooter(!0, t),
                    this.$body.addClass("is-menu"),
                    s.breakpoint.desktop ? (TweenMax.staggerFromTo(this.$menuLeftItems, t ? 0 : .5, {
                            x: 20,
                            opacity: 0
                        },
                        {
                            x: 0,
                            opacity: 1,
                            delay: .5
                        },
                        .05), TweenMax.staggerFromTo(this.$menuItems.toArray().shuffle(), t ? 0 : 1.8, {
                            y: .8 * -window.innerHeight
                        },
                        {
                            y: 0,
                            ease: Elastic.easeOut.config(1.01, .7),
                            delay: .2
                        },
                        .05,
                        function() {
                            e.animated = !0
                        }), TweenMax.staggerFromTo(this.$menuItems.toArray().shuffle(), t ? 0 : 4.8, {
                            rotation: -10,
                            transformOrigin: "0 -500px"
                        },
                        {
                            rotation: 0,
                            ease: Elastic.easeOut.config(1.1, .5),
                            delay: .1
                        },
                        .05), TweenMax.staggerFromTo(this.$menuBottomItems, t ? 0 : .2, {
                            y: 20,
                            opacity: 0
                        },
                        {
                            y: 0,
                            opacity: 1,
                            delay: .7
                        },
                        .1)) : (TweenMax.staggerFromTo(this.$menuItems, t ? 0 : 1.8, {
                            y: -100,
                            opacity: 0
                        },
                        {
                            y: 0,
                            opacity: 1,
                            ease: Elastic.easeOut.config(1.01, .7),
                            delay: .1
                        },
                        .05), TweenMax.staggerFromTo(this.$menuBottomItems, t ? 0 : .2, {
                            y: 20,
                            opacity: 0
                        },
                        {
                            y: 0,
                            opacity: 1,
                            delay: .6
                        },
                        .1,
                        function() {
                            e.animated = !0
                        }), TweenMax.to(this.$menuLine, t ? 0 : .7, {
                        y: 0,
                        scaleX: 1,
                        ease: Expo.easeOut,
                        delay: .5
                    })),
                    this.showCurtain()
            },
            e.prototype.hide = function(t) {
                var e = this;
                this.shown = !1,
                    this.animated = !1;
                var i = new TimelineMax({
                    onStart: function() {
                        e.toggleFooter(!1, t)
                    },
                    onComplete: function() {
                        e.$body.removeClass("is-menu"),
                            e.$wrap.css({
                                display: "none"
                            }),
                            e.setHeader()
                    }
                });
                s.breakpoint.desktop ? (i.staggerTo(this.$menuItems, t ? 0 : .5, {
                        y: .8 * -window.innerHeight,
                        ease: Elastic.easeIn.config(1.1, .9)
                    },
                    .05, 0), i.staggerTo(this.$menuLeftItems, t ? 0 : .3, {
                        x: 20,
                        opacity: 0,
                        delay: .1
                    },
                    .02, 0), i.to(this.$menuBottomItems, t ? 0 : .2, {
                        y: 20,
                        opacity: 0
                    },
                    0)) : (i.staggerFromTo(this.$menuItems.toArray().reverse(), t ? 0 : .5, {
                        y: 0
                    },
                    {
                        y: -100,
                        opacity: 0,
                        ease: Elastic.easeIn.config(1.1, .9)
                    },
                    .05, 0), i.fromTo(this.$menuBottomItems, t ? 0 : .2, {
                        y: 0,
                        opacity: 1
                    },
                    {
                        y: 20,
                        opacity: 0
                    },
                    0), i.to(this.$menuLine, t ? 0 : .2, {
                        scaleX: 0,
                        y: 20
                    },
                    0)),
                this.settings.courtain || this.hideCurtain()
            },
            e.prototype.toggleFooter = function(t, e) {
                var i = this;
                t && (TweenMax.set(this.$footer, {
                    yPercent: 100,
                    display: "block",
                    position: "fixed",
                    bottom: 0
                }), this.$footer.addClass("footer--alt")),
                    TweenMax.fromTo(this.$footer, e ? 0 : .5, {
                            transition: "none"
                        },
                        {
                            yPercent: t ? 0 : 100,
                            ease: Power2.easeOut,
                            delay: t ? .2 : 0,
                            clearProps: "transition",
                            onComplete: function() {
                                t || (i.$footer.removeClass("footer--alt"), TweenMax.set(i.$footer, {
                                    clearProps: "all"
                                }))
                            }
                        })
            },
            e.prototype.setHeader = function() {
                this.$header.toggleClass("header--alt", this.shown),
                    this.$header.find(".js-header-title").toggleClass("is-hidden", this.shown)
            },
            e.prototype.bind = function() {
                var r = this;
                $body.off(".menu").on("click.menu", ".js-menu-toggle",
                    function(t) {
                        r.shown ? (r.hide(), r.settings.courtain && r.hideCurtain()) : r.show()
                    }),
                    $doc.off(".menu").on("keyup.menu",
                        function(t) {
                            r.shown && (t.keyCode || t.which) === Utils.keys.esc && r.hide()
                        }),
                    this.$menuItems.off(".menu").on("mouseleave.menu",
                        function(t) {
                            $(t.currentTarget).data("factor", .2),
                            r.animated && TweenMax.to(t.currentTarget, 1.8, {
                                y: 0,
                                x: 0,
                                ease: Elastic.easeOut.config(1.2, .3),
                                rotation: 0,
                                delay: .2,
                                onComplete: function() {}
                            })
                        }).on("mousemove.menu",
                        function(t) {
                            var e = $(t.currentTarget);
                            if (r.animated) {
                                var i = e.width(),
                                    s = e.height(),
                                    o = Math.min(.8, 1.1 * e.data("factor") || .2),
                                    n = Math.min(i, (t.offsetX - .5 * i) * o),
                                    a = Math.min(s, (t.offsetY - .3 * s) * o);
                                TweenMax.to(e, .3, {
                                    x: n,
                                    y: a,
                                    rotation: -10 * n / i,
                                    ease: Sine.easeOut
                                }),
                                    e.data("factor", o)
                            }
                        })
            },
            e);
        function e(t, e) {
            i.call(this),
                this.view = t,
                this.options = e,
                this.shown = !1,
                this.animated = !1,
                this.settings = {
                    courtain: !1
                },
                this.$body = $("body"),
                this.$header = $(".js-header"),
                this.$footer = $(".js-footer"),
                this.$menuItems = this.view.find(".js-menu-item"),
                this.$menuLeftItems = this.view.find(".js-menu-left-item"),
                this.$menuBottomItems = this.view.find(".js-menu-bottom-item"),
                this.$menuLine = this.view.find(".js-menu-line"),
                this.$bg = this.view.find(".js-menu-bg"),
                this.$wrap = this.view.find(".js-menu-wrap"),
                TweenMax.set(this.$menuLine, {
                    transformOrigin: "100% 0",
                    scaleX: 0,
                    y: 20
                }),
                this.bind()
        }
        s.Menu = t
    } (Project = Project || {}),
    function(t) {
        var e = (i.prototype.destroy = function() {
            this.unbind()
        },
            i.prototype.bind = function() {
                var e = this;
                this.view.find(".js-newsletter-toggle").on("click.newsletter",
                    function(t) {
                        t.preventDefault(),
                            t.stopPropagation(),
                            e.view.toggleClass("is-opened"),
                            e.view.find('input[type="email"]').focus()
                    })
            },
            i.prototype.unbind = function() {
                this.view.find(".js-newsletter-toggle").off("click.newsletter")
            },
            i);
        function i(t) { (this.view = t)[0] && this.bind()
        }
        t.Newsletter = e
    } (Project = Project || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    };
var Historyjs = History; !
    function(o) {
        var n = (t.CHANGE = "state", t.PROGRESS = "progress", t.LIGHTBOX_CLICK = "lightbox", t);
        function t() {}
        o.PushStatesEvents = n;
        var e, i = (e = o.Handler, __extends(a, e), a.setTitle = function(t) {
            var e = $(".js-header-title"),
                i = $("#content > [data-header-title]").data("header-title") || "";
            e.eq(0).text() !== i && e.fadeOut(function() {
                $(this).text(i)
            }).fadeIn()
        },
            a.updateLinks = function() {
                a.instance.setActiveLinks()
            },
            a.goTo = function(t, e) {
                var i = t.replace(window.location.protocol + window.location.host, ""),
                    s = i !== window.location.pathname;
                return Modernizr.history ? e ? Historyjs.replaceState(null, null, i) : Historyjs.pushState(null, null, i) : window.location.replace(t),
                    s
            },
            a.changePath = function(t, e, i) {
                a.noChange = !0;
                var s = a.goTo(t, e || !0);
                a.noChange = !1,
                s && a.setTitle(i || document.title)
            },
            a.bind = function(t) {
                a.instance.bindLinks(t)
            },
            a.back = function(t) {
                2 < history.length ? Historyjs.back() : t ? Historyjs.replaceState(null, null, t) : Historyjs.replaceState(null, null, "/")
            },
            a.prototype.load = function() {
                var i = this;
                this.request && this.request.abort();
                var s = window.location.pathname + (window.location.search || "");
                return window.clearTimeout(this.timeout),
                    this.timeout = setTimeout(function() {
                            i.request && window.location.reload()
                        },
                        a.TIME_LIMIT),
                    new Promise(function(t, e) {
                        i.request = new XMLHttpRequest,
                            i.request.open("GET", s),
                            i.request.setRequestHeader("X-Requested-With", "XMLHttpRequest"),
                            i.request.onload = function() {
                                200 === i.request.status ? (i.loadedData = i.request.responseText, i.trigger(n.PROGRESS, 1), t(!0)) : (e(Error(i.request.statusText)), "abort" !== i.request.statusText && window.location.reload()),
                                    i.request = null,
                                    window.clearTimeout(i.timeout)
                            },
                            i.request.onerror = function() {
                                e(Error("Network Error")),
                                    window.clearTimeout(i.timeout),
                                    i.request = null
                            },
                            i.request.onprogress = function(t) {
                                t.lengthComputable && i.trigger(n.PROGRESS, t.loaded / t.total)
                            },
                            i.request.send()
                    })
            },
            a.prototype.render = function() {
                var t = this.loadedData,
                    e = a.CONTENT_SELECTOR,
                    i = null;
                1 < t.indexOf("<article") && (i = $(t).find(e).html()),
                    $(e).hide().empty().html(i || t).show(),
                    this.bindLinks()
            },
            a.prototype.bindLinks = function(t) {
                var e = this;
                t = t || "body",
                    $(t).find("a").not('[data-history="false"]').not("[download]").not('[href^="#"]').not('[href$=".jpg"]').not('[target="_blank"]').not('[href^="mailto:"]').not('[href^="http:"]').not('[href^="https:"]').not('[href^="tel:"]').off(".history").on("click.history",
                        function(t) {
                            return e.onClick(t)
                        }),
                    $(t).find('a[href^="http://"]').not('[href^="http://' + window.location.host + '"]').off(".history")
            },
            a.prototype.onClick = function(t) {
                t.preventDefault();
                var e = $(t.currentTarget),
                    i = e.attr("href").replace("http://" + window.location.host, ""),
                    s = e.attr("data-history");
                "back" === s ? a.back(i) : "replace" === s ? Historyjs.replaceState(null, document.title, i) : (e.is("[data-lightbox-link]") && this.trigger(n.LIGHTBOX_CLICK), o.Scrolling.resetScrollCache(i), Historyjs.pushState({
                        randomData: Math.random()
                    },
                    document.title, i))
            },
            a.prototype.onState = function() {
                this.setActiveLinks(),
                this.request || a.noChange || this.trigger(n.CHANGE)
            },
            a.prototype.setActiveLinks = function() {
                $("a[href]").removeClass("is-active"),
                    $('a[href="' + window.location.pathname + window.location.search + '"]').addClass("is-active"),
                    $('a.infobar__btn--history[href^="' + window.location.pathname + '"]').addClass("is-active")
            },
            a.CONTENT_SELECTOR = "#content", a.TIME_LIMIT = 1e4, a.noChange = !1, a);
        function a() {
            var t = this;
            e.call(this),
                this.loadedData = null,
                this.request = null,
                this.timeout = null,
            Historyjs && (this.bindLinks(), Historyjs.Adapter.bind(window, "statechange",
                function() {
                    return t.onState()
                })),
                (a.instance = this).setActiveLinks()
        }
        o.PushStates = i
    } (Project = Project || {}),
    function(n) {
        var t = (a.disable = function() {
            this.disabled = !0
        },
            a.enable = function() {
                this.disabled = !1
            },
            a.scrollToPath = function(t) {
                var e = $('[data-path="' + window.location.pathname + '"]');
                return !! e[0] && (a.scrollToElement(e, t), !0)
            },
            a.scrollToElement = function(t, e, i) {
                var s = this;
                if (t[0]) {
                    this.animating = !0;
                    var o = {
                        y: t.offset().top + (i || 0),
                        speed: e ? 0 : 1,
                        animate: !e,
                        callback: function() {
                            s.animating = !1
                        }
                    };
                    this.scroll(o)
                }
            },
            a.scrollTop = function(t) {
                a.scroll({
                    y: 0,
                    speed: t ? 0 : .5,
                    ease: Sine.easeOut
                })
            },
            a.scroll = function(t) {
                var e = this,
                    i = {
                        x: 0,
                        y: 0,
                        speed: 1.2,
                        ease: Quad.easeInOut,
                        animate: !0,
                        relativeSpeed: !1,
                        callback: null
                    };
                if ($.extend(i, t), this.obj.x = Math.max(document.body.scrollLeft, window.pageXOffset), this.obj.y = Math.max(document.body.scrollTop, window.pageYOffset), i.animate && 0 < i.speed) {
                    var s = Math.max(Math.abs(i.y - this.obj.y)),
                        o = Math.min(s / $window.height(), 1.5),
                        n = i.relativeSpeed ? i.speed * o: i.speed;
                    TweenMax.killTweensOf(this.obj),
                        TweenMax.to(this.obj, n, {
                            onUpdate: function() {
                                window.scrollTo(e.obj.x, e.obj.y)
                            },
                            x: i.x,
                            y: i.y,
                            ease: i.ease,
                            onComplete: "function" == typeof i.callback ?
                                function() {
                                    return i.callback()
                                }: null
                        })
                } else window.scrollTo(i.x, i.y),
                "function" == typeof i.callback && i.callback()
            },
            a.resetScrollCache = function(t) {
                a.instance.scrollCache[t] = 0
            },
            a.prototype.onState = function() {
                return ! this.changingPath && a.scrollToPath()
            },
            a.prototype.destroy = function() {
                this.cache = [],
                    this.invertCache = null,
                    $window.off(".scrolling")
            },
            a.prototype.resize = function(t, e, i) {
                this.windowHeight = e,
                    this.saveCache()
            },
            a.prototype.load = function() {
                var t = this;
                this.elements = $("[data-scroll]"),
                (this.elements[0] || $("[data-invert]")[0]) && (this.saveCache(), $body.imagesLoaded(function() {
                    return t.saveCache()
                }), $window.off(".scrolling").on("scroll.scrolling",
                    function() {
                        return t.onScroll()
                    }))
            },
            a.prototype.stop = function() {
                a.disable()
            },
            a.prototype.scrollToCached = function() {
                a.scroll({
                    y: this.scrollCache[window.location.pathname] || 0,
                    speed: 0
                })
            },
            a.prototype.start = function() {
                a.enable(),
                    a.instance.onScroll(!0)
            },
            a.prototype.saveCache = function() {
                for (var t = [], e = 0; e < this.elements.length; ++e) {
                    var i = this.elements.eq(e),
                        s = i.data("scroll") || "fadeUp",
                        o = i.offset().top,
                        n = i.outerHeight(),
                        a = i.data("delay") || 0,
                        r = {
                            $el: i,
                            role: s,
                            top: o,
                            height: n,
                            bottom: o + n,
                            delay: a
                        };
                    t.push(r),
                        i.data("cache", e)
                }
                var h = $("[data-invert]");
                if (h[0]) {
                    var l = h.offset().top,
                        c = h.outerHeight();
                    this.invertCache = {
                        role: null,
                        $el: h,
                        top: l,
                        height: c,
                        bottom: l + c
                    }
                } else this.invertCache = null;
                this.cache = t,
                    this.onScroll()
            },
            a.prototype.onScroll = function(t) {
                var e = window.scrollY ? window.scrollY: $window.scrollTop();
                if (this.cache && !a.disabled && !a.animating && (this.scrollCache[window.location.pathname] = e, this.invertCache && n.breakpoint.desktop ? n.Site.header.update(this.invertCache.top - e, this.invertCache.top - e + this.invertCache.height, this.invertCache.height) : n.Site.header.clear(), !this.settings.disableTouchDevices || !Modernizr.touchevents)) for (var i = this.windowHeight + e,
                                                                                                                                                                                                                                                                                                                                                                                          s = 0; s < this.cache.length; s++) {
                    var o = this.cache[s];
                    o.role in this.callbacks && (o.top < i && o.bottom >= e && !o.shown ? this.callbacks[o.role](o, 0, t) : o.top > i && (o.shown || !o.initialized) ? this.callbacks[o.role](o, 1, t) : o.bottom < e && (o.shown || !o.initialized) && this.callbacks[o.role](o, -.5, t))
                }
            },
            a.disabled = !0, a.animating = !1, a.obj = {
            x: 0,
            y: 0
        },
            a);
        function a() {
            this.callbacks = {
                fadeUp: function(t, e, i) {
                    if (0 === e && !t.shown || 0 !== e && t.shown || !t.initialized) {
                        var s = t.initialized || 0 === e ? 1 : 0,
                            o = 0 === e ? t.delay + (t.initialized ? 0 : .4) : 0;
                        t.shown = !t.shown,
                            t.initialized = !0,
                            TweenMax.to(t.$el, s, {
                                opacity: 1 === e ? 0 : 1,
                                ease: Sine.easeOut,
                                delay: o
                            }),
                            TweenMax.to(t.$el, i ? 0 : s, {
                                y: 80 * e,
                                ease: Sine.easeOut,
                                delay: i ? 0 : o
                            })
                    }
                }
            },
                this.settings = {
                    disableTouchDevices: !0
                },
                this.changingPath = !1,
                this.scrollCache = {},
            "scrollRestoration" in history && (history.scrollRestoration = "manual"),
                a.instance = this,
                a.scrollToPath(!0)
        }
        n.Scrolling = t
    } (Project = Project || {}),
    function(t) {
        var e = (i.prototype.show = function() {
            TweenMax.fromTo(this.bg.show(), .3, {
                    webkitClipPath: "ellipse(0 0 at 50% 50%)"
                },
                {
                    webkitClipPath: "ellipse(140px 140px at 50% 50%)",
                    ease: Sine.easeOut
                }),
                TweenMax.to(this.logo.show(), .3, {
                    opacity: 1,
                    delay: .3
                })
        },
            i.prototype.hide = function() {
                var s = this;
                return new Promise(function(t, e) {
                    s.shown || t();
                    var i = .6 * Math.sqrt(Math.pow(window.innerWidth, 2) + Math.pow(window.innerHeight, 2));
                    new TimelineMax({
                        onComplete: function() {
                            s.view.hide()
                        }
                    }).to(s.bg, .9, {
                        webkitClipPath: "ellipse(" + i + "px " + i + "px at 50% 50%)",
                        delay: .6,
                        ease: Power3.easeOut
                    }).to(s.view, .9, {
                        yPercent: 100,
                        ease: Power3.easeInOut
                    }).call(function() {
                            t()
                        },
                        null, null, "-=0.3"),
                        s.shown = !1
                })
            },
            i);
        function i(t) {
            this.view = t,
                this.shown = !0,
            t[0] && (this.logo = this.view.find(".splash__logo"), this.bg = this.view.find(".splash__bg"))
        }
        t.Splash = e
    } (Project = Project || {}),
    function(e) {
        var t = (i.init = function() {
            $doc.off(".access").on("keyup.access",
                function(t) {
                    9 === (t.keyCode || t.which) && (e.Accessbility.tabbedAmunt++, $("html").toggleClass("accessibility", 2 <= e.Accessbility.tabbedAmunt))
                }).on("mouseup.access",
                function() {
                    $("html").removeClass("accessibility"),
                        e.Accessbility.tabbedAmunt = 0
                })
        },
            i.tabbedAmunt = 0, i);
        function i() {}
        e.Accessbility = t
    } (Widgets = Widgets || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var e = (i.CHANGE = "change", i.HIDDEN = "hidden", i.VISIBLE = "visible", i.PRERENDER = "prerender", i.UNLOADED = "unloaded", i);
        function i() {}
        t.VisibilityState = e;
        var s, o = (s = Project.Handler, __extends(n, s), n.prototype.getState = function() {
            return Modernizr.prefixed("visibilityState", document)
        },
            n.prototype.check = function() {
                var t = this.getState();
                this.state = t,
                    this.trigger(e.CHANGE, t),
                    this.trigger(t)
            },
            n);
        function n() {
            var t = this;
            if (s.call(this), Modernizr.pagevisibility) {
                var e = void 0 !== document.mozHidden ? "mozvisibilitychange": "visibilitychange";
                document.addEventListener(e,
                    function() {
                        return t.check()
                    }),
                    this.check()
            }
        }
        t.Visibility = o
    } (Widgets = Widgets || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var i, e = (i = t.Component, __extends(s, i), s.prototype.toggle = function(t, e) {
            var i = this;
            void 0 !== t ? t && !this.shown ? this.show(e) : !t && this.shown && this.hide(e) : (this.shown ?
                function(t) {
                    return i.hide(t)
                }: function(t) {
                    return i.show(t)
                })(e)
        },
            s.prototype.resize = function(t, e, i) {
                this.bp = i
            },
            s.prototype.destroy = function() {
                this.bg = null,
                    this.wrap = null,
                    this.unbind(),
                    this.bp = null,
                    this.wrap = null,
                    i.prototype.destroy.call(this)
            },
            s.prototype.show = function(t) {
                var e = this;
                this.shown = !0,
                    $body.addClass("is-filter-opening"),
                    (new TimelineMax).to(this.bg, .5, {
                        scale: 1,
                        xPercent: this.bp.phone ? 25 : 10,
                        yPercent: this.bp.phone ? -25 : 26,
                        ease: Back.easeOut.config(2)
                    }).call(function() {
                        e.bp.phone && Project.Scrolling.scrollTop(!0),
                            $body.addClass("is-filter"),
                            $body.removeClass("is-filter-opening")
                    }).staggerFromTo(this.wrap.children("fieldset"), .6, {
                            y: 20,
                            opacity: 0
                        },
                        {
                            y: 0,
                            opacity: 1,
                            ease: Sine.easeOut,
                            clearProps: "y,opacity"
                        },
                        .2, "-=0.2")
            },
            s.prototype.hide = function(t) {
                this.shown = !1,
                    $body.removeClass("is-filter is-filter-opening"),
                this.bp.phone && Project.Scrolling.scrollTop(!0),
                    (new TimelineMax).set(this.bg, {
                        clearProps: "scale,x,y"
                    }).from(this.bg, .3, {
                        scale: 1,
                        xPercent: this.bp.phone ? 25 : 10,
                        yPercent: this.bp.phone ? -25 : 22
                    })
            },
            s.prototype.bind = function() {
                var s = this;
                $body.on("click.filter-toggle", ".js-filter-toggle",
                    function(t) {
                        t.preventDefault(),
                            t.stopPropagation(),
                            s.toggle()
                    }),
                    $body.on("click.filter-close", ".js-filter-close",
                        function(t) {
                            t.preventDefault(),
                                t.stopPropagation(),
                            s.shown && s.hide()
                        }),
                    $body.on("click.filter-label", ".js-filter-label",
                        function(t) {
                            TweenMax.to(t.currentTarget, .3, {
                                pointerEvents: "none",
                                overflow: "hidden",
                                margin: 0,
                                width: 0,
                                opacity: 0,
                                onComplete: function() {
                                    $("#" + $(t.currentTarget).attr("for")).closest("form").trigger("submit")
                                }
                            })
                        }),
                    $doc.off(".repertoire").on("keyup.repertoire",
                        function(t) {
                            switch (t.keyCode || t.which) {
                                case Utils.keys.right:
                                    var e = $('[rel="next"]');
                                    e[0] && e.trigger("click");
                                    break;
                                case Utils.keys.left:
                                    var i = $('[rel="prev"]');
                                    i[0] && i.trigger("click");
                                    break;
                                case Utils.keys.esc:
                                    s.shown && s.hide()
                            }
                        })
            },
            s.prototype.unbind = function() {
                $doc.off(".repertoire"),
                    $body.off(".filter-toggle").off(".filter-close").off(".filter-label")
            },
            s);
        function s(t, e) {
            i.call(this, t, e),
                this.view = t,
                this.options = e,
                this.shown = !1,
                this.bg = this.view.find(".js-filter-bg"),
                this.wrap = this.view.find(".js-filter-wrap"),
                this.bind()
        }
        t.Filter = e
    } (Components = Components || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var i, e = (i = t.Component, __extends(s, i), s.prototype.destroy = function() {
            this.unbind(),
                this.contentEl = null,
                i.prototype.destroy.call(this)
        },
            s.prototype.animateIn = function(t, e) {
                TweenMax.to(this.view, .6, {
                    y: "0%",
                    delay: .2 + (t || 0),
                    ease: Power3.easeOut
                })
            },
            s.prototype.animateOut = function() {
                var i = this;
                return new Promise(function(t, e) {
                    TweenMax.to(i.view, .5, {
                        y: "100%",
                        ease: Project.Site.CUSTOM_EASE,
                        onComplete: function() {
                            t(!0)
                        }
                    })
                })
            },
            s.prototype.resize = function() {
                this.width = this.view.width(),
                    this.contentWidth = this.contentEl.width(),
                    this.offset = this.view.offset().left,
                    this.maxShift = this.contentWidth - this.width,
                Project.breakpoint.desktop || this.reset()
            },
            s.prototype.bind = function() {
                var e = this;
                this.contentEl.off(".infobar").on("mousemove.infobar",
                    function(t) {
                        e.mouseX = t.pageX - e.offset
                    }).on("mouseleave.infobar",
                    function(t) {
                        e.mouseX = null
                    }),
                    this.interval = setInterval(function() {
                            Project.breakpoint.desktop && e.contentWidth > e.width && null !== e.mouseX && (e.mouseX < .15 * e.width ? (e.translateX += e.step, e.update()) : e.mouseX > .85 * e.width && (e.translateX -= e.step, e.update()))
                        },
                        1)
            },
            s.prototype.unbind = function() {
                this.view.off(".infobar"),
                    window.clearInterval(this.interval)
            },
            s.prototype.update = function() {
                this.translateX = Math.max( - this.maxShift, Math.min(0, this.translateX)),
                    TweenMax.killTweensOf(this.contentEl),
                    TweenMax.to(this.contentEl, .7, {
                        x: this.translateX,
                        ease: Sine.easeOut
                    })
            },
            s.prototype.reset = function() {
                this.translateX = 0,
                    TweenMax.set(this.contentEl, {
                        clearProps: "x"
                    })
            },
            s);
        function s(t, e) {
            i.call(this, t, e),
                this.view = t,
                this.options = e,
                this.step = 2,
                this.translateX = 0,
                this.contentEl = this.view.find(".js-wrapper"),
                TweenMax.set(this.view, {
                    y: "100%"
                }),
                this.bind()
        }
        t.Infobar = e
    } (Components = Components || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(s) {
        var i, t = (i = s.Component, __extends(e, i), e.prototype.destroy = function() {
            this.unbind(),
                this.contentEl = null,
                this.countEl = null,
                i.prototype.destroy.call(this)
        },
            e.prototype.bind = function() {
                var e = this;
                this.view.off(".load").on("submit.load",
                    function(t) {
                        return e.onSubmit(t)
                    }),
                this.settings.live && (this.view.find(":input").not("[type=search]").off(".load").on("change.load",
                    function() {
                        window.clearTimeout(e.liveTimeout),
                            e.liveTimeout = setTimeout(function() {
                                    e.onSubmit()
                                },
                                1e3)
                    }), this.view.find("[type=search]").off(".load").on("keyup.load",
                    function(t) {
                        window.clearTimeout(e.liveTimeout),
                        3 <= t.currentTarget.value.length && t.key !== Utils.keys.enter && (e.liveTimeout = setTimeout(function() {
                                e.onSubmit()
                            },
                            250))
                    }))
            },
            e.prototype.hideContent = function() {
                var i = this;
                return new Promise(function(t, e) {
                    i.contentHidden ? t() : TweenMax.to(i.contentEl, .4, {
                        y: -20,
                        opacity: 0,
                        ease: Sine.easeOut,
                        onComplete: function() {
                            i.contentHidden = !0,
                                t()
                        }
                    })
                })
            },
            e.prototype.showContent = function() {
                this.contentHidden = !1,
                    TweenMax.fromTo(this.contentEl, .6, {
                            y: 20,
                            opacity: 0
                        },
                        {
                            y: 0,
                            opacity: 1,
                            ease: Sine.easeOut
                        })
            },
            e.prototype.load = function(t) {
                var o = this;
                return window.clearTimeout(this.liveTimeout),
                    this.contentEl.addClass("is-pending"),
                    new Promise(function(e, i) {
                        var s = o.xhruid = (new Date).getTime();
                        $.ajax({
                            url: t,
                            global: !1,
                            type: "POST",
                            dataType: "html",
                            async: !0
                        }).done(function(t) {
                            s === o.xhruid ? (o.loadedContent = t, e()) : i()
                        }).fail(function(t) {
                            i()
                        }).always(function() {
                            o.view.removeClass("is-pending")
                        })
                    })
            },
            e.prototype.render = function() {
                var t = $(this.loadedContent);
                if (this.contentEl[0]) {
                    var e = t.find(this.settings.contentSelector).html();
                    this.contentEl.html(e)
                }
                if (this.countEl[0]) {
                    var i = t.find(this.settings.countSelector).html();
                    this.countEl.html(i)
                }
                this.trigger(s.ComponentEvents.CHANGE, this.contentEl),
                    t.remove()
            },
            e.prototype.unbind = function() {
                this.view.off(".load")
            },
            e.prototype.onSubmit = function(t) {
                var e = this;
                t && (t.preventDefault(), t.stopPropagation());
                var i = this.view.attr("action"),
                    s = this.settings.extra ? $(this.settings.extra).serialize().replace(/[^&]+=\.?(?:&|$)/g, "") : null,
                    o = this.view.serialize().replace(/[^&]+=\.?(?:&|$)/g, ""); ((o = "" === o ? null: o) || s) && (i += "?", i += [s, o].filter(function(t) {
                    return !! t
                }).join("&")),
                window.location.search !== i && (Project.PushStates.changePath(i), Promise.all([this.hideContent(), this.load(i)]).then(function() {
                    e.render(),
                        e.showContent()
                }))
            },
            e);
        function e(t, e) {
            i.call(this, t, e),
                this.view = t,
                this.options = e,
                this.loadedContent = null,
                this.settings = {
                    contentSelector: ".js-load-content",
                    countSelector: ".js-load-count",
                    live: !1
                },
                this.contentHidden = !1,
            "object" == typeof e && $.extend(this.settings, e),
                this.contentEl = $(this.settings.contentSelector),
                this.countEl = $(this.settings.countSelector),
                this.bind()
        }
        s.Load = t
    } (Components = Components || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var i, e = (i = t.Load, __extends(s, i), s.prototype.destroy = function() {
            this.bg = null,
                i.prototype.destroy.call(this)
        },
            s.prototype.bind = function() {
                var e = this;
                this.view.off().on("click.load", '[data-history="false"]',
                    function(t) {
                        return e.onClick(t)
                    })
            },
            s.prototype.showContent = function() {
                var t = this;
                i.prototype.showContent.call(this),
                176 < (window.scrollY ? window.scrollY: $window.scrollTop()) && Project.Scrolling.scroll({
                    y: 176,
                    animate: !1
                }),
                    this.bg = this.view.siblings(".js-calendar-bg");
                var e = $(this.loadedContent).hasClass("repertoire--alt");
                this.bg.toggleClass("is-alt", e),
                    this.view.closest("[data-page]").toggleClass("repertoire--alt-text", e),
                    this.view.closest("[data-page]").toggleClass("repertoire--normal-text", !e),
                    $body.addClass("is-reloading-repertoire"),
                    TweenMax.fromTo(this.bg.show(), .7, {
                            scaleY: 0
                        },
                        {
                            scaleY: 1,
                            ease: Power3.easeOut,
                            onComplete: function() {
                                $body.toggleClass("is-repertoire", !e).toggleClass("is-repertoire-alt", !!e).removeClass("is-reloading-repertoire"),
                                    t.bg.hide(),
                                    t.view.closest("[data-page]").toggleClass("repertoire--alt", e)
                            }
                        })
            },
            s.prototype.onClick = function(t) {
                var e = this;
                t.preventDefault(),
                    t.stopPropagation();
                var i = t.currentTarget.search;
                window.location.search !== i && (Project.PushStates.changePath(i), Promise.all([this.hideContent(), this.load(i)]).then(function() {
                    e.render(),
                        e.updateColors(),
                        e.showContent()
                }))
            },
            s.prototype.updateColors = function() {
                var t = $(this.loadedContent);
                t.is("[data-invert]") ? this.contentEl.closest("article").attr("data-invert", "true") : this.contentEl.closest("article").removeAttr("data-invert"),
                    t.remove()
            },
            s);
        function s(t, e) {
            i.call(this, t, e),
                this.view = t,
                this.options = e
        }
        t.LoadCalendar = e
    } (Components = Components || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var o, e = (o = t.Puppet, __extends(i, o), i.prototype.render = function(t, e) {
            this.parts.eyes.useAlternateImage = !!this.grabbed,
                this.parts.head.useAlternateImage = !!this.closeMouth || !!this.grabbed,
                o.prototype.render.call(this, t, e)
        },
            i.prototype.animate = function(i) {
                var s = this;
                if (this.parts) return new Promise(function(t, e) {
                    new TimelineMax({
                        onComplete: function() {
                            t(s)
                        }
                    }).call(function() { ! 0 !== i && Widgets.Sounds.play("launch")
                    }).add("start").to(s, .2, {
                        y: 40 * s.scale
                    }).add("jump").to(s, .4, {
                        y: -240 * s.scale,
                        ease: Power3.easeOut
                    }).add("fall").to(s, .4, {
                        y: 0,
                        ease: Power2.easeIn
                    }).to(s.parts.leftLeg, .1, {
                            y: -15 * s.scale
                        },
                        0).to(s.parts.leftLeg, .3, {
                            y: 0
                        },
                        "jump").to(s.parts.rightLeg, .1, {
                            y: -15 * s.scale
                        },
                        0).to(s.parts.rightLeg, .3, {
                            y: 0
                        },
                        "jump"),
                        (new TimelineMax).to(s.parts.leftLeg, .35, {
                            ease: Sine.easeIn,
                            rotation: 2,
                            delay: .1
                        }).to(s.parts.leftLeg, .2, {
                            ease: Back.easeOut,
                            rotation: 0,
                            delay: .4
                        }),
                        (new TimelineMax).to(s.parts.rightLeg, .35, {
                            ease: Sine.easeIn,
                            rotation: -20,
                            delay: .1
                        }).to(s.parts.rightLeg, .2, {
                            ease: Back.easeOut,
                            rotation: 0,
                            delay: .4
                        }).set({},
                            {},
                            "-=0.1").call(function() {
                            Utils.vibrate(100),
                                Widgets.Sounds.play("tap")
                        }),
                        (new TimelineMax).to(s.parts.rightArm, .7, {
                            ease: Sine.easeIn,
                            rotation: -20
                        }).to(s.parts.rightArm, .2, {
                            ease: Back.easeOut,
                            delay: .25,
                            rotation: 0
                        }),
                        (new TimelineMax).to(s.parts.leftArm, .7, {
                            ease: Sine.easeIn,
                            rotation: 20
                        }).to(s.parts.leftArm, .2, {
                            ease: Back.easeOut,
                            delay: .25,
                            rotation: 0
                        }),
                        (new TimelineMax).to(s.parts.hat, .4, {
                            ease: Back.easeOut,
                            y: -10 * s.scale,
                            rotation: -4,
                            delay: .3
                        }).to(s.parts.hat, .4, {
                            delay: .3,
                            ease: Back.easeOut,
                            rotation: 0,
                            y: 0
                        }),
                        (new TimelineMax).to(s.parts.mustache, .3, {
                            ease: Back.easeOut,
                            y: -4 * s.scale,
                            rotation: 1,
                            delay: .1
                        }).to(s.parts.mustache, .5, {
                            ease: Back.easeOut,
                            rotation: 0,
                            y: 0
                        }),
                        (new TimelineMax).to(s.parts.eyes, .1, {
                            y: 5 * s.scale
                        }).to(s.parts.eyes, .3, {
                            y: 0
                        })
                })
            },

            i);
        function i(t, e, i, s) {
            o.call(this, t, e, i),
                this.position = t,
                this.scale = e,
                this.name = i,
                this.options = s,
                this.originalWidth = 208,
                this.originalHeight = 554,
                this.assetsPath = "/public/theme/images/lalki/karabinier/",
                this.labelPosition = {
                    x: 20,
                    y: -20
                },
                this.closeMouth = !1;
            this.build({


            })
        }
        t.Karabinier = e
    } (Puppets = Puppets || {}),
    function(i) {
        var t = (r.supportsAudio = function() {
            var t = document.createElement("audio");
            return ! (!t.canPlayType || !t.canPlayType("audio/mpeg;").replace(/no/, ""))
        },
            r.bind = function(t) {
                var e = void 0 !== t ? $(t) : $body;
                $("[data-sound-hover]", e).off(".sound-hover").on("mouseenter.sound-hover",
                    function(t) {
                        var e = $(t.currentTarget).data("sound-hover") || "hover";

                    }),
                    $("[data-sound-click]", e).off(".sound-click").on("click.sound-click",
                        function(t) {
                            var e = $(t.currentTarget).data("sound-click") || "click";
                            r.play(e)
                        }),
                    $("[data-generate-sounds]", e).off(".sound-generate").on("click.sound-generate",
                        function(t) {
                            return r.generateSoundTester(t)
                        }),
                    $(".js-toggle-sounds").off(".sounds").on("click.sounds",
                        function(t) {
                            t.preventDefault(),
                                t.stopPropagation(),
                                i.Sounds.toggle()
                        })
            },
            r.generateSoundTester = function(t) {
                var e = "<ul>";
                for (var i in r.sources) r.sources.hasOwnProperty(i) && (e += '<li class="sound-test" data-sound-click="' + i + '"><strong>' + i + "</strong> " + r.sources[i] + "</li>");
                e += "</ul>",
                    $(t.currentTarget).hide().after(e),
                    r.bind($(t.currentTarget).parent()[0])
            },


            r);
        function r() {}
        i.Sounds = t
    } (Widgets = Widgets || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var o, e = (o = t.Puppet, __extends(i, o), i.prototype.animate = function(t) {
            var i = this;
            if (this.parts) return new Promise(function(t, e) {
                Widgets.Sounds.play("kat"),
                    new TimelineMax({
                        onComplete: function() {
                            t(i)
                        }
                    }).to(i.parts.arms, .3, {
                        x: -80 * i.scale,
                        ease: Sine.easeInOut
                    }).to(i.parts.arms, .5, {
                        x: 30 * i.scale,
                        ease: Sine.easeInOut
                    }).to(i.parts.arms, .3, {
                        x: 0,
                        ease: Sine.easeInOut
                    }),
                    TweenMax.killTweensOf(i.parts.eyes),
                    (new TimelineMax).to(i.parts.eyes, .5, {
                        x: 5 * i.scale,
                        ease: Expo.easeOut,
                        delay: .1
                    }).to(i.parts.eyes, .5, {
                        x: 0,
                        ease: Expo.easeOut,
                        delay: .1
                    }),
                    (new TimelineMax).to(i.bg, .3, {
                        opacity: 1,
                        ease: Expo.easeOut
                    }).to(i.bg, .2, {
                        opacity: 0,
                        delay: .3,
                        ease: Sine.easeOut
                    })
            })
        },
            i.prototype.onTimeout = function() { (new TimelineMax).to(this.parts.eyes, .5, {
                x: 6,
                ease: Expo.easeOut
            }).to(this.parts.eyes, .5, {
                x: 0,
                ease: Expo.easeOut
            }).to(this.parts.eyes, .6, {
                x: 6,
                ease: Expo.easeOut
            }).to(this.parts.eyes, .8, {
                x: 0,
                ease: Expo.easeOut,
                delay: .7
            }),
                o.prototype.onTimeout.call(this)
            },
            i);
        function i(t, e, i, s) {
            o.call(this, t, e, i, s),
                this.position = t,
                this.scale = e,
                this.name = i,
                this.options = s,
                this.originalWidth = 488,
                this.originalHeight = 364,
                this.assetsPath = "/public/theme/images/lalki/kat/";
            this.build({

            })
        }
        t.Kat = e
    } (Puppets = Puppets || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var o, e = (o = t.Puppet, __extends(i, o), i.prototype.animate = function(t) {
            var i = this;
            if (this.parts) return new Promise(function(t, e) {
                new TimelineMax({
                    onComplete: function() {
                        Utils.vibrate(70)
                    }
                }).to(i, .3, {
                    y: 20 * i.scale,
                    ease: Sine.easeInOut
                }).to(i, .5, {
                    y: -140 * i.scale,
                    ease: Circ.easeOut
                }).to(i, .3, {
                    y: 0,
                    ease: Sine.easeIn
                }),
                    new TimelineMax({
                        onComplete: function() {
                            i.startTimeout(),
                                t(i)
                        }
                    }).to(i.parts.head, .2, {
                        rotation: 10
                    }).to(i.parts.head, .5, {
                        rotation: -5
                    }).to(i.parts.head, .5, {
                        rotation: 0
                    }),
                    (new TimelineMax).to(i.parts.rightArm, .2, {
                        rotation: -10
                    }).to(i.parts.rightArm, .8, {
                        rotation: 60,
                        ease: Expo.easeOut
                    }).to(i.parts.rightArm, .5, {
                        rotation: 0,
                        ease: Back.easeOut
                    }),
                    (new TimelineMax).to(i.parts.leftArm, .2, {
                        rotation: 10
                    }).to(i.parts.leftArm, .8, {
                        rotation: -60,
                        ease: Expo.easeOut
                    }).to(i.parts.leftArm, .5, {
                        rotation: 0,
                        ease: Back.easeOut
                    }),
                    (new TimelineMax).to(i.parts.rightLeg, .2, {
                        rotation: 2
                    }).to(i.parts.rightLeg, .6, {
                        rotation: -60,
                        ease: Expo.easeOut
                    }).to(i.parts.rightLeg, .4, {
                        rotation: 0,
                        ease: Sine.easeOut
                    }),
                    (new TimelineMax).to(i.parts.leftLeg, .2, {
                        rotation: -2
                    }).to(i.parts.leftLeg, .6, {
                        rotation: 60,
                        ease: Expo.easeOut
                    }).set({},
                        {},
                        "+=0.1").call(function() {
                        Widgets.Sounds.play("jump")
                    }).to(i.parts.leftLeg, .4, {
                            rotation: 0,
                            ease: Sine.easeOut
                        },
                        "-=0.1")
            })
        },

            i);
        function i(t, e, i, s) {
            o.call(this, t, e, i),
                this.position = t,
                this.scale = e,
                this.name = i,
                this.options = s,
                this.originalWidth = 286,
                this.originalHeight = 454,
                this.assetsPath = "/public/theme/images/lalki/guignol/",
                this.labelPosition = {
                    x: 20,
                    y: -10
                };
            this.build({


            })
        }
        t.Guignol = e
    } (Puppets = Puppets || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var o, e = (o = t.Puppet, __extends(i, o), i.prototype.animate = function(i) {
            var s = this;
            if (this.parts) return new Promise(function(t, e) { (s.parts.head.useAlternateImage = !0) !== i && Widgets.Sounds.play("bells"),
                new TimelineMax({
                    onComplete: function() {
                        s.parts.head.useAlternateImage = !1,
                            t(s)
                    }
                }).to(s.parts.head, .3, {
                    rotation: 20,
                    ease: Sine.easeInOut
                }).to(s.parts.head, .3, {
                    rotation: 0,
                    ease: Sine.easeInOut
                }).to(s.parts.leftLeg, .3, {
                        y: -10 * s.scale,
                        ease: Expo.easeOut
                    },
                    0).to(s.parts.leftLeg, .3, {
                        y: 0,
                        ease: Expo.easeIn
                    },
                    .3).to(s.parts.rightLeg, .3, {
                        y: -10 * s.scale,
                        ease: Expo.easeOut
                    },
                    0).to(s.parts.rightLeg, .3, {
                        y: 0,
                        ease: Expo.easeIn
                    },
                    .3),
                (new TimelineMax).to(s, .3, {
                    y: 10 * s.scale,
                    ease: Expo.easeOut
                }).to(s, .3, {
                    y: 0,
                    ease: Expo.easeIn
                })
            })
        },

            i);
        function i(t, e, i, s) {
            o.call(this, t, e, i),
                this.position = t,
                this.scale = e,
                this.name = i,
                this.options = s,
                this.originalWidth = 398,
                this.originalHeight = 636,
                this.assetsPath = "/public/theme/images/lalki/turon/";
            this.build({


            })
        }
        t.Turon = e
    } (Puppets = Puppets || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var o, e = (o = t.Puppet, __extends(i, o), i.prototype.animate = function(t) {
            var i = this;
            if (this.parts) return new Promise(function(t, e) {
                Widgets.Sounds.play("wobbling"),
                    i.parts.body.animateSprite(),
                    new TimelineMax({
                        onComplete: function() {
                            i.startTimeout(),
                                t(i)
                        }
                    }).to(i.parts.leftArm1, .7, {
                        x: -15 * i.scale,
                        ease: Expo.easeOut
                    }).to(i.parts.leftArm1, .5, {
                        x: 0,
                        ease: Back.easeOut
                    }),
                    (new TimelineMax).to(i.parts.leftArm2, .7, {
                        x: -24 * i.scale,
                        ease: Expo.easeOut
                    }).to(i.parts.leftArm2, .5, {
                        x: 0,
                        ease: Back.easeOut
                    }),
                    (new TimelineMax).to(i.parts.leftArm3, .7, {
                        x: -35 * i.scale,
                        rotation: -8,
                        ease: Expo.easeOut
                    }).to(i.parts.leftArm3, .5, {
                        x: 0,
                        rotation: 0,
                        ease: Back.easeOut
                    }),
                    (new TimelineMax).to(i.parts.leftHand, .7, {
                        x: -36 * i.scale,
                        rotation: -10,
                        ease: Expo.easeOut
                    }).to(i.parts.leftHand, .5, {
                        x: 0,
                        rotation: 0,
                        ease: Back.easeOut
                    }),
                    (new TimelineMax).to(i.parts.rightArm1, .7, {
                        x: 15 * i.scale,
                        ease: Expo.easeOut
                    }).to(i.parts.rightArm1, .5, {
                        x: 0,
                        ease: Back.easeOut
                    }),
                    (new TimelineMax).to(i.parts.rightArm2, .7, {
                        x: 24 * i.scale,
                        ease: Expo.easeOut
                    }).to(i.parts.rightArm2, .5, {
                        x: 0,
                        ease: Back.easeOut
                    }),
                    (new TimelineMax).to(i.parts.rightArm3, .7, {
                        x: 35 * i.scale,
                        ease: Expo.easeOut
                    }).to(i.parts.rightArm3, .5, {
                        x: 0,
                        ease: Back.easeOut
                    }),
                    (new TimelineMax).to(i.parts.rightHand, .7, {
                        x: 36 * i.scale,
                        ease: Expo.easeOut
                    }).to(i.parts.rightHand, .5, {
                        x: 0,
                        ease: Back.easeOut
                    })
            })
        },

            i);
        function i(t, e, i, s) {
            o.call(this, t, e, i),
                this.position = t,
                this.scale = e,
                this.name = i,
                this.options = s,
                this.originalWidth = 628,
                this.originalHeight = 436,
                this.assetsPath = "/public/theme/images/lalki/krol/",
                this.labelPosition = {
                    x: 0,
                    y: -10
                };
            this.build({

            })
        }
        t.Krol = e
    } (Puppets = Puppets || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var o, e = (o = t.Puppet, __extends(i, o), i.prototype.render = function(t, e) {
            this.parts.head.useAlternateImage = !!this.useAltHead,
                o.prototype.render.call(this, t, e)
        },
            i.prototype.animate = function(t) {
                var i = this;
                if (this.parts) return new Promise(function(t, e) {
                    Widgets.Sounds.play("ping"),
                        TweenMax.to(i.parts.head, 1, {
                            rotation: 360,
                            ease: Power1.easeInOut,
                            onComplete: function() {
                                i.parts.head.rotation = 0,
                                    t(i)
                            }
                        }),
                        (new TimelineMax).to([i.parts.leftArm, i.parts.rightArm], .5, {
                            y: -10 * i.scale,
                            ease: Expo.easeOut
                        }).to([i.parts.leftArm, i.parts.rightArm], .5, {
                            y: 0,
                            ease: Back.easeOut
                        })
                })
            },
            i.prototype.onTimeout = function() {
                var t = this;
                this.useAltHead = !0,
                    setTimeout(function() {
                            t.useAltHead = !1,
                                o.prototype.onTimeout.call(t)
                        },
                        2e3)
            },
            i);
        function i(t, e, i, s) {
            o.call(this, t, e, i),
                this.position = t,
                this.scale = e,
                this.name = i,
                this.options = s,
                this.originalWidth = 242,
                this.originalHeight = 624,
                this.assetsPath = "/public/theme/images/lalki/malpka/",
                this.labelPosition = {
                    x: 30,
                    y: 0
                },
                this.useAltHead = !1;
            this.build({

            })
        }
        t.Malpka = e
    } (Puppets = Puppets || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var o, e = (o = t.Puppet, __extends(i, o), i.prototype.render = function(t, e) {
            this.parts.head.useAlternateImage = !!this.isSmiled || !!this.grabbed,
                o.prototype.render.call(this, t, e)
        },
            i.prototype.animate = function(t) {
                var s = this;
                if (this.parts) return new Promise(function(t, e) {
                    s.isSmiled = !0,
                        Widgets.Sounds.play("smirk"),
                        new TimelineMax({
                            onComplete: function() {
                                s.startTimeout()
                            }
                        }).to(s, .55, {
                            y: -100 * s.scale,
                            ease: Circ.easeOut
                        }).to(s, .3, {
                            y: 0,
                            ease: Sine.easeInOut
                        }),
                        new TimelineMax({
                            onComplete: function() {
                                s.isSmiled = !1,
                                    t(s)
                            }
                        }).to(s.parts.wing, .1, {
                            rotation: 20,
                            ease: Sine.easeIn
                        }).to(s.parts.wing, .1, {
                            rotation: -10,
                            ease: Sine.easeInOut
                        }).to(s.parts.wing, .1, {
                            rotation: 20,
                            ease: Sine.easeInOut
                        }).to(s.parts.wing, .1, {
                            rotation: -10,
                            ease: Sine.easeInOut
                        }).to(s.parts.wing, .1, {
                            rotation: 20,
                            ease: Sine.easeInOut
                        }).to(s.parts.wing, .2, {
                            rotation: 0,
                            ease: Sine.easeInOut
                        });
                    var i = {
                        i: 0
                    };
                    TweenMax.fromTo(i, .8, {
                            i: 0
                        },
                        {
                            i: 10,
                            roundProps: "i",
                            ease: Power0.easeInOut,
                            onUpdate: function() {
                                s.parts.hat.useAlternateImage = i.i % 2 == 0
                            }
                        }),
                        (new TimelineMax).to([s.parts.armFront, s.parts.armBack], .25, {
                            ease: Sine.easeIn,
                            rotation: -5
                        }).to([s.parts.armFront, s.parts.armBack], .35, {
                            ease: Sine.easeOut,
                            delay: .3,
                            rotation: 0
                        })
                })
            },

            i);
        function i(t, e, i, s) {
            o.call(this, t, e, i),
                this.position = t,
                this.scale = e,
                this.name = i,
                this.options = s,
                this.originalWidth = 356,
                this.originalHeight = 358,
                this.assetsPath = "/public/theme/images/lalki/punch/",
                this.isSmiled = !1;
            this.build({


            })
        }
        t.Punch = e
    } (Puppets = Puppets || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var o, e = (o = t.Puppet, __extends(i, o), i.prototype.render = function(t, e) {
            this.parts.head.useAlternateImage = !!this.openEyes || !!this.grabbed,
                o.prototype.render.call(this, t, e)
        },
            i.prototype.animate = function(t) {
                var i = this;
                if (this.parts) return new Promise(function(t, e) {
                    i.openEyes = !0,
                        new TimelineMax({
                            onComplete: function() {
                                i.startTimeout(),
                                    t(i)
                            }
                        }).call(function() {
                                Widgets.Sounds.play("wings")
                            },
                            null, null, .15).to(i, 1, {
                            y: -150 * i.scale,
                            ease: Circ.easeOut,
                            delay: .3
                        }).to(i, .5, {
                            y: 0,
                            ease: Sine.easeIn
                        }),
                        (new TimelineMax).to(i.parts.claws, .8, {
                            y: -20 * i.scale,
                            ease: Back.easeOut,
                            delay: .4
                        }).to(i.parts.claws, .6, {
                            y: 0,
                            delay: .2,
                            ease: Sine.easeIn
                        }),
                        new TimelineMax({
                            onComplete: function() {
                                i.openEyes = !1,
                                    t(i)
                            }
                        }).to(i.parts.leftWing, .3, {
                            rotation: 20,
                            ease: Sine.easeIn
                        }).to(i.parts.leftWing, .9, {
                            rotation: -60,
                            ease: Expo.easeOut
                        }).to(i.parts.leftWing, .6, {
                                rotation: 0,
                                ease: Back.easeOut.config(1.02)
                            },
                            "+=0.5"),
                        new TimelineMax({
                            onComplete: function() {
                                i.openEyes = !1,
                                    t(i)
                            }
                        }).to(i.parts.rightWing, .3, {
                            rotation: -20,
                            ease: Sine.easeIn
                        }).to(i.parts.rightWing, .9, {
                            rotation: 60,
                            ease: Expo.easeOut
                        }).to(i.parts.rightWing, .6, {
                                rotation: 0,
                                ease: Back.easeOut.config(1.02)
                            },
                            "+=0.5")
                })
            },
            i.prototype.onTimeout = function() {
                var t = this;
                this.openEyes = !0,
                    setTimeout(function() {
                            t.openEyes = !1
                        },
                        2e3),
                    o.prototype.onTimeout.call(this)
            },
            i);
        function i(t, e, i, s) {
            o.call(this, t, e, i),
                this.position = t,
                this.scale = e,
                this.name = i,
                this.options = s,
                this.originalWidth = 679,
                this.originalHeight = 396,
                this.assetsPath = "/public/theme/images/lalki/sowa/",
                this.openEyes = !1;
            this.build({

            })
        }
        t.Sowa = e
    } (Puppets = Puppets || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var o, e = (o = t.Puppet, __extends(i, o), i.prototype.animate = function(t) {
            var i = this;
            if (this.parts) return new Promise(function(t, e) {
                new TimelineMax({
                    onComplete: function() {
                        i.startTimeout(),
                            t(i)
                    }
                }).to(i, .5, {
                    y: -500 * i.scale,
                    ease: Power4.easeOut
                }).call(function() {
                    Widgets.Sounds.play("harpFly")
                }).to(i, 3, {
                    y: 0,
                    ease: Sine.easeIn
                }),
                    (new TimelineMax).to(i, .3, {
                        x: 15,
                        ease: Power3.easeOut
                    }).to(i, 1, {
                        x: -15,
                        ease: Sine.easeInOut
                    }).to(i, 1, {
                        x: 15,
                        ease: Sine.easeInOut
                    }).to(i, 1, {
                        x: -15,
                        ease: Sine.easeInOut
                    }).to(i, 1, {
                        x: 0,
                        ease: Sine.easeOut
                    }),
                    (new TimelineMax).to(i.parts.body, .3, {
                        delay: .1,
                        rotation: 5,
                        ease: Sine.easeOut
                    }).to(i.parts.body, 1, {
                        rotation: -5,
                        ease: Sine.easeInOut
                    }).to(i.parts.body, 1, {
                        rotation: 5,
                        ease: Sine.easeInOut
                    }).to(i.parts.body, 1, {
                        rotation: -5,
                        ease: Sine.easeInOut
                    }).to(i.parts.body, 1, {
                        rotation: 0,
                        ease: Sine.easeOut
                    }),
                    (new TimelineMax).to(i.parts.umbrella, .3, {
                        rotation: 5,
                        ease: Sine.easeOut
                    }).to(i.parts.umbrella, 1, {
                        rotation: -5,
                        ease: Sine.easeInOut
                    }).to(i.parts.umbrella, 1, {
                        rotation: 5,
                        ease: Sine.easeInOut
                    }).to(i.parts.umbrella, 1, {
                        rotation: -5,
                        ease: Sine.easeInOut
                    }).to(i.parts.umbrella, 1, {
                        rotation: 0,
                        ease: Sine.easeOut
                    }),
                    (new TimelineMax).to(i.parts.leftMustache, .1, {
                        rotation: -10,
                        y: -4,
                        ease: Expo.easeIn
                    }).to(i.parts.leftMustache, 2, {
                        delay: .2,
                        rotation: 0,
                        y: 0,
                        ease: Back.easeOut.config(1)
                    }),
                    (new TimelineMax).to(i.parts.rightMustache, .1, {
                        rotation: 10,
                        y: -4,
                        ease: Expo.easeIn
                    }).to(i.parts.rightMustache, 2, {
                        delay: .2,
                        rotation: 0,
                        y: 0,
                        ease: Back.easeOut.config(1)
                    })
            })
        },
            i.prototype.onTimeout = function() { (new TimelineMax).to(this.parts.leftMustache, .7, {
                rotation: -10,
                y: -4,
                ease: Expo.easeIn
            }).to(this.parts.leftMustache, .6, {
                rotation: 0,
                y: 0,
                ease: Back.easeOut.config(1)
            }),
                (new TimelineMax).to(this.parts.rightMustache, .7, {
                    rotation: 10,
                    y: -4,
                    ease: Expo.easeIn
                }).to(this.parts.rightMustache, .6, {
                    rotation: 0,
                    y: 0,
                    ease: Back.easeOut.config(1)
                }),
                o.prototype.onTimeout.call(this)
            },
            i);
        function i(t, e, i, s) {
            o.call(this, t, e, i),
                this.position = t,
                this.scale = e,
                this.name = i,
                this.options = s,
                this.originalWidth = 559,
                this.originalHeight = 763,
                this.assetsPath = "/public/theme/images/lalki/maluszkiewicz/";
            this.build({

            })
        }
        t.Maluszkiewicz = e
    } (Puppets = Puppets || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var o, e = (o = t.Puppet, __extends(i, o), i.prototype.render = function(t, e) {
            this.parts.head.useAlternateImage = !!this.isLookingUp || !!this.grabbed,
                o.prototype.render.call(this, t, e)
        },
            i.prototype.animate = function(t) {
                var i = this;
                if (this.parts) return new Promise(function(t, e) {
                    i.isLookingUp = !0,
                        new TimelineMax({
                            onComplete: function() {
                                i.isLookingUp = !1,
                                    i.startTimeout(),
                                    t(i)
                            }
                        }).to(i, .3, {
                            y: -70 * i.scale,
                            ease: Circ.easeOut
                        }).to(i, .5, {
                            y: 0,
                            ease: Power2.easeIn
                        }),
                        (new TimelineMax).to(i.parts.pillowBottom, .5, {
                            y: -50 * i.scale,
                            ease: Sine.easeOut
                        }).to(i.parts.pillowBottom, .4, {
                            y: 0,
                            ease: Power1.easeIn
                        }).call(function() {
                            Widgets.Sounds.play("pillow")
                        }),
                        (new TimelineMax).to(i.parts.pillowTop, .5, {
                            y: -70 * i.scale,
                            ease: Sine.easeOut,
                            delay: .05
                        }).to(i.parts.pillowTop, .4, {
                            y: 0,
                            ease: Power1.easeIn
                        }).call(function() {
                            Widgets.Sounds.play("pillow")
                        }),
                        (new TimelineMax).to(i.parts.apple, .5, {
                            y: -90 * i.scale,
                            ease: Power1.easeOut,
                            delay: .1
                        }).to(i.parts.apple, .4, {
                            y: 0,
                            ease: Power1.easeIn
                        }).call(function() {
                            Widgets.Sounds.play("pillow")
                        })
                })
            },
            i.prototype.onTimeout = function() {
                var t = this;
                this.isLookingUp = !0,
                    setTimeout(function() {
                            t.isLookingUp = !1
                        },
                        1e3),
                    o.prototype.onTimeout.call(this)
            },
            i);
        function i(t, e, i, s) {
            o.call(this, t, e, i),
                this.position = t,
                this.scale = e,
                this.name = i,
                this.options = s,
                this.originalWidth = 387,
                this.originalHeight = 508,
                this.assetsPath = "/public/theme/images/lalki/poduszkowiec/",
                this.isLookingUp = !1,
                this.labelPosition = {
                    x: 30,
                    y: 30
                };
            this.build({

            })
        }
        t.Poduszkowiec = e
    } (Puppets = Puppets || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var o, e = (o = t.Puppet, __extends(i, o), i.prototype.render = function(t, e) {
            this.parts.head.useAlternateImage = !!this.useAltHead || !!this.grabbed,
                o.prototype.render.call(this, t, e)
        },
            i.prototype.animate = function(t) {
                var i = this;
                if (this.parts) return new Promise(function(t, e) {
                    i.useAltHead = !0,
                        new TimelineMax({
                            onComplete: function() {
                                Utils.vibrate(100),
                                    i.useAltHead = !1,
                                    t(i)
                            }
                        }).to(i, .1, {
                            y: 12 * i.scale,
                            ease: Sine.easeOut
                        }).to(i, .5, {
                            y: -100 * i.scale,
                            ease: Expo.easeOut
                        }).to(i, .3, {
                            y: 0,
                            ease: Power2.easeIn
                        }).call(function() {
                                Widgets.Sounds.play("scream")
                            },
                            null, null, .25),
                        (new TimelineMax).to(i.parts.leftLeg, .5, {
                            ease: Expo.easeOut,
                            rotation: 30
                        }).to(i.parts.leftLeg, .3, {
                            delay: .2,
                            ease: Sine.easeOut,
                            rotation: 0
                        }),
                        (new TimelineMax).to(i.parts.rightLeg, .5, {
                            ease: Expo.easeOut,
                            rotation: -30
                        }).to(i.parts.rightLeg, .3, {
                            delay: .2,
                            ease: Sine.easeOut,
                            rotation: 0
                        }),
                        (new TimelineMax).to(i.parts.rightArm, .5, {
                            ease: Expo.easeOut,
                            rotation: -30,
                            delay: .1
                        }).to(i.parts.rightArm, .2, {
                            delay: .2,
                            ease: Sine.easeOut,
                            rotation: 0
                        }),
                        TweenMax.killTweensOf(i.parts.leftArm),
                        (new TimelineMax).to(i.parts.leftArm, .5, {
                            ease: Power3.easeOut,
                            rotation: 50
                        }).call(function() {},
                            null, null, "+=0.2").to(i.parts.leftArm, 1, {
                            ease: Elastic.easeOut.config(2, .9),
                            rotation: 0
                        })
                })
            },

            i);
        function i(t, e, i, s) {
            o.call(this, t, e, i),
                this.position = t,
                this.scale = e,
                this.name = i,
                this.options = s,
                this.originalWidth = 425,
                this.originalHeight = 514,
                this.assetsPath = "/public/theme/images/lalki/tatar/",
                this.labelPosition = {
                    x: 30,
                    y: 40
                },
                this.useAltHead = !1;
            this.build({

            })
        }
        t.Tatar = e
    } (Puppets = Puppets || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var o, e = (o = t.Puppet, __extends(i, o), i.prototype.render = function(t, e) {
            this.parts.body.useAlternateImage = !!this.looksSideways || !!this.grabbed,
                o.prototype.render.call(this, t, e)
        },
            i.prototype.animate = function(t) {
                var i = this;
                if (this.parts) return new Promise(function(t, e) {
                    i.looksSideways = !0,
                        Widgets.Sounds.play("drumroll").then(function() {
                            Utils.vibrate(2e3),
                                i.parts.arms.animateSprite(12).then(function() {
                                    i.startTimeout(),
                                        i.looksSideways = !1,
                                        t(i)
                                })
                        })
                })
            },
            i.prototype.onTimeout = function() {
                var t = this;
                this.looksSideways = !0,
                    setTimeout(function() {
                            t.looksSideways = !1
                        },
                        2e3),
                    o.prototype.onTimeout.call(this)
            },
            i);
        function i(t, e, i, s) {
            o.call(this, t, e, i),
                this.position = t,
                this.scale = e,
                this.name = i,
                this.options = s,
                this.originalWidth = 330,
                this.originalHeight = 703,
                this.assetsPath = "/public/theme/images/lalki/dobosz-duzy/",
                this.labelPosition = {
                    x: 20,
                    y: 0
                },
                this.looksSideways = !1;
            this.build({

            })
        }
        t.DoboszDuzy = e
    } (Puppets = Puppets || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var o, e = (o = t.Puppet, __extends(i, o), i.prototype.render = function(t, e) {
            this.parts.body.useAlternateImage = !!this.looksFront || !!this.grabbed,
                o.prototype.render.call(this, t, e)
        },
            i.prototype.animate = function(t) {
                var i = this;
                if (this.parts) return new Promise(function(t, e) {
                    i.looksFront = !0,
                        Widgets.Sounds.play("angel"),
                        new TimelineMax({
                            onComplete: function() {
                                i.looksFront = !1,
                                    i.startTimeout(),
                                    t(i)
                            }
                        }).to(i, 4.1, {
                            y: -140 * i.scale,
                            ease: Sine.easeOut
                        }).to(i, .2, {
                            y: 0,
                            ease: Sine.easeIn
                        }),
                        (new TimelineMax).to(i.parts.leftArm, .4, {
                            rotation: 25,
                            ease: Sine.easeOut
                        }).to(i.parts.leftArm, .3, {
                            delay: 3.6,
                            rotation: 0,
                            ease: Sine.easeIn
                        }),
                        (new TimelineMax).to(i.parts.sword, .4, {
                            y: -50 * i.scale,
                            ease: Sine.easeOut
                        }).to(i.parts.sword, .3, {
                            delay: 3.6,
                            y: 0,
                            ease: Sine.easeIn
                        }),
                        (new TimelineMax).to(i.parts.leftWing, .3, {
                            delay: 4,
                            rotation: 3,
                            ease: Power2.easeOut
                        }).to(i.parts.leftWing, 1.8, {
                            rotation: 0,
                            ease: Elastic.easeOut.config(2.5, .8)
                        }),
                        (new TimelineMax).to(i.parts.rightWing, .3, {
                            delay: 4,
                            rotation: -3,
                            ease: Power2.easeOut
                        }).to(i.parts.rightWing, 1.8, {
                            rotation: 0,
                            ease: Elastic.easeOut.config(2.5, .8)
                        }),
                        (new TimelineMax).to(i.parts.leftLeg, .4, {
                            rotation: -6,
                            ease: Sine.easeOut
                        }).to(i.parts.leftLeg, .2, {
                            delay: 3.8,
                            rotation: 0,
                            ease: Sine.easeOut
                        }),
                        (new TimelineMax).to(i.parts.rightLeg, .4, {
                            rotation: 6,
                            ease: Sine.easeOut
                        }).to(i.parts.rightLeg, .25, {
                            delay: 3.8,
                            rotation: 0,
                            ease: Sine.easeOut
                        })
                })
            },
            i.prototype.onTimeout = function() {
                var t = this;
                this.looksFront = !0,
                    setTimeout(function() {
                            t.looksFront = !1
                        },
                        2e3),
                    o.prototype.onTimeout.call(this)
            },
            i);
        function i(t, e, i, s) {
            o.call(this, t, e, i),
                this.position = t,
                this.scale = e,
                this.name = i,
                this.options = s,
                this.originalWidth = 392,
                this.originalHeight = 705,
                this.assetsPath = "/public/theme/images/lalki/archaniol/",
                this.labelPosition = {
                    x: 10,
                    y: 40
                },
                this.looksFront = !1;
            this.build({
            })
        }
        t.Archaniol = e
    } (Puppets = Puppets || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var o, e = (o = t.Puppet, __extends(i, o), i.prototype.render = function(t, e) {
            this.parts.head.useAlternateImage = !!this.grabbed || this.altFace,
                o.prototype.render.call(this, t, e)
        },
            i.prototype.animate = function(i) {
                var s = this;
                if (this.parts) return new Promise(function(t, e) { (new TimelineMax).to(s, .2, {
                    y: 20 * s.scale,
                    ease: Sine.easeOut
                }).to(s, .5, {
                    delay: 1,
                    y: 0,
                    ease: Sine.easeOut
                }),
                    (new TimelineMax).to(s.parts.helmet, .2, {
                        y: -20 * s.scale,
                        ease: Sine.easeOut
                    }).to(s.parts.helmet, .4, {
                        delay: .5,
                        y: 0,
                        ease: Back.easeOut.config(4)
                    }),
                    s.altFace = !0,
                    new TimelineMax({
                        repeat: 3,
                        onComplete: function() {
                            s.altFace = !1,
                                t(s)
                        }
                    }).call(function() { (s.parts.hand.useAlternateImage = !0) !== i && (Widgets.Sounds.play("drum", 0, !0), Utils.vibrate(2e3))
                    }).to(s.parts.drum, .1, {
                        x: 7 * s.scale,
                        ease: Expo.easeIn
                    }).call(function() {
                            s.parts.hand.useAlternateImage = !1
                        },
                        null, null, "+=0.05").to(s.parts.drum, .1, {
                        x: 0
                    })
                })
            },
            i.prototype.onTimeout = function() {
                var t = this;
                this.altFace = !0,
                    setTimeout(function() {
                            t.altFace = !1
                        },
                        1e3),
                    o.prototype.onTimeout.call(this)
            },
            i);
        function i(t, e, i, s) {
            o.call(this, t, e, i),
                this.position = t,
                this.scale = e,
                this.name = i,
                this.options = s,
                this.originalWidth = 330,
                this.originalHeight = 703,
                this.assetsPath = "/public/theme/images/lalki/dobosz-maly/",
                this.labelPosition = {
                    x: 20,
                    y: 0
                },
                this.altFace = !1;
            this.build({
            })
        }
        t.DoboszMaly = e
    } (Puppets = Puppets || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var o, e = (o = t.Puppet, __extends(i, o), i.prototype.animate = function(t) {
            var i = this;
            if (this.parts) return new Promise(function(t, e) {
                new TimelineMax({
                    onStart: function() {
                        Widgets.Sounds.play("horse")
                    },
                    onComplete: function() {
                        i.startTimeout(),
                            t(i)
                    }
                }).to(i, .2, {
                    y: 5 * i.scale,
                    x: 15 * i.scale,
                    ease: Sine.easeInOut
                }).to(i, .5, {
                    y: -40 * i.scale,
                    x: -140 * i.scale
                }).to(i, .5, {
                    delay: .3,
                    y: 0,
                    x: 0,
                    ease: Back.easeOut.config(1.5)
                }),
                    (new TimelineMax).to(i.parts.body, .2, {
                        rotation: 3
                    }).to(i.parts.body, .5, {
                        rotation: -25
                    }).to(i.parts.body, .5, {
                        delay: .3,
                        rotation: 0,
                        ease: Back.easeOut.config(1.5)
                    }),
                    (new TimelineMax).to(i.parts.topLeg, .2, {
                        rotation: 10
                    }).to(i.parts.topLeg, .5, {
                        rotation: -30
                    }).to(i.parts.topLeg, .5, {
                        delay: .35,
                        rotation: 0,
                        ease: Back.easeOut.config(1.8)
                    }),
                    (new TimelineMax).to(i.parts.tail, .7, {
                        rotation: 50,
                        ease: Sine.easeInOut
                    }).to(i.parts.tail, .5, {
                        delay: .3,
                        rotation: 0,
                        ease: Back.easeOut.config(1.5)
                    })
            })
        },

            i);
        function i(t, e, i, s) {
            o.call(this, t, e, i),
                this.position = t,
                this.scale = e,
                this.name = i,
                this.options = s,
                this.originalWidth = 534,
                this.originalHeight = 749,
                this.assetsPath = "/public/theme/images/lalki/kon/",
                this.labelPosition = {
                    x: 50,
                    y: -20
                };
            this.build({
                body: {
                    origin: {
                        x: .55,
                        y: .42
                    },
                    imageSrc: "tulow",
                    mass: 100,
                    parts: ["bottomLeg", "topLeg", "tail"],
                    stick: !0
                },
                bottomLeg: {
                    origin: {
                        x: .36,
                        y: .67
                    },
                    imageSrc: "noga_tylna",
                    mass: 75
                },
                topLeg: {
                    origin: {
                        x: .65,
                        y: .47
                    },
                    imageSrc: "noga_przednia",
                    mass: 60,
                    elasticity: 1
                },
                tail: {
                    origin: {
                        x: .3,
                        y: .68
                    },
                    imageSrc: "ogon",
                    mass: 70,
                    elasticity: .3
                }
            })
        }
        t.Kon = e
    } (Puppets = Puppets || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var o, e = (o = t.Puppet, __extends(i, o), i.prototype.animate = function(t) {
            var i = this;
            if (this.parts) return new Promise(function(t, e) {
                Widgets.Sounds.play("persian"),
                    new TimelineMax({
                        onComplete: function() {
                            i.startTimeout(),
                                t(i)
                        }
                    }).to(i, .6, {
                        x: 20 * i.scale,
                        ease: Sine.easeOut
                    }).to(i, .8, {
                        x: -20 * i.scale,
                        ease: Sine.easeOut
                    }).to(i, .8, {
                        x: 20 * i.scale,
                        ease: Sine.easeOut
                    }).to(i, .8, {
                        x: -20 * i.scale,
                        ease: Sine.easeOut
                    }).to(i, .5, {
                        x: 0,
                        ease: Sine.easeOut
                    }),
                    (new TimelineMax).to(i.parts.waist, .6, {
                        ease: Back.easeOut,
                        rotation: 20
                    }).to(i.parts.waist, .8, {
                        ease: Circ.easeOut,
                        rotation: -20
                    }).to(i.parts.waist, .8, {
                        ease: Circ.easeOut,
                        rotation: 20
                    }).to(i.parts.waist, .8, {
                        ease: Circ.easeOut,
                        rotation: -20
                    }).to(i.parts.waist, .5, {
                        ease: Sine.easeOut,
                        rotation: 0
                    }),
                    (new TimelineMax).to(i.parts.body, .6, {
                        ease: Back.easeOut,
                        rotation: -2
                    }).to(i.parts.body, .8, {
                        ease: Circ.easeOut,
                        rotation: 2
                    }).to(i.parts.body, .8, {
                        ease: Circ.easeOut,
                        rotation: -2
                    }).to(i.parts.body, .8, {
                        ease: Circ.easeOut,
                        rotation: 2
                    }).to(i.parts.body, .5, {
                        ease: Sine.easeOut,
                        rotation: 0
                    }),
                    (new TimelineMax).to([i.parts.head, i.parts.neck], .6, {
                        ease: Back.easeOut,
                        rotation: 3,
                        delay: .1
                    }).to([i.parts.head, i.parts.neck], .8, {
                        ease: Circ.easeOut,
                        rotation: -3
                    }).to([i.parts.head, i.parts.neck], .8, {
                        ease: Circ.easeOut,
                        rotation: 3
                    }).to([i.parts.head, i.parts.neck], .8, {
                        ease: Circ.easeOut,
                        rotation: -3
                    }).to([i.parts.head, i.parts.neck], .5, {
                        ease: Sine.easeOut,
                        rotation: 0
                    })
            })
        },

            i);
        function i(t, e, i, s) {
            o.call(this, t, e, i),
                this.position = t,
                this.scale = e,
                this.name = i,
                this.options = s,
                this.originalWidth = 395,
                this.originalHeight = 718,
                this.assetsPath = "/public/theme/images/lalki/ksiezniczka/",
                this.labelPosition = {
                    x: 30,
                    y: 0
                };
            this.build({

            })
        }
        t.Ksiezniczka = e
    } (Puppets = Puppets || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var o, e = (o = t.Puppet, __extends(i, o), i.prototype.animate = function(i) {
            var s = this;
            if (this.parts) return new Promise(function(t, e) {
                new TimelineMax({
                    onComplete: function() {
                        s.startTimeout(),
                            t(s)
                    }
                }).add("start").to(s, .2, {
                    y: 20 * s.scale,
                    ease: Sine.easeIn
                }).add("jump").to(s, .6, {
                    y: -140 * s.scale,
                    ease: Power3.easeOut
                }).add("fall").to(s, .3, {
                    y: 0,
                    ease: Sine.easeOut
                }).add("fire", .5).call(function() { ! 0 !== i && Widgets.Sounds.play("gun"),
                        s.acceleration += 300
                    },
                    null, null, "fire").to(s.parts.rightArm, .2, {
                        ease: Expo.easeOut,
                        delay: .5,
                        x: -15 * s.scale
                    },
                    0).to(s.parts.rightArm, .4, {
                    ease: Sine.easeOut,
                    x: 0
                }).to(s, .2, {
                        ease: Expo.easeOut,
                        x: -30 * s.scale
                    },
                    "fire").to(s, 1.2, {
                        ease: Sine.easeOut,
                        x: 0
                    },
                    "fire+=0.2").to(s.parts.leftThig, .5, {
                        ease: Expo.easeOut,
                        rotation: 30
                    },
                    "jump").to(s.parts.leftThig, .2, {
                        ease: Expo.easeOut,
                        rotation: -30
                    },
                    "fire").to(s.parts.leftThig, .4, {
                        ease: Back.easeOut.config(1.1),
                        delay: .1,
                        rotation: 0
                    },
                    "fire+=0.2").to(s.parts.rightThig, .5, {
                        ease: Expo.easeOut,
                        rotation: -30
                    },
                    "jump").to(s.parts.rightThig, .2, {
                        ease: Expo.easeOut,
                        rotation: -30
                    },
                    "fire").to(s.parts.rightThig, .4, {
                        ease: Back.easeOut.config(1.1),
                        delay: .1,
                        rotation: 0
                    },
                    "fire+=0.2").to(s.parts.rightLeg, .2, {
                        ease: Expo.easeOut,
                        rotation: -30
                    },
                    "fire+=0.05").to(s.parts.rightLeg, .5, {
                        ease: Back.easeOut.config(1.2),
                        rotation: 0
                    },
                    "fire+=0.25").to(s.parts.rightArm, .7, {
                        ease: Expo.easeOut,
                        rotation: -15
                    },
                    "jump").to(s.parts.rightArm, .3, {
                        ease: Back.easeOut.config(1.1),
                        rotation: 0
                    },
                    "jump+=0.7")
            })
        },

            i);
        function i(t, e, i, s) {
            o.call(this, t, e, i),
                this.position = t,
                this.scale = e,
                this.name = i,
                this.options = s,
                this.originalWidth = 431,
                this.originalHeight = 646,
                this.assetsPath = "/public/theme/images/lalki/janosik/";
            this.build({
            })
        }
        t.Janosik = e
    } (Puppets = Puppets || {});
var Puppets;
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var o, e = (o = t.Puppet, __extends(i, o), i.prototype.render = function(t, e) {
            this.parts.head.useAlternateImage = !!this.useAltFace,
                o.prototype.render.call(this, t, e)
        },
            i.prototype.animate = function(t) {
                var i = this;
                if (this.parts) return new Promise(function(t, e) {
                    i.useAltFace = !0,
                        Widgets.Sounds.play("lion"),
                        new TimelineMax({
                            onComplete: function() {
                                i.startTimeout(),
                                    t(i)
                            }
                        }).to(i.parts.head, 1.5, {
                            y: 20 * i.scale
                        }).to(i.parts.head, .5, {
                            y: 0
                        }).call(function() {
                                i.useAltFace = !1
                            },
                            null, null, "-=0.2")
                })
            },

            i);
        function i(t, e, i, s) {
            o.call(this, t, e, i),
                this.position = t,
                this.scale = e,
                this.name = i,
                this.options = s,
                this.originalWidth = 413,
                this.originalHeight = 589,
                this.assetsPath = "/public/theme/images/lalki/lew/",
                this.labelPosition = {
                    x: 40,
                    y: 0
                },
                this.useAltFace = !1;
            this.build({

            })
        }
        t.Lew = e
    } (Puppets = Puppets || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var e; (e = t.ScenePuppetDataIndex || (t.ScenePuppetDataIndex = {}))[e.Name = 0] = "Name",
            e[e.PositionX = 1] = "PositionX",
            e[e.PositionY = 2] = "PositionY",
            e[e.Scale = 3] = "Scale",
            e[e.Perspective = 4] = "Perspective",
            e[e.Label = 5] = "Label";
        var r = t.ScenePuppetDataIndex,
            a = (i.CLICKED = "clicked", i.DRAGGED = "dragged", i);
        function i() {}
        t.StorageLabels = a;
        var s, o = (s = t.Component, __extends(h, s), h.prototype.onState = function() {
            var t = this;
            return ! (!this.settings.home || window.location.pathname !== $(".js-logo a")[0].pathname || (Widgets.Analytics.sendEvent("Home", "reload", ""), this.animateOut(!0).then(function() {
                return t.reset()
            }).then(function() {
                return t.animateIn(0, null, !0)
            }), 0))
        },
            h.prototype.animateIn = function(t, e, i) {
                var s = this;
                TweenMax.staggerTo(this.puppets.slice().shuffle().map(function(t) {
                        return t.shift
                    }), 2, {
                        y: 0,
                        ease: Elastic.easeOut.config(1.05, .8),
                        delay: i ? 0 : .1 + (t || 0) + (this.settings.header ? .6 : .2)
                    },
                    .1,
                    function() {
                        s.tryToShowHint()
                    })
            },
            h.prototype.animateOut = function(a, r) {
                var h = this;
                return new Promise(function(t, e) {
                    if (a || !h.settings.home) {
                        var i = h.puppets.map(function(t) {
                                return t.shift
                            }),
                            s = r ? 0 : h.settings.header ? .4 : .8,
                            o = h.getHiddenPuppetY(),
                            n = r ? 0 : .02;
                        h.animating = !0,
                            TweenMax.staggerTo(i, s, {
                                    y: o,
                                    ease: Power3.easeOut
                                },
                                n,
                                function() {
                                    h.animating = !1,
                                        t(!0)
                                })
                    } else t()
                })
            },
            h.prototype.resize = function(t, e, i) {
                var s = this;
                i = void 0 === i ? Project.breakpoint: i,
                    t = void 0 === t ? $window.width() : t;
                var o = this.view.width(),
                    n = this.view.height(),
                    a = this.pixelRatio * o,
                    r = this.pixelRatio * n,
                    h = this.pixelRatio * (i.desktop && !this.settings.header ? Math.max(Math.min(t / 1280, 1.1), .75) : 1),
                    l = this.settings.header ? this.pixelRatio * (i.desktop ? 1 : .9) : h;
                if (!i.phone && this.settings.camera) {
                    var c = i.desktop ? 300 : 400;
                    a = Math.max(a, this.puppets.length * c * h)
                } else i.phone && (a = this.pixelRatio * o * this.puppets.length);
                this.canvas.width = o * this.pixelRatio,
                    this.canvas.height = n * this.pixelRatio,
                    $(this.canvas).css({
                        width: o,
                        height: n
                    }),
                    this.cache.viewWidth = o,
                    this.cache.viewHeight = n,
                    this.camera.maxShift = this.settings.camera ? a / this.pixelRatio - o: 0,
                    this.puppets.forEach(function(t, e) {
                        t.resize(s.canvas.width, s.canvas.height, a, r, l, e)
                    }),
                    this.disabled = this.settings.breakpoints && this.settings.breakpoints.indexOf(i.value) < 0
            },
            h.prototype.destroy = function() {
                TweenMax.killTweensOf(this.tilt),
                    TweenMax.killTweensOf(this.camera),
                    this.destroyPuppets(),
                    h.instance = null,
                    this.loaded = !1,
                    this.unbind(),
                    s.prototype.destroy.call(this)
            },
            h.prototype.destroyPuppets = function() {
                this.puppets && (this.puppets.forEach(function(t) {
                    t.destroy()
                }), this.puppets = null)
            },
            h.prototype.build = function() {
                var a = this,
                    t = this.getPuppetsSet();
                this.puppets = [],
                t && t.forEach(function(t) {
                    var e = t[r.Name];
                    if (void 0 !== Puppets[e]) {
                        var i = {
                                x: t[r.PositionX],
                                y: t[r.PositionY]
                            },
                            s = t[r.Scale],
                            o = new Puppets[e](i, s, e, {
                                home: a.settings.home
                            }),
                            n = t[r.Label];
                        o.setLabelData(n),
                            o.perspective = t[r.Perspective],
                            o.shift.y = a.getHiddenPuppetY(),
                        a.settings.labels && o.addInfoLabel(),
                            a.puppets.push(o)
                    }
                })
            },
            h.prototype.reset = function() {
                var i = this;
                return new Promise(function(t, e) {
                    i.destroyPuppets(),
                        i.build(),
                        i.resize(),
                        i.preload().then(function() {
                            i.randomPuppet(),
                                i.onCameraUpdate(),
                                i.update(),
                                t()
                        })
                })
            },
            h.prototype.getHiddenPuppetY = function() {
                return this.view.height() * this.pixelRatio * (this.settings.header ? 1.3 : 1)
            },
            h.prototype.getPuppetsSet = function() {
                if (!this.settings.puppets) return null;
                var t;
                if ("string" == typeof this.settings.puppets[0][0]) t = this.settings.puppets;
                else {
                    var e = this.settings.puppets.length,
                        i = 0,
                        s = "undefined" != typeof Storage,
                        o = h.sets;
                    if (s) {
                        var n = Utils.getStorageItem("puppets");
                        n && (o = n.split(",").map(function(t) {
                            return parseInt(t, 10)
                        }))
                    }
                    for (o = o.slice( - (e - 1)); i = Math.floor(Math.random() * this.settings.puppets.length), 1 < e && this.settings.home && o.length < e && 0 <= o.indexOf(i););
                    this.settings.home && (o.push(i), s ? Utils.setStorageItem("puppets", o.join(",")) : h.sets = o),
                        t = this.settings.puppets[i]
                }
                return t
            },
            h.prototype.preload = function() {
                var s = this;
                return this.loaded = !1,
                    new Promise(function(e, t) {
                        var i = [];
                        s.puppets.forEach(function(t) {
                            i.push(t.preload())
                        }),
                            Promise.all(i).then(function(t) {
                                s.loaded = !0,
                                    e()
                            })
                    })
            },
            h.prototype.tryToShowHint = function() {
                var t = this; ! this.settings.hints || Utils.getStorageItem(a.CLICKED) && Utils.getStorageItem(a.DRAGGED) || (this.hintTimeout = setTimeout(function() {
                        return t.showHint()
                    },
                    3e3))
            },
            h.prototype.showHint = function() {
                Utils.getStorageItem(a.CLICKED) ? Utils.getStorageItem(a.DRAGGED) || this.puppets[Math.floor(Math.random() * this.puppets.length)].addHintLabel("pl" === Project.Site.lang ? "przeciÄgnij mnie!": "drag me!") : this.puppets[Math.floor(Math.random() * this.puppets.length)].addHintLabel("pl" === Project.Site.lang ? "kliknij mnie!": "click me!")
            },
            h.prototype.bind = function() {
                var e = this;
                this.view.on("mousedown.scene",
                    function(t) {
                        return e.onMouseDown(t)
                    }).on("mousemove.scene",
                    function(t) {
                        return e.onMouseMove(t)
                    }).on("mouseup.scene",
                    function(t) {
                        return e.onMouseUp(t)
                    }).on("mouseleave.scene",
                    function(t) {
                        return e.onMouseUp(t)
                    }),
                    this.view.on("touchstart.swipe",
                        function(t) {
                            return e.onTouchStart(t)
                        }).on("touchmove.swipe",
                        function(t) {
                            return e.onTouchMove(t)
                        }),
                    $doc.off(".scene").on("touchend.scene",
                        function(t) {
                            return e.onTouchEnd(t)
                        }),
                    window.DeviceOrientationEvent ? window.addEventListener("deviceorientation", this.handleDeviceOrientation, !1) : window.DeviceMotionEvent && window.addEventListener("devicemotion", this.handleDeviceMotion, !1)
            },
            h.prototype.unbind = function() {
                this.view.off(".scene"),
                    $doc.off(".scene"),
                    window.removeEventListener("deviceorientation", this.handleDeviceOrientation),
                    window.removeEventListener("devicemotion", this.handleDeviceMotion)
            },
            h.prototype.handleDeviceOrientation = function(t) {
                h.instance.onTilt(t.beta, t.gamma)
            },
            h.prototype.handleDeviceMotion = function(t) {
                h.instance.onTilt(2 * t.acceleration.x, 2 * t.acceleration.y)
            },
            h.prototype.onTilt = function(t, e) {
                var s = this;
                if (!this.disabled && this.puppets) {
                    var i = Math.min(1, Math.max(0, (this.settings.maxTiltX + e) / (2 * this.settings.maxTiltX))),
                        o = Math.min(1, Math.max(0, (this.settings.maxTiltY + t) / (2 * this.settings.maxTiltY)));
                    TweenMax.to(this.tilt, 1, {
                        x: 1 - 2 * i,
                        y: 1 - 2 * o,
                        onUpdate: function() {
                            if (s.puppets) {
                                var e = 80 * -s.tilt.x,
                                    i = 40 * -s.tilt.y;
                                s.puppets.forEach(function(t) {
                                    t.shift.perspectiveX = e,
                                        t.shift.perspectiveY = i
                                })
                            }
                        },
                        ease: Quint.easeOut
                    })
                }
            },
            h.prototype.onMouseDown = function(t) {
                var e = this;
                if (! (t.which && 3 === t.which || t.button && 2 === t.button)) {
                    t.preventDefault();
                    var i = t.offsetX,
                        s = t.offsetY;
                    this.grabbed = !1,
                        this.dragged = !1;
                    var o = this.hitTestPuppets(i, s);
                    o && (this.mouse.x = this.mouse.startX = i, this.mouse.y = this.mouse.startY = s, this.grabbed = !0, this.grabbedPuppet = o, this.grabbingTimeout = setTimeout(function() {
                            e.grabbedPuppet.grabbed = !0
                        },
                        250))
                }
            },
            h.prototype.onMouseMove = function(t) {
                var e = this;
                t.preventDefault();
                var i = t.offsetX,
                    s = t.offsetY,
                    o = !this.mouse.moveX && !this.mouse.moveY;
                if (o || this.camera.initialized) if (this.mouse.speed = Math.abs(i - this.mouse.moveX) / 100, this.mouse.moveX = i, this.mouse.moveY = s, this.settings.camera && !this.grabbedPuppet && (TweenMax.killTweensOf(this.camera), TweenMax.to(this.camera, o ? .6 : 1.6, {
                    x: i / this.cache.viewWidth * 2 - 1,
                    y: s / this.cache.viewHeight * 2 - 1,
                    onUpdate: function() {
                        return e.onCameraUpdate()
                    },
                    ease: o ? Sine.easeInOut: Quint.easeOut,
                    onComplete: function() {
                        e.camera.initialized = !0
                    }
                })), this.grabbed && this.grabbedPuppet) this.view.addClass("is-grabbed"),
                    this.mouse.x = i,
                    this.mouse.y = s,
                    this.grabbedPuppet.shift.x = .85 * (this.mouse.x - this.mouse.startX),
                    this.grabbedPuppet.shift.y = .5 * (this.mouse.y - this.mouse.startY),
                i !== this.mouse.startX && (this.dragged = !0, this.settings.hints && (Utils.setStorageItem(a.DRAGGED, "true"), this.puppets.forEach(function(t) {
                    t.hideHintLabel()
                })));
                else {
                    var n = this.hitTestPuppets(i, s);
                    this.view.toggleClass("is-hover", !!n),
                        this.puppets.forEach(function(t) {
                            t.hovered && t !== n && (t.rollout(), e.settings.labels && t.hideLabel())
                        }),
                    n && (n.rollover(i, s, this.mouse.speed * (this.settings.camera ? 0 : 1)), this.settings.labels && n.showLabel())
                }
            },
            h.prototype.onMouseUp = function(t) {
                this.view.removeClass("is-hover is-grabbed"),
                this.grabbedPuppet && (!this.dragged && this.grabbed ? this.grabbedPuppet.animating || (this.grabbedPuppet.animating = !0, Widgets.Analytics.sendEvent("Puppet", "animate", this.grabbedPuppet.name), this.settings.hints && (Utils.setStorageItem(a.CLICKED, "true"), this.puppets.forEach(function(t) {
                    t.hideHintLabel()
                }), this.tryToShowHint()), this.grabbedPuppet.hideLabel(), this.grabbedPuppet.animate().then(function(t) {
                    t.animating = !1
                })) : this.dragged && this.grabbedPuppet.resetPosition(), window.clearTimeout(this.grabbingTimeout), this.grabbedPuppet.grabbed = !1, this.grabbedPuppet = null),
                    this.mouse.x = null,
                    this.mouse.y = null,
                    this.mouse.startX = null,
                    this.mouse.startY = null
            },
            h.prototype.onCameraUpdate = function() {
                var e = this;
                if (!Modernizr.touchevents && this.puppets) {
                    var i = -(1 + this.camera.x) / 2 * this.camera.maxShift;
                    this.puppets.forEach(function(t) {
                        t.shift.cameraX = i * e.pixelRatio,
                            t.shift.perspectiveX = 180 * -e.camera.x * t.perspective
                    })
                }
            },
            h.prototype.onTouchStart = function(t) {
                TweenMax.killTweensOf(this.camera),
                    this.swipe.startCameraX = this.camera.x,
                    this.swipe.startX = this.swipe.x = t.originalEvent.touches[0].pageX,
                    this.swipe.startY = this.swipe.y = t.originalEvent.touches[0].pageY,
                    this.swipe.swiping = !0,
                    this.swipe.axe = null
            },
            h.prototype.onTouchMove = function(t) {
                if (this.swipe.swiping) {
                    this.swipe.x = t.originalEvent.touches[0].pageX,
                        this.swipe.y = t.originalEvent.touches[0].pageY;
                    var e = Math.abs(this.swipe.x - this.swipe.startX),
                        i = Math.abs(this.swipe.y - this.swipe.startY); ! this.swipe.axe && (12 < e || 12 < i) && (this.swipe.axe = i < e ? "h": "v"),
                    this.swipe.axe && "h" !== this.swipe.axe || ("h" === this.swipe.axe && t.preventDefault(), this.camera.x = this.swipe.startCameraX + this.swipe.x - this.swipe.startX, this.camera.x = 0 < this.camera.x ? .3 * this.camera.x: this.camera.x, this.camera.x = this.camera.x < -this.camera.maxShift ? this.camera.x + .7 * ( - this.camera.maxShift - this.camera.x) : this.camera.x, this.applyCameraShift())
                }
            },
            h.prototype.onTouchEnd = function(t) {
                var e = this;
                if (this.swipe.swiping) {
                    t.preventDefault(),
                        this.swipe.swiping = !1,
                        this.swipe.axe = null;
                    var i = this.swipe.startX - this.swipe.x,
                        s = .49 * (Math.abs(i) < 20 ? 0 : i < 0 ? 1 : -1);
                    if (Math.abs(i) < 5) {
                        s = 0;
                        var o = this.hitTestPuppets(this.swipe.x, this.swipe.y - this.view.offset().top);
                        o && !o.animating && (o.animating = !0, Widgets.Analytics.sendEvent("Puppet", "animate", o.name), o.animate().then(function(t) {
                            t.animating = !1
                        }))
                    }
                    var n = Project.breakpoint.phone ? Math.floor(this.camera.x / this.cache.viewWidth + .5 + s) * this.cache.viewWidth: this.camera.x;
                    n = Math.max( - this.camera.maxShift, n),
                        n = Math.min(0, n),
                        TweenMax.to(this.camera, .4, {
                            x: n,
                            ease: Quint.easeOut,
                            onUpdate: function() {
                                e.applyCameraShift()
                            }
                        })
                }
            },
            h.prototype.hitTestPuppets = function(i, s) {
                var o = this;
                i *= this.pixelRatio,
                    s *= this.pixelRatio;
                var n = null;
                return Object.keys(this.puppets).forEach(function(t) {
                    var e = o.puppets[t];
                    e.hitTest(i, s) && (n = e)
                }),
                    n
            },
            h.prototype.randomPuppet = function() {
                Project.breakpoint.phone && (this.camera.x = -Math.floor(Math.random() * this.puppets.length) * this.cache.viewWidth, this.applyCameraShift())
            },
            h.prototype.applyCameraShift = function() {
                var e = this; ! this.disabled && this.puppets && this.puppets.forEach(function(t) {
                    t.shift.cameraX = e.camera.x * e.pixelRatio
                })
            },
            h.prototype.update = function() {
                var t = this;
                this.puppets && this.loaded && (this.mouse.lastX = this.mouse.x, this.mouse.lastY = this.mouse.y, this.render(), cancelAnimationFrame(this.rAF), this.rAF = requestAnimationFrame(function() {
                    return t.update()
                }))
            },
            h.prototype.render = function() {
                var i = this;
                if (!this.disabled) {
                    var s = [],
                        o = null;
                    this.canvas.width = this.canvas.width,
                        this.puppets.forEach(function(t, e) {
                            t.grabbed || t.hovered || t.animating ? t.animating ? s.push(t) : t.hovered && !t.grabbed && (o = t) : t.render(i.context)
                        }),
                    s && s.forEach(function(t) {
                        t.render(i.context)
                    }),
                    o && o.render(this.context),
                    this.grabbedPuppet && this.grabbedPuppet.render(this.context)
                }
            },
            h.sets = [], h);
        function h(t, e) {
            var i = this;
            s.call(this, t, e),
                this.view = t,
                this.options = e,
                this.pixelRatio = 1,
                this.grabbedPuppet = null,
                this.mouse = {
                    lastX: null,
                    lastY: null,
                    startX: null,
                    startY: null,
                    x: null,
                    y: null,
                    moveX: null,
                    moveY: null,
                    speed: 0
                },
                this.swipe = {
                    x: 0,
                    y: 0,
                    startX: 0,
                    startY: 0,
                    startCameraX: 0,
                    swiping: !1,
                    axe: null
                },
                this.tilt = {
                    x: 0,
                    y: 0
                },
                this.grabbed = !1,
                this.dragged = !1,
                this.puppets = [],
                this.camera = {
                    x: 0,
                    y: 0,
                    maxShift: 0,
                    initialized: !1
                },
                this.settings = {
                    breakpoints: null,
                    camera: !0,
                    header: !1,
                    hints: !1,
                    home: !1,
                    labels: !1,
                    maxTiltX: 20,
                    maxTiltY: 20,
                    single: !1
                },
                this.cache = {},
                this.disabled = !1,
                this.animating = !1,
                this.loaded = !1,
            "object" == typeof e && $.extend(this.settings, e),
                this.pixelRatio = Project.Site.pixelRatio,
            this.view.find("canvas")[0] || this.view.append("<canvas>"),
                this.canvas = this.view.find("canvas")[0],
                this.context = this.canvas.getContext("2d"),
                this.build(),
                this.preload().then(function() {
                    i.randomPuppet(),
                        i.onCameraUpdate(),
                        i.bind(),
                        i.update()
                }),
                this.view.data("Scene", this),
            this.settings.labels && this.settings.hints,
                (h.instance = this).uid = Utils.generateUID()
        }
        t.Scene = o
    } (Components = Components || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var i, e = (i = t.Component, __extends(s, i), s.prototype.resize = function() {
            this.width = this.view.width(),
                this.update(!0)
        },
            s.prototype.destroy = function() {
                this.unbind(),
                    this.arrowLeft = null,
                    this.arrowRight = null,
                    this.wrapper = null,
                    this.items = null,
                    i.prototype.destroy.call(this)
            },
            s.prototype.go = function(t) {
                if (! (this.amount < 2)) {
                    var e = this.items.eq(this.current).find('[data-comp="Scene"]').data("Scene");
                    e && e.animateOut(!0, !!Project.breakpoint.phone),
                        this.current = Math.max(0, Math.min(this.amount - 1, this.current + t));
                    var i = this.items.eq(this.current).find('[data-comp="Scene"]').data("Scene");
                    i && i.animateIn(Project.breakpoint.phone ? 0 : .6),
                        this.update( !! Project.breakpoint.phone)
                }
            },
            s.prototype.update = function(t) {
                TweenMax.to(this.wrapper, t ? 0 : 1.2, {
                    x: -this.current * this.width,
                    ease: Project.Site.CUSTOM_EASE
                }),
                    this.arrowLeft.toggleClass("is-disabled", 0 === this.current),
                    this.arrowRight.toggleClass("is-disabled", this.current === this.amount - 1),
                    $body.toggleClass("is-view-adults", 0 === this.current && 1 < this.amount)
            },
            s.prototype.bind = function() {
                var e = this;
                this.arrowLeft.off(".scenes").on("click.scenes",
                    function(t) {
                        e.go( - 1)
                    }),
                    this.arrowRight.off(".scenes").on("click.scenes",
                        function(t) {
                            e.go(1)
                        }),
                    $doc.off(".scenes-" + this.uid).on("keyup.scenes-" + this.uid,
                        function(t) {
                            switch (t.keyCode || t.which) {
                                case Utils.keys.right:
                                    e.go(1);
                                    break;
                                case Utils.keys.left:
                                    e.go( - 1)
                            }
                        })
            },
            s.prototype.unbind = function() {
                this.arrowLeft.off(".scenes"),
                    this.arrowRight.off(".scenes"),
                    $doc.off(".scenes-" + this.uid)
            },
            s);
        function s(t, e) {
            i.call(this, t, e),
                this.view = t,
                this.options = e,
                this.settings = {
                    currentIndex: 0
                },
            "object" == typeof e && $.extend(this.settings, e),
                this.arrowLeft = this.view.find(".js-left"),
                this.arrowRight = this.view.find(".js-right"),
                this.wrapper = this.view.find(".js-wrapper"),
                this.items = this.wrapper.children(),
                this.current = this.settings.currentIndex,
                this.amount = this.items.length,
                this.uid = Utils.generateUID(),
                this.bind()
        }
        t.Scenes = e
    } (Components = Components || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var i = (e.START = "start", e.UPDATE = "update", e.END = "end", e);
        function e() {}
        t.SwipeEvents = i;
        var s = (o.HORIZONTAL = "h", o.VERTICAL = "v", o);
        function o() {}
        t.SwipeAxes = s;
        var n = (a.LEFT = "left", a.RIGHT = "right", a.UP = "up", a.DOWN = "down", a.NONE = "none", a.CLICK = "click", a);
        function a() {}
        t.SwipeDirections = n;
        var r, h = (r = Project.Handler, __extends(l, r), l.prototype.destroy = function() {
            r.prototype.destroy.call(this),
                this.unbind()
        },
            l.prototype.toggle = function(t) {
                this.disabled = !t,
                    this.updateCursor()
            },
            l.prototype.updateCursor = function() {
                var t = !Modernizr.touchevents && !!this.settings.disableMouse;
                this.view.toggleClass("grabbable", !this.disabled && !t)
            },
            l.prototype.bind = function() {
                var e = this;
                this.view.off(".swipe"),
                this.settings.disableMouse || this.view.on("mousedown.swipe",
                    function(t) {
                        return e.onMouseDown(t)
                    }).on("mousemove.swipe",
                    function(t) {
                        return e.onMouseMove(t)
                    }).on("mouseup.swipe",
                    function(t) {
                        return e.onMouseUp(t)
                    }).on("mouseleave.swipe",
                    function(t) {
                        return e.onMouseUp(t)
                    }),
                this.settings.disableTouch || (this.view.on("touchstart.swipe",
                    function(t) {
                        return e.onTouchStart(t)
                    }).on("touchmove.swipe",
                    function(t) {
                        return e.onTouchMove(t)
                    }), $doc.off(".swipe" + this.uid).on("touchend.swipe" + this.uid,
                    function(t) {
                        return e.onTouchEnd(t)
                    }))
            },
            l.prototype.unbind = function() {
                this.view.off(".swipe"),
                    $doc.off(".swipe" + this.uid)
            },
            l.prototype.onMouseDown = function(t) {
                t.which && 3 === t.which || t.button && 2 === t.button || (t.preventDefault(), this.mouse.startX = t.clientX || t.pageX, this.mouse.startY = t.clientY || t.pageY, this.startSwipe())
            },
            l.prototype.onMouseMove = function(t) {
                if (t.preventDefault(), this.swiping) {
                    this.mouse.x = t.clientX || t.pageX,
                        this.mouse.y = t.clientY || t.pageY;
                    var e = Math.abs(this.mouse.x - this.mouse.startX),
                        i = Math.abs(this.mouse.y - this.mouse.startY); ! this.axe && (12 < e || 12 < i) && (this.axe = i < e ? s.HORIZONTAL: s.VERTICAL),
                    (12 < e || 12 < i) && (this.dragged = !0),
                    (this.axe === s.HORIZONTAL && this.settings.horizontal || this.axe === s.VERTICAL && this.settings.vertical) && (t.preventDefault(), this.updateSwipe()),
                        this.view.find("a").css({
                            "pointer-events": "none"
                        })
                }
            },
            l.prototype.onMouseUp = function(t) {
                this.swiping && this.dragged && (t.preventDefault(), t.stopPropagation(), this.endSwipe()),
                    this.view.find("a").css({
                        "pointer-events": ""
                    }),
                    this.axe = null,
                    this.swiping = !1
            },
            l.prototype.onTouchStart = function(t) {
                this.mouse.startX = t.originalEvent.touches[0].pageX,
                    this.mouse.startY = t.originalEvent.touches[0].pageY,
                    this.startSwipe()
            },
            l.prototype.onTouchMove = function(t) {
                if (this.swiping) {
                    this.mouse.x = t.originalEvent.touches[0].pageX,
                        this.mouse.y = t.originalEvent.touches[0].pageY;
                    var e = Math.abs(this.mouse.x - this.mouse.startX),
                        i = Math.abs(this.mouse.y - this.mouse.startY); ! this.axe && (12 < e || 12 < i) && (this.axe = i < e ? s.HORIZONTAL: s.VERTICAL),
                    (12 < e || 12 < i) && (this.dragged = !0),
                        this.axe === s.HORIZONTAL && this.settings.horizontal || this.axe === s.VERTICAL && this.settings.vertical ? (t.preventDefault(), this.updateSwipe()) : this.axe && (this.swiping = !1)
                }
            },
            l.prototype.onTouchEnd = function(t) {
                this.swiping && this.dragged && (t.preventDefault(), this.endSwipe()),
                    this.swiping = !1,
                    this.axe = null
            },
            l.prototype.startSwipe = function() {
                this.disabled || (this.swiping = !0, this.dragged = !1, this.startX = 0, this.startY = 0, this.trigger(i.START, {
                    x: this.mouse.startX - this.view.offset().left,
                    y: this.mouse.startY - this.view.offset().top
                }), this.view.addClass("grabbing"))
            },
            l.prototype.updateSwipe = function() {
                var t = this.startX + this.mouse.x - this.mouse.startX,
                    e = this.startY + this.mouse.y - this.mouse.startY;
                this.x = t,
                    this.y = e,
                    this.trigger(i.UPDATE, {
                        deltaX: this.settings.horizontal ? t: 0,
                        deltaY: this.settings.vertical ? e: 0,
                        x: this.mouse.x,
                        y: this.mouse.y
                    }),
                    this.view.addClass("dragging")
            },
            l.prototype.endSwipe = function() {
                this.swiping = !1;
                var t = this.axe === s.HORIZONTAL ? this.x < this.startX ? n.LEFT: n.RIGHT: this.y < this.startY ? n.UP: n.DOWN;
                t = this.axe === s.HORIZONTAL && Math.abs(this.mouse.x - this.mouse.startX) < this.settings.minimum ? n.NONE: t,
                    t = this.axe === s.VERTICAL && Math.abs(this.mouse.y - this.mouse.startY) < this.settings.minimum ? n.NONE: t,
                    t = (t = null === this.axe ? n.NONE: t) !== n.NONE || this.dragged ? t: n.CLICK,
                    this.trigger(i.END, {
                        direction: t,
                        deltaX: this.settings.horizontal ? this.startX + this.mouse.x - this.mouse.startX: 0,
                        deltaY: this.settings.vertical ? this.startY + this.mouse.y - this.mouse.startY: 0
                    }),
                    this.view.removeClass("grabbing dragging")
            },
            l);
        function l(t, e) {
            r.call(this),
                this.view = t,
                this.options = e,
                this.swiping = !1,
                this.deltaX = 0,
                this.deltaY = 0,
                this.x = 0,
                this.y = 0,
                this.startX = 0,
                this.startY = 0,
                this.mouse = {
                    x: 0,
                    y: 0
                },
                this.dragged = !1,
                this.axe = null,
                this.disabled = !1,
                this.settings = {
                    horizontal: !0,
                    vertical: !1,
                    minimum: 40,
                    disableMouse: !1,
                    disableTouch: !1
                },
            "object" == typeof e && $.extend(this.settings, e),
                this.updateCursor(),
                this.uid = Utils.generateUID(),
                this.bind()
        }
        t.Swipe = h
    } (Components = Components || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(o) {
        var i, t = (i = o.Component, __extends(e, i), e.prototype.resize = function(t, e, i, s) {
            t = void 0 === t ? window.innerWidth: t,
                e = void 0 === e ? window.innerHeight: e,
                i = void 0 === i ? Project.breakpoint: i,
                this.breakpoint = i,
                this.windowWidth = t,
            this.wrap.length < 1 || this.amount < 1 || (this.isFullWidth = "boolean" == typeof this.settings.fullWidth ? !!this.settings.fullWidth: -1 < this.settings.fullWidth.indexOf(i.value), this.isCenterMode = "boolean" == typeof this.settings.centerMode ? !!this.settings.centerMode: -1 < this.settings.centerMode.indexOf(i.value), TweenMax.set(this.wrap, {
                clearProps: "x"
            }), this.saveCache(), this.width = this.view.width(), this.maxShift = this.cache.totalWidth - this.width, this.updateCore(), this.alignPosition(!0))
        },
            e.prototype.disable = function() {
                return this.disabled = !0,
                    this.updateCore(),
                    this
            },
            e.prototype.enable = function() {
                return this.disabled = !1,
                    this.updateCore(),
                    this.alignPosition(),
                    this
            },
            e.prototype.destroy = function() {
                this.stopAutoplay(),
                    this.unbind(),
                    TweenMax.killTweensOf(this.current),
                    i.prototype.destroy.call(this)
            },
            e.prototype.animateIn = function() {
                this.updatePosition()
            },
            e.prototype.setFreeMode = function(t) {
                return this.freeMode = !!t,
                    this
            },
            e.prototype.goTo = function(t, e, i, s) {
                var o = "number" == typeof t ? t: t.index(),
                    n = ("number" == typeof i ? i: this.isCenterMode ? .5 : 0) * this.width;
                this.targetX = -this.cache.items[Math.min(Math.max(0, o), this.amount - 1)].center + n,
                    this.alignPosition(e)
            },
            e.prototype.bind = function() {
                var i = this;
                this.arrowPrev.off(".slider").on("click.slider",
                    function(t) {
                        t.preventDefault(),
                            t.stopPropagation(),
                            i.disableAutoplay(),
                            i.go( - 1)
                    }),
                    this.arrowNext.off(".slider").on("click.slider",
                        function(t) {
                            t.preventDefault(),
                                t.stopPropagation(),
                                i.disableAutoplay(),
                                i.go(1)
                        }),
                    this.swipe.on(o.SwipeEvents.START,
                        function(t) {
                            return i.onSwipeStart(t)
                        }),
                    this.swipe.on(o.SwipeEvents.UPDATE,
                        function(t) {
                            return i.onSwipeUpdate(t)
                        }),
                    this.swipe.on(o.SwipeEvents.END,
                        function(t) {
                            return i.onSwipeEnd(t)
                        }),
                    this.items.imagesLoaded().progress(function(t, e) {
                        return i.saveCache()
                    }).done(function() {
                        return i.updatePosition()
                    }),
                    this.bullets.off(".slider").on("click.slider",
                        function(t) {
                            i.disableAutoplay(),
                                i.goTo($(t.currentTarget).index())
                        }),
                this.settings.clickSiblings && this.items.off("click.slider").on("click.slider",
                    function(t) {
                        var e = $(t.currentTarget);
                        e.hasClass("is-current") || i.disabled || (t.preventDefault(), t.stopPropagation(), i.disableAutoplay(), i.goTo(e))
                    }),
                this.settings.keyBindings && $doc.off(".slider-" + this.uid).on("keyup.slider-" + this.uid,
                    function(t) {
                        if (i.isInView() && !i.freeMode) switch (t.keyCode || t.which) {
                            case Utils.keys.right:
                                i.disableAutoplay(),
                                    i.go(1);
                                break;
                            case Utils.keys.left:
                                i.disableAutoplay(),
                                    i.go( - 1)
                        }
                    }),
                    this.settings.mousewheel
            },
            e.prototype.unbind = function() {
                this.arrowPrev.off(".slider"),
                    this.arrowNext.off(".slider"),
                    this.bullets.off(".slider"),
                this.swipe && this.swipe.destroy(),
                    $doc.off(".slider-" + this.uid)
            },
            e.prototype.saveCache = function() {
                var r = this,
                    n = [],
                    a = 0;
                this.items.each(function(t, e) {
                    var i = $(e),
                        s = i.width(),
                        o = i.position().left;
                    n.push({
                        element: i,
                        width: s,
                        left: o,
                        center: o + .5 * s,
                        right: o + s,
                        index: t
                    }),
                        a += i.hasClass("is-cloned") ? 0 : s
                });
                var h = [],
                    l = this.settings.parallax && this.settings.showSiblings ? 120 : -20;
                this.children && this.children.each(function(t, e) {
                    var i = $(e),
                        s = i.outerWidth();
                    if (h.push((0 !== s ? .5 * (r.width - s) : 0) + l), r.settings.valignImages) {
                        var o = parseInt(i.css("maxHeight"), 10),
                            n = i.height(),
                            a = 0 < n ? .5 * (o - n) : "";
                        i.css({
                            marginTop: a
                        })
                    }
                }),
                    this.cache.items = n,
                    this.cache.childrenWidths = h,
                    this.cache.totalWidth = this.wrap.width(),
                    this.cache.loopWidth = a
            },
            e.prototype.isInView = function() {
                var t = window.scrollY ? window.scrollY: $window.scrollTop(),
                    e = window.innerHeight,
                    i = this.view.offset().top,
                    s = i + this.view.outerHeight();
                return i < t + e && t < s
            },
            e.prototype.go = function(t, e) {
                this.breakpoint.phone ? this.goTo(this.current.index + t) : (this.targetX = this.current.x + .5 * -this.windowWidth * t, this.alignPosition())
            },
            e.prototype.goToCurrentLocation = function() {
                var t = window.location.pathname + window.location.search,
                    e = this.items.filter('[data-slider-path="' + t + '"]');
                0 < (e = (e = e.length < 1 ? this.items.find('a[href="' + t + '"]').parent() : e).length < 1 ? this.items.eq(0) : e).length && this.goTo(e, !0)
            },
            e.prototype.alignPosition = function(i, s) {
                var o = this;
                this.animating = !0,
                    TweenMax.killTweensOf(this.current, {
                        x: !0
                    }),
                    this.current.x += this.shiftX,
                    this.targetX = null === this.targetX ? null: this.targetX + this.shiftX,
                    this.shiftX = 0;
                var n = null === this.targetX ? this.current.x: this.targetX,
                    t = this.isCenterMode ? .5 * this.width: 0;
                if (this.settings.snap || this.breakpoint.phone) {
                    var e = this.getSnapItemData(n);
                    e && (n = this.isCenterMode ? -e.center + t: -e.left)
                }
                return this.infinite || this.freeMode || (n = Math.min(n, 0), n = Math.max(n, -this.cache.totalWidth + this.width)),
                    Math.abs(this.current.x - n),
                    window.innerWidth,
                    new Promise(function(t, e) {
                        TweenMax.to(o.current, i ? 0 : s ? 1.2 : .8, {
                            x: n,
                            ease: Project.breakpoint.desktop ? Project.Site.CUSTOM_EASE: Quint.easeOut,
                            onUpdate: function() {
                                return o.updatePosition()
                            },
                            onComplete: function() {
                                o.animating = !1,
                                    o.targetX = null,
                                    o.stopVideos(),
                                    t()
                            }
                        })
                    })
            },
            e.prototype.getSnapItemData = function(t) {
                for (var e = this.cache.items[0], i = (this.isCenterMode ? .5 * this.width: .25 * this.width) - t, s = 0; s < this.cache.items.length; ++s) {
                    var o = this.cache.items[s].left,
                        n = this.cache.items[s].right,
                        a = o <= i && i < n,
                        r = s >= this.cache.items.length - 1; (a || r && n <= i) && (e = this.cache.items[s])
                }
                return e
            },
            e.prototype.updatePosition = function() {
                var o = this,
                    t = this.current.x;
                if (this.infinite) t = (t = 0 <= t ? t - this.cache.loopWidth: t) < -this.cache.totalWidth + this.width ? t + this.cache.loopWidth: t;
                else if (this.swipe.swiping || !this.freeMode && !this.animating) {
                    var e = this.swipe.swiping ? .25 : .6,
                        i = this.settings.bounce ? (t + this.cache.totalWidth - (Project.breakpoint.phone ? this.cache.items[this.cache.items.length - 1].width: this.width)) * e: 0,
                        s = this.settings.bounce ? t * e: 0;
                    t = 0 < (t = t < -this.cache.totalWidth + this.width ? -this.cache.totalWidth + this.width + i: t) ? 0 + s: t
                }
                this.current.x = t,
                    TweenMax.killTweensOf(this.wrap),
                    TweenMax.set(this.wrap, {
                        x: this.current.x + this.shiftX
                    });
                var n = this.getCurrentIndex(),
                    a = n % this.amount;
                if (this.numberEl.text(1 + a + " / " + this.amount), this.items.add(this.bullets).removeClass("is-current"), this.items.eq(a).add(this.items.eq(a + this.amount)).add(this.bullets.eq(n)).addClass("is-current"), this.current.index = n, this.children) if (this.settings.parallax && 1 < this.cache.childrenWidths.length) {
                    var r = this.isCenterMode ? .5 * this.width: 0;
                    this.cache.items.forEach(function(t, e) {
                        var i = -((o.current.x + o.shiftX + r + t.center - o.width) / o.width) * 2 * 100,
                            s = o.children.eq(e);
                        TweenMax.set(s, {
                            x: o.disabled ? 0 : i,
                            transition: "none"
                        })
                    })
                } else 0 < this.children.length && TweenMax.set(this.children, {
                    x: 0
                });
                this.updateIndicator(),
                    this.updateArrows(n),
                this.initialized && this.update()
            },
            e.prototype.updateArrows = function(t) {
                t = void 0 === t ? this.getCurrentIndex() : t,
                    this.arrowPrev.toggleClass("is-disabled", !!this.disabled || !this.infinite && (t && t <= 0 || -20 <= this.current.x)),
                    this.arrowNext.toggleClass("is-disabled", !!this.disabled || !this.infinite && (t >= this.amount - 1 || this.current.x <= -(this.cache.totalWidth - this.width - 20)))
            },
            e.prototype.updateIndicator = function() {
                var t = -this.current.x / this.maxShift;
                this.indicator.css({
                    width: 15 + 85 * t + "%"
                })
            },
            e.prototype.update = function() {},
            e.prototype.stopVideos = function() {
                this.items.not(this.items.eq(this.getCurrentIndex())).find('[data-comp="VimeoCustom"], [data-comp="Video"], [data-comp="Youtube"], [data-comp="Audio"]').each(function(t, e) {
                    var i = $(e).data("Player");
                    i && i.pause()
                })
            },
            e.prototype.getCurrentIndex = function() {
                var t;
                return t = this.isFullWidth ? (t = Math.floor( - (this.current.x + this.shiftX) / this.width + .5), this.infinite ? t: Math.min(this.amount - 1, t)) : this.getSnapItemData(this.current.x + this.shiftX).index
            },
            e.prototype.onSwipeStart = function(t) {
                this.disabled || (TweenMax.killTweensOf(this.current), this.current.startX = this.current.x, this.disableAutoplay())
            },
            e.prototype.onSwipeUpdate = function(t) {
                this.disabled || (this.current.x = this.current.startX + t.deltaX, this.updatePosition())
            },
            e.prototype.onSwipeEnd = function(t) {
                if (!this.disabled) {
                    var e = {
                            left: -1,
                            right: 1,
                            none: 0
                        } [t.direction],
                        i = this.width;
                    if (Math.abs(t.deltaX) < .66 * i) {
                        var s = this.current.x;
                        this.targetX = s + e * i * .45
                    }
                    t.direction !== o.SwipeDirections.CLICK && this.alignPosition()
                }
            },
            e.prototype.onMouseWheel = function(t) {
                this.animating || 0 === t.deltaX || (this.disableAutoplay(), this.go(0 < t.deltaX ? 1 : -1))
            },
            e.prototype.updateAutoplay = function() {
                var t = !1;
                null !== this.settings.autoplay && ("object" == typeof this.settings.autoplay ? -1 < this.settings.autoplay.indexOf(Project.breakpoint.value) && (t = !0) : !0 === this.settings.autoplay && (t = !0)),
                    !t || this.autoplayTimeout || this.autoplayDisabled ? !t && this.autoplayTimeout && this.stopAutoplay() : this.startAutoplay()
            },
            e.prototype.startAutoplay = function() {
                var t = this;
                window.clearTimeout(this.autoplayTimeout),
                    this.autoplayTimeout = setTimeout(function() {
                            return t.autoplayLoop()
                        },
                        this.settings.autoplayTime)
            },
            e.prototype.stopAutoplay = function() {
                window.clearTimeout(this.autoplayTimeout),
                    this.autoplayTimeout = null
            },
            e.prototype.disableAutoplay = function() {
                this.autoplayDisabled = !0,
                    this.stopAutoplay()
            },
            e.prototype.autoplayLoop = function() {
                this.go(1, !0),
                    this.startAutoplay()
            },
            e.prototype.updateCore = function() {
                var t = this.disabled || this.cache.totalWidth <= this.width || this.settings.breakpoints.indexOf(Project.breakpoint.value) < 0;
                this.swipe.toggle(!t),
                    this.view.toggleClass("is-disabled", t),
                    this.updateAutoplay()
            },
            e);
        function e(t, e) {
            i.call(this, t),
                this.view = t,
                this.options = e,
                this.settings = {
                    valignImages: !0,
                    showSiblings: !1,
                    parallax: !1,
                    fullWidth: !1,
                    centerMode: ["phone"],
                    item: ".js-slider-item",
                    child: ".js-slider-child",
                    wrap: ".js-slider-wrap",
                    prev: ".js-slider-prev",
                    next: ".js-slider-next",
                    number: ".js-slider-number",
                    bullet: ".js-slider-bullet",
                    indicator: ".js-slider-indicator",
                    disableMouse: !1,
                    disableTouch: !1,
                    mousewheel: !0,
                    snap: !1,
                    loop: !1,
                    keyBindings: !0,
                    clickSiblings: !1,
                    scaleImages: !1,
                    bounce: !0,
                    autoplay: !1,
                    autoplayTime: 5e3,
                    breakpoints: ["phone", "tablet", "desktop"]
                },
                this.disabled = !1,
                this.freeMode = !1,
                this.initialized = !1,
                this.animating = !1,
                this.current = {
                    x: 0,
                    startX: 0,
                    index: 0
                },
                this.targetX = 0,
                this.shiftX = 0,
                this.pixelRatio = 1,
                this.infinite = !1,
                this.cache = {},
                this.autoplayDisabled = !1,
            "object" == typeof e && $.extend(this.settings, e),
                this.arrowPrev = this.view.find(this.settings.prev),
                this.arrowNext = this.view.find(this.settings.next),
                this.numberEl = this.view.find(this.settings.number),
                this.wrap = this.view.find(this.settings.wrap),
                this.items = this.view.find(this.settings.item),
                this.bullets = this.view.find(this.settings.bullet),
                this.indicator = this.view.find(this.settings.indicator),
                this.amount = this.items.length,
                this.pixelRatio = Project.Site.pixelRatio,
            this.wrap.length < 1 || this.amount < 1 || (this.uid = Utils.generateUID(), this.swipe = new o.Swipe(this.wrap, {
                disableMouse: this.settings.disableMouse,
                disableTouch: this.settings.disableTouch
            }), 2 < this.amount && this.settings.loop && (this.infinite = !0, this.wrap.append(this.items.slice(0, 3).clone(!0).addClass("is-cloned")), this.items = this.view.find(this.settings.item)), this.amount < 2 && (this.arrowNext.remove(), this.arrowPrev.remove(), this.numberEl.remove(), this.bullets.remove()), this.updateAutoplay(), this.bind(), this.initialized = !0, this.view.data("Slider", this), this.view.data("component", this))
        }
        o.Slider = t
    } (Components = Components || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(o) {
        var i, t = (i = o.Component, __extends(e, i), e.prototype.onState = function() {
            return this.toggleItem()
        },
            e.prototype.animateIn = function() {
                var t = this;
                setTimeout(function() {
                        return t.toggleItem()
                    },
                    1)
            },
            e.prototype.resize = function(t, e, i, s) {
                this.slider && this.slider.resize(t, e, i, s),
                this.iscroll && (i.desktop ? this.iscroll.enable() : this.iscroll.disable())
            },
            e.prototype.destroy = function() {
                i.prototype.destroy.call(this),
                    this.slider.destroy(),
                    this.slider = null,
                this.iscroll && this.iscroll.destroy(),
                    this.iscroll = null,
                    this.sidePanel = null,
                    this.items = null,
                    this.topItems = null,
                    this.bottomItems = null,
                    this.textItems = null,
                    this.texts = null,
                    this.yearLabel = null,
                    this.button = null,
                    this.currentText = null,
                    this.currentItem = null,
                    $body.removeClass("has-history-panel")
            },
            e.prototype.show = function(t) {
                this.view.addClass("active"),
                    TweenMax.killChildTweensOf(this.view),
                    TweenMax.staggerTo(this.topItems.show().toArray(), t ? 0 : 1.8, {
                            y: 0,
                            opacity: 1,
                            transition: "none",
                            clearProps: "y,transition",
                            ease: Elastic.easeOut.config(1.01, .7),
                            delay: t ? 0 : .1
                        },
                        t ? 0 : .05),
                    TweenMax.staggerFromTo(this.topItems.toArray(), t ? 0 : 4.8, {
                            delay: .3,
                            rotation: -5,
                            transformOrigin: "0 -500px"
                        },
                        {
                            rotation: 0,
                            ease: Elastic.easeOut.config(1.1, .5)
                        },
                        t ? 0 : .05),
                    TweenMax.staggerTo(this.bottomItems.toArray().shuffle(), t ? 0 : 1.8, {
                            y: 0,
                            transition: "none",
                            clearProps: "y,transition",
                            opacity: 1,
                            ease: Elastic.easeOut.config(1.01, 1.2),
                            delay: t ? 0 : .1
                        },
                        t ? 0 : .05),
                    TweenMax.staggerTo(this.textItems, t ? 0 : 1.8, {
                            y: 0,
                            opacity: 1,
                            ease: Elastic.easeOut.config(1.01, 1.2),
                            delay: t ? 0 : .1
                        },
                        t ? 0 : .05),
                    TweenMax.to(this.yearLabel, t ? 0 : .7, {
                        opacity: 1,
                        ease: Sine.easeOut
                    }),
                    this.slider.resize()
            },
            e.prototype.hide = function(i) {
                var s = this;
                return new Promise(function(t, e) {
                    s.hidePanel(),
                        o.Player.pauseAllIn(s.view),
                        TweenMax.killTweensOf(s.topItems),
                        TweenMax.killTweensOf(s.bottomItems),
                        TweenMax.killTweensOf(s.textItems),
                        TweenMax.killTweensOf(s.yearLabel),
                        new TimelineMax({
                            onComplete: function() {
                                i || (s.view.removeClass("active"), t())
                            }
                        }).staggerTo(s.topItems, i ? 0 : .7, {
                                y: .9 * -window.innerHeight,
                                opacity: 1,
                                ease: Elastic.easeIn.config(1.1, .9)
                            },
                            i ? 0 : .05, 0).staggerTo(s.bottomItems, i ? 0 : .5, {
                                y: .8 * window.innerHeight,
                                opacity: 1,
                                ease: Elastic.easeIn.config(1.1, .99)
                            },
                            i ? 0 : .05, 0).staggerTo(s.textItems.toArray().reverse(), i ? 0 : .3, {
                                y: 50,
                                opacity: 0,
                                ease: Sine.easeOut
                            },
                            i ? 0 : .03, 0).to(s.yearLabel, i ? 0 : .3, {
                                opacity: 0
                            },
                            0),
                    i && (s.view.removeClass("active"), t())
                })
            },
            e.prototype.bind = function() {
                var e = this;
                this.button.off().on("click.section",
                    function(t) {
                        t.preventDefault(),
                            t.stopPropagation(),
                            Project.PushStates.changePath($(t.currentTarget).data("url"), !0),
                            e.hidePanel()
                    }),
                    this.view.find(".js-step-next").on("click.section",
                        function(t) {
                            t.preventDefault(),
                                t.stopPropagation(),
                                e.nextItem()
                        }),
                    this.view.find(".js-step-prev").on("click.section",
                        function(t) {
                            t.preventDefault(),
                                t.stopPropagation(),
                                e.prevItem()
                        }),
                    this.view.find(".js-history-link").on("click.section",
                        function(t) {
                            t.preventDefault(),
                                t.stopPropagation(),
                                e.isPanelOpen ? Project.PushStates.goTo($(t.currentTarget).attr("href")) : Project.PushStates.goTo($(t.currentTarget).closest("[data-slider-path]").data("slider-path"))
                        })
            },
            e.prototype.toggleItem = function(t) {
                var e = this,
                    i = window.location.pathname + window.location.search,
                    s = this.texts.filter('[data-text-path="' + i + '"]'),
                    o = this.items.filter('[data-slider-path="' + i + '"]');
                return s[0] && ((this.currentItem = o).addClass("is-chosen").removeClass("is-hidden").siblings().removeClass("is-chosen").addClass("is-hidden"), this.slider.disable().setFreeMode(!0).goTo(o, !1, Project.breakpoint.desktop ? .25 : .5, !0), this.hideText().then(function() {
                    return e.showPanel()
                }).then(function() {
                    return e.showText(s)
                })),
                0 < s.length
            },
            e.prototype.nextItem = function() {
                var t = this.currentItem.next("[data-slider-path]");
                t[0] && Project.PushStates.goTo(t.data("slider-path"), !0)
            },
            e.prototype.prevItem = function() {
                var t = this.currentItem.prev("[data-slider-path]");
                t[0] && Project.PushStates.goTo(t.data("slider-path"), !0)
            },
            e.prototype.hideText = function(s) {
                var o = this;
                return new Promise(function(t, e) {
                    if (o.currentText && o.currentText.children()[0]) {
                        var i = !o.isPanelOpen || s ? 0 : .3;
                        TweenMax.staggerFromTo(o.currentText.children(), i, {
                                y: 0,
                                opacity: 1
                            },
                            {
                                y: -40,
                                opacity: 0,
                                ease: Sine.easeIn
                            },
                            .05,
                            function() {
                                o.currentText.hide(),
                                    t()
                            })
                    } else t()
                })
            },
            e.prototype.showText = function(t) {
                t.show(),
                    this.iscroll.refresh(),
                    TweenMax.staggerFromTo(t.children(), .6, {
                            y: 40,
                            opacity: 0
                        },
                        {
                            y: 0,
                            opacity: 1,
                            ease: Sine.easeOut
                        },
                        .1),
                    this.currentText = t
            },
            e.prototype.showPanel = function() {
                var i = this;
                return new Promise(function(t, e) {
                    i.isPanelOpen ? t() : (i.view.addClass("is-panel-opened"), i.view.closest('[data-comp="Tabs"]').addClass("has-panel-opened"), $body.addClass("has-history-panel"), i.sidePanel.show(), i.button.focus(), TweenMax.to(i.sidePanel, .4, {
                        x: "0%",
                        ease: Power1.easeIn,
                        onComplete: function() {
                            i.isPanelOpen = !0,
                                i.button.addClass("is-enabled"),
                                t()
                        }
                    }))
                })
            },
            e.prototype.hidePanel = function() {
                var i = this;
                return new Promise(function(t, e) {
                    i.isPanelOpen ? (i.isPanelOpen = !1, i.button.removeClass("is-enabled"), i.slider.setFreeMode(!1), i.slider.enable(), i.items.removeClass("is-chosen is-hidden"), i.view.removeClass("is-panel-opened"), i.view.closest('[data-comp="Tabs"]').removeClass("has-panel-opened"), $body.removeClass("has-history-panel"), TweenMax.to(i.sidePanel, .4, {
                        x: Project.breakpoint.desktop ? "100%": "0%",
                        ease: Expo.easeIn,
                        clearProps: "x",
                        onComplete: function() {
                            i.sidePanel.hide(),
                                t()
                        }
                    })) : t()
                })
            },
            e);
        function e(t, e) {
            i.call(this, t, e),
                this.view = t,
                this.options = e,
                this.isPanelOpen = !1,
                this.topItems = this.view.find(".js-section-top-item"),
                this.bottomItems = this.view.find(".js-section-bottom-item"),
                this.textItems = this.view.find(".js-section-text-item"),
                this.items = this.topItems.add(this.bottomItems),
                this.sidePanel = this.view.find(".js-sidePanel"),
                this.texts = this.view.find("[data-text-path]"),
                this.yearLabel = this.view.find(".js-year-title"),
                this.button = this.view.find(".js-panel-toggle"),
            this.sidePanel[0] && (this.iscroll = new IScroll(this.sidePanel[0], {
                mouseWheel: !0,
                scrollbars: "custom",
                disableMouse: !0,
                fadeScrollbars: !0,
                resizeScrollbars: !0,
                shrinkScrollbars: "clip"
            })),
                this.slider = new o.Slider(this.view, {
                    disableMouse: !0,
                    fullWidth: ["phone"]
                }),
                this.bind(),
                this.hide(!0),
                this.view.data("Section", this)
        }
        o.Section = t
    } (Components = Components || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var i, e = (i = t.Component, __extends(s, i), s.prototype.destroy = function() {
            this.sections = null
        },
            s.prototype.animateIn = function() {
                this.toggleSection(!1, !Project.breakpoint.phone),
                    Project.PushStates.updateLinks()
            },
            s.prototype.onState = function() {
                return this.toggleSection(!1, !1)
            },
            s.prototype.toggleSection = function(t, e) {
                var i = this.getSectionByPathname();
                return ! i && e && (i = this.getSectionByPathname(null, !0)),
                !i && e && (i = this.sections[0], Project.PushStates.changePath(i.path)),
                !!i && (i.section === this.currentSection || (this.currentSection ? this.currentSection.hide(t).then(function() {
                    i.section.show(t)
                }) : i.section.show(t), this.currentSection = i.section), !0)
            },
            s.prototype.getSectionByPathname = function(t, e) {
                var i = t && void 0 !== t ? t: window.location.pathname + (e ? "": window.location.search),
                    s = null;
                return this.sections.forEach(function(t) {
                    t.path === i && (s = t)
                }),
                    s
            },
            s.prototype.storeSections = function() {
                var s = [];
                $.each(this.view.find(".js-section"),
                    function(t, e) {
                        var i = $(e);
                        s.push({
                            $el: i,
                            path: i.data("section-path"),
                            section: i.data("Section")
                        })
                    }),
                    this.sections = s
            },
            s);
        function s(t, e) {
            i.call(this, t, e),
                this.view = t,
                this.options = e,
                this.storeSections()
        }
        t.Tabs = e
    } (Components = Components || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var s, e = (s = t.Component, __extends(o, s), o.pauseAll = function(e) {
            o.instances.forEach(function(t) {
                e !== t.uid && t.pause()
            })
        },
            o.pauseAllIn = function(e) {
                o.instances.forEach(function(t) {
                    t.view.closest(e)[0] && t.pause()
                })
            },
            o.prototype.play = function() {},
            o.prototype.pause = function() {},
            o.prototype.toggle = function(t) {},
            o.prototype.seek = function(t) {},
            o.prototype.toggleMute = function() {},
            o.prototype.setVolume = function(t) {
                this.updateVolume()
            },
            o.prototype.createYoutubePlayer = function() {},
            o.prototype.createVimeoPlayer = function() {},
            o.prototype.turnOff = function() { ! this.isPaused() && this.settings.isBgPlayer ? (this.wasPlaying = !0, this.pause()) : this.wasPlaying = !1
            },
            o.prototype.turnOn = function() {
                this.wasPlaying && this.play()
            },
            o.prototype.animateIn = function() {
                s.prototype.animateIn.call(this)
            },
            o.prototype.destroy = function() {
                TweenMax.killTweensOf(this.view),
                    o.instances.splice(o.instances.indexOf(this), 1),
                    this.unbind(),
                    this.unload(),
                    this.view.data("Player", null),
                    s.prototype.destroy.call(this)
            },
            o.prototype.resize = function() {
                if (this.settings.ratio && (this.view.css("padding-top", 100 / this.settings.ratio + "%"), this.view.addClass("is-proportional")), this.settings.fit) {
                    var t = this.view.parent(),
                        e = parseInt(t.css("maxWidth"), 10),
                        i = parseInt(t.css("maxHeight"), 10),
                        s = e / i,
                        o = this.settings.ratio || this.settings.width / this.settings.height,
                        n = s < o ? e: i * o;
                    t.css("width", "100%" !== t.css("maxWidth") ? n: "100%")
                }
            },
            o.prototype.isPaused = function() {
                return ! 0
            },
            o.prototype.unload = function() {},
            o.prototype.setup = function() {},
            o.prototype.bindPlayer = function() {},
            o.prototype.unbindPlayer = function() {},
            o.prototype.updateVolume = function(t) {},
            o.prototype.toggleFullscreen = function() {
                screenfull.enabled && screenfull.toggle(this.view[0])
            },
            o.prototype.buildUI = function() {
                var t = $("#tmpl-media");
                if (t[0]) {
                    var e = Twig.twig({
                        data: t.text()
                    }).render({
                        isMobile: !!Project.browser.mobile,
                        isAudio: this.settings.isAudio || !1,
                        isNative: this.settings.isNative || !1
                    });
                    this.view.append(e),
                        this.controls.poster = this.view.find(".poster"),
                        this.controls.title = this.view.find(".title"),
                        this.controls.playerBar = this.view.find(".player-bar"),
                        this.controls.toggleBtn = this.view.find(".playpause"),
                        this.controls.playBtn = this.view.find(".toggle-play"),
                        this.controls.fullBtn = this.view.find(".full"),
                        this.controls.volume = this.view.find(".volume"),
                        this.controls.scrubber = this.view.find(".scrubber"),
                        this.controls.duration = this.view.find(".duration"),
                        this.controls.time = this.view.find(".played"),
                        this.controls.loaded = this.view.find(".loaded"),
                        this.controls.progress = this.view.find(".progress"),
                    this.settings.poster && this.controls.poster.css("background-image", "url(" + this.settings.poster + ")"),
                    this.settings.autoplay && this.view.addClass("has-autoplay"),
                        this.view.addClass("has-controls")
                }
            },
            o.prototype.bind = function() {
                var t = this;
                $("[data-play]").off(".player").on("click.player",
                    function(t) {
                        t.preventDefault(),
                            t.stopPropagation(),
                            $("#" + $(t.currentTarget).data("play")).data("Player").toggle()
                    }),
                    this.controls.playerBar.on("mouseenter",
                        function() {
                            t.isHover = !0
                        }).on("mouseleave",
                        function() {
                            t.isHover = !1
                        })
            },
            o.prototype.unbind = function() {
                this.controls.toggleBtn && (this.controls.toggleBtn.off(), this.controls.playBtn.off(), this.controls.scrubber.off(), this.controls.fullBtn.off(), this.controls.volume.off()),
                    this.unbindPlayer()
            },
            o.prototype.onDurationChange = function(t) {},
            o.prototype.onProgress = function(t) {},
            o.prototype.onTimeupdate = function(t) {},
            o.prototype.onCanplay = function() {
                this.view.addClass("is-canplay")
            },
            o.prototype.onPlay = function() { ! this.view.hasClass("is-started") && this.settings.googleAnalytics && Widgets.Analytics.sendEvent(this.settings.googleAnalytics[0], this.settings.autoplay ? "autoplay": "play", this.settings.googleAnalytics[1]),
                this.view.addClass("is-started"),
                o.pauseAll(this.uid)
            },
            o.prototype.onPlaying = function() {
                this.view.add(this.button).addClass("is-playing").removeClass("is-loading")
            },
            o.prototype.onPause = function() {
                this.view.add(this.button).removeClass("is-playing")
            },
            o.prototype.onWaiting = function() {
                this.view.add(this.button).removeClass("is-playing").addClass("is-loading")
            },
            o.prototype.onEnd = function() {
                this.view.add(this.button).removeClass("is-playing is-started")
            },
            o.prototype.onError = function(t) {
                this.view && t.target.networkState && 3 === t.target.networkState && this.view.add(this.button).addClass("is-error")
            },
            o.prototype.onScrubberClick = function(t) {
                t.stopPropagation();
                var e = (t.pageX - $(t.currentTarget).offset().left) / $(t.currentTarget).width();
                this.seek(e)
            },
            o.prototype.onFullClick = function(t) {
                t.stopPropagation(),
                    this.toggleFullscreen()
            },
            o.prototype.onVolumeClick = function(t) {
                t.stopPropagation(),
                    this.toggleMute()
            },
            o.prototype.hideBar = function() {
                this.isHover || this.view.removeClass("is-mousemove")
            },
            o.prototype.onMouseMove = function() {
                var t = this;
                this.view.addClass("is-mousemove"),
                    window.clearTimeout(this.timeout),
                    this.timeout = setTimeout(function() {
                            t.hideBar()
                        },
                        2e3)
            },
            o.instances = [], o);
        function o(t, e) {
            s.call(this, t, e),
                this.view = t,
                this.controls = {},
                this.settings = {
                    volume: 1,
                    fit: !1,
                    width: 480,
                    height: 270,
                    isBgPlayer: !1
                },
                this.isHover = !1,
            "object" == typeof e && $.extend(this.settings, e),
                this.uid = Utils.generateUID(),
                this.setup(),
                this.resize();
            var i = this.view.attr("id");
            i && (this.button = $('[data-play="' + i + '"]')),
                this.view.data("Player", this),
                o.instances.push(this)
        }
        t.Player = e
    } (Components = Components || {});
var Components, Widgets;
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(e) {
        var i, t = (i = e.Player, __extends(s, i), s.prototype.play = function() {
            this.media.play()
        },
            s.prototype.pause = function() {
                this.media.pause()
            },
            s.prototype.toggle = function(t) {
                t && (t.stopPropagation(), t.preventDefault()),
                    this.media.paused ? (e.Player.pauseAll(), this.media.play()) : this.media.pause()
            },
            s.prototype.seek = function(t) {
                this.media.currentTime = this.media.duration * t
            },
            s.prototype.setVolume = function(t) {
                this.media.volume = t,
                    i.prototype.setVolume.call(this, t)
            },
            s.prototype.toggleMute = function() {
                this.media.volume = 0 < this.media.volume ? 0 : 1,
                    this.updateVolume()
            },
            s.prototype.isPaused = function() {
                return this.media.paused
            },
            s.prototype.unload = function() {
                this.media && (this.media.pause(), this.media.src = "", this.media.load())
            },
            s.prototype.setup = function() {
                if (this.mediaEl = this.view.find("audio, video"), this.mediaEl[0]) {
                    this.media = this.mediaEl[0],
                        this.settings.isAudio = "AUDIO" === this.media.tagName,
                    this.settings.volume && (this.media.volume = this.settings.volume),
                    this.media.autoplay && (this.settings.autoplay = !0, this.media.autoplay = !1),
                    this.media.loop && (this.settings.loop = !0);
                    var t = this.media;
                    t.poster && (this.settings.poster = t.poster),
                    this.media.controls && (this.buildUI(), this.media.controls = !1, $(this.media).removeAttr("controls")),
                        this.updateVolume(),
                        this.bind(),
                        this.resize(),
                    this.settings.autoplay && this.play()
                }
            },
            s.prototype.bind = function() {
                var e = this;
                i.prototype.bind.call(this),
                    this.controls.toggleBtn.on("click",
                        function(t) {
                            return e.toggle(t)
                        }),
                    this.controls.playBtn.on("click",
                        function(t) {
                            return e.toggle(t)
                        }),
                    this.controls.scrubber.on("click",
                        function(t) {
                            return e.onScrubberClick(t)
                        }),
                    this.controls.fullBtn.on("click",
                        function(t) {
                            return e.onFullClick(t)
                        }),
                    this.controls.volume.on("click",
                        function(t) {
                            return e.onVolumeClick(t)
                        }),
                    this.mediaEl.on("click",
                        function(t) {
                            return e.toggle(t)
                        }),
                    this.view.on("mousemove",
                        function() {
                            return e.onMouseMove()
                        }).on("click",
                        function(t) {
                            0 === $(t.target).closest(".player-bar").length && (t.preventDefault(), t.stopPropagation(), e.toggle())
                        }),
                    this.bindPlayer()
            },
            s.prototype.bindPlayer = function() {
                var e = this;
                this.mediaEl.on("durationchange updateMediaState",
                    function() {
                        return e.onDurationChange()
                    }).on("progress updateMediaState",
                    function() {
                        return e.onProgress()
                    }).on("timeupdate",
                    function() {
                        return e.onTimeupdate()
                    }).on("play",
                    function() {
                        return e.onPlay()
                    }).on("canplay",
                    function() {
                        return e.onCanplay()
                    }).on("playing",
                    function() {
                        return e.onPlaying()
                    }).on("pause",
                    function() {
                        return e.onPause()
                    }).on("waiting",
                    function() {
                        return e.onWaiting()
                    }).on("ended",
                    function() {
                        return e.onEnd()
                    }).on("error",
                    function(t) {
                        return e.onError(t)
                    }),
                screenfull.enabled && document.addEventListener(screenfull.raw.fullscreenchange,
                    function() {
                        e.view.toggleClass("is-fullscreen", screenfull.isFullscreen)
                    })
            },
            s.prototype.unbindPlayer = function() {
                this.mediaEl.off()
            },
            s.prototype.updateVolume = function() {
                this.view.toggleClass("is-muted", 0 === this.media.volume),
                this.controls.volumeValue && this.controls.volumeValue.css({
                    width: 100 * this.media.volume + "%"
                })
            },
            s.prototype.onDurationChange = function() {
                var t = this.media.duration;
                t && this.controls.duration.text(Utils.parseToTime(t))
            },
            s.prototype.onProgress = function() {
                var t = this.media.buffered;
                t && t.length && this.controls.loaded.width(t.end(0) / this.media.duration * 100 + "%")
            },
            s.prototype.onTimeupdate = function() {
                var t = this.media.currentTime;
                t && (this.controls.time.text(Utils.parseToTime(t)), this.controls.progress.width(t / this.media.duration * 100 + "%"))
            },
            s);
        function s(t, e) {
            i.call(this, t, e),
                this.view = t
        }
        e.Video = t
    } (Components = Components || {}),
    function(n) {
        var t = (e.bind = function(t) {
            var e = void 0 !== t ? $(t) : $body;
            e.find("[data-api]").not("form").off(".api").on("click.api",
                function(t) {
                    return n.API.onAction(t)
                }),
                e.find("form[data-api]").off(".api").on("submit.api",
                    function(t) {
                        return n.API.onAction(t)
                    }).attr("novalidate", "novalidate")
        },
            e.callIt = function(e, i, s) {
                i.is("form") && (e.url = !e.url && i.attr("action") ? i.attr("action") : e.url, e = $.extend(e, i.find(":input").serializeObject())),
                e.form && $(e.form)[0] && delete(e = $.extend(e, $(e.form).serializeObject())).form,
                e.params && delete(e = $.extend(e, e.params)).params,
                    i.addClass("is-doing-request"),
                    $.ajax({
                        url: e.url,
                        global: !1,
                        type: "POST",
                        dataType: "json",
                        async: !0,
                        data: e
                    }).done(function(t) {
                        e.callback && n.API.onSuccess(e, i, t),
                        s && "function" == typeof s && s(e, i, t)
                    }).fail(function(t) {}).always(function() {
                        i.removeClass("is-doing-request")
                    })
            },
            e.onAction = function(t) {
                t.preventDefault(),
                    t.stopPropagation();
                var e = $(t.currentTarget),
                    i = $(t.currentTarget).data("api");
                i.beforeCall && i.beforeCall in n.API.beforeCalls ? n.API.beforeCalls[i.beforeCall](i, e) : n.API.callIt(i, e)
            },
            e.onSuccess = function(t, e, i) {
                t.callback && t.callback in n.API.callbacks && n.API.callbacks[t.callback](t, e, i)
            },
            e.beforeCalls = {
                validate: function(t, e) {
                    var s = !0,
                        o = "";
                    e.find("[required]:input").each(function(t, e) {
                        if ("INPUT" === e.nodeName) switch (e.type) {
                            case "email":
                                var i = e.value;
                                /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(i) ? $(e).removeClass("is-error") : (s = !1, $(e).addClass("is-error"), o = Utils.translations[0 < i.length ? "invalid-email": "required-field"][Project.Site.lang]);
                                break;
                            case "checkbox":
                                e.checked ? $(e).removeClass("is-error") : (s = !1, $(e).addClass("is-error"), o = o || Utils.translations["required-field"][Project.Site.lang])
                        }
                    }),
                        s ? (n.API.callIt(t, e), e.find(".js-error").text("")) : (e.addClass("has-errors"), e.find(".js-error").text(o))
                }
            },
            e.callbacks = {
                onSubscribe: function(t, e, i) {
                    $(".js-newsletter-message").show().text(i.message),
                        e.find("input").trigger("blur"),
                        e.hide()
                }
            },
            e);
        function e() {}
        n.API = t
    } (Widgets = Widgets || {}),
    function(t) {
        var e = (i.bind = function(t) {
            var i = this,
                e = void 0 !== t ? $(t) : $body;
            $("[data-ga]", e).off(".ga").on("click.ga",
                function(t) {
                    var e = $(t.currentTarget).data("ga");
                    i.sendEvent(e[0] || "", e[1] || "", e[2] || "", e[3] || -1)
                })
        },
            i.sendEvent = function(t, e, i, s) {
                "undefined" != typeof ga && ga("send", "event", t, e, i, s || -1)
            },
            i.sendPageview = function(t, e) {
                "undefined" != typeof ga && ga("send", "pageview", t || window.location.pathname, {
                    title: e,
                    pathname: t || ""
                })
            },
            i);
        function i() {}
        t.Analytics = e
    } (Widgets = Widgets || {}),
    function(t) {
        var e = (i.bind = function(t) {
            $(void 0 === t ? "body": t).find("[data-cssanimate]").off(".cssanim").on("mouseenter.cssanim",
                function(t) {
                    $(t.currentTarget).addClass("animate")
                }).each(function(t, e) {
                var i = $(e).data("cssanimate");
                $(e).find(i).off(".cssanim").on("webkitAnimationEnd.cssanim mozAnimationEnd.cssanim animationEnd.cssanim",
                    function() {
                        $(e).removeClass("animate")
                    })
            })
        },
            i);
        function i() {}
        t.Animations = e
    } (Widgets = Widgets || {}),
    function(e) {
        var t = (i.bind = function(t) {
            e.API.bind(t),
                e.Images.bind(t),
                e.Analytics.bind(t),
                e.Sounds.bind(t),
                e.Animations.bind(t)
        },
            i);
        function i() {}
        e.All = t
    } (Widgets = Widgets || {}),
    function(s) {
        var t = (e.bind = function(t) {
            var s = this,
                e = void 0 === t ? "body": t;
            this.replaceSources(e),
                imagesLoaded(e).on("progress",
                    function(t, e) {
                        if (e.isLoaded) {
                            var i = $(e.img).closest("li");
                            $(e.img).removeClass("is-loading"),
                                s.tryImagefill(e.img),
                                i.addClass("is-loaded")
                        } else $(e.img).addClass("not-loaded")
                    })
        },
            e.imagefill = function(t, e, i) {
                var s = "contain" === i,
                    o = s ? "contain": "cover",
                    n = i;
                n = !0 === n || "" === n ? "center": n,
                    n = s ? "center": n,
                    t.css({
                        "background-image": "url(" + e + ")",
                        "background-position": n,
                        "background-repeat": "no-repeat",
                        "background-size": o
                    })
            },
            e.tryImagefill = function(t) {
                var e = $(t).closest("[data-imagefill]");
                if (e[0]) {
                    var i = e.data("imagefill");
                    s.Images.imagefill(e, t.src, i),
                        $(t).remove()
                }
            },
            e.replaceSources = function(t) {
                for (var e = Project.breakpoint,
                         i = 1 < Project.Site.pixelRatio,
                         s = $(t), o = [], n = (s = "IMAGE" !== s[0].nodeName ? s.find("img") : s).length - 1; 0 <= n; n--) {
                    var a = s.eq(n),
                        r = a.attr("src");
                    i && e.desktop && a.data("src-retina") ? (r = a.data("src-retina"), a.removeAttr("data-src-retina")) : e.desktop && a.data("src-desktop") ? (r = a.data("src-desktop"), a.removeAttr("data-src-desktop")) : e.tablet && a.data("src-tablet") ? (r = a.data("src-tablet"), a.removeAttr("data-src-tablet")) : !e.desktop && a.data("src-mobile") ? (r = a.data("src-mobile"), a.removeAttr("data-src-mobile")) : e.phone && a.data("src-phone") && (r = a.data("src-phone"), a.removeAttr("data-src-phone")),
                        o.push({
                            image: a,
                            src: r
                        })
                }
                for (var h = 0,
                         l = o; h < l.length; h++) {
                    var c = l[h];
                    c.image[0].src = c.src
                }
            },
            e);
        function e() {}
        s.Images = t
    } (Widgets = Widgets || {});
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var l = (e.PROGRESS = "progress", e.COMPLETE = "complete", e.CHANGE = "append", e);
        function e() {}
        t.PageEvents = l;
        var i, s = (i = Project.Handler, __extends(o, i), o.prototype.preload = function() {
            for (var s = this,
                     i = imagesLoaded(this.view.find(".preload").toArray(), {
                         background: !0
                     }), t = [], e = 0, o = this.components; e < o.length; e++) {
                var n = o[e];
                t = t.concat(n.preloadImages())
            }
            for (var a = 0,
                     r = t; a < r.length; a++) {
                var h = r[a];
                i.addBackground(h, null)
            }
            return new Promise(function(t, e) {
                s.loader = i.jqDeferred,
                    s.loader.progress(function(t, e) {
                        var i = t.progressedCount / t.images.length;
                        s.trigger(l.PROGRESS, i)
                    }).always(function() {
                        s.trigger(l.COMPLETE),
                            t(!0)
                    })
            })
        },
            o.prototype.onState = function() {
                for (var t = !1,
                         e = 0,
                         i = this.components; e < i.length; e++) {
                    var s = i[e].onState(); ! t && s && (t = !0)
                }
                return t
            },
            o.prototype.animateIn = function(t) {
                for (var e = 0; e < this.components.length; ++e) this.components[e].animateIn(t || 0, e);
                TweenMax.to(this.view, 0, {
                    delay: Project.breakpoint.desktop ? 1.5 : 0,
                    clearProps: "backgroundColor"
                });
                var i = $body.hasClass("is-showing-interlude") || $body.hasClass("first-animation") || !Project.breakpoint.desktop;
                TweenMax.to(this.view.find(".js-bio-hero"), i ? 0 : 1.2, {
                    opacity: 1,
                    delay: i ? 0 : 1.3
                }),
                    TweenMax.set(this.view.find(".js-bio-content"), {
                        opacity: 1,
                        delay: i ? 0 : 1.5
                    }),
                    TweenMax.fromTo(this.view.find(".js-slide-left"), .3, {
                            xPercent: 90,
                            opacity: 1
                        },
                        {
                            xPercent: 0,
                            ease: Sine.easeOut,
                            clearProps: "all",
                            delay: .3 + (t || 0)
                        }),
                    TweenMax.fromTo(this.view.find(".js-slide-right"), .3, {
                            xPercent: -100,
                            opacity: 1
                        },
                        {
                            xPercent: 0,
                            ease: Sine.easeOut,
                            clearProps: "all",
                            delay: .3 + (t || 0)
                        }),
                this.view.find("[data-bio-color]")[0] && $(".js-bio-bg").css("background-color", this.view.find("[data-bio-color]").data("bio-color"))
            },
            o.prototype.animateOut = function(e) {
                var i = this;
                this.view.css("background-color", "transparent");
                var s = new Promise(function(t, e) {
                        TweenMax.to(i.view, .2, {
                            onComplete: function() {
                                t(!0)
                            },
                            opacity: 0,
                            ease: Sine.easeIn
                        })
                    }),
                    o = this.components.map(function(t) {
                        return t.animateOut(!e)
                    });
                return new Promise(function(e, t) {
                    var i = o.concat(s);
                    Promise.all(i).then(function(t) {
                        e(!0)
                    })
                })
            },
            o.prototype.turnOff = function() {
                this.callAll("turnOff")
            },
            o.prototype.turnOn = function() {
                this.callAll("turnOn")
            },
            o.prototype.resize = function(t, e, i, s) {
                this.settings.fullheight && this.view.css("height", e),
                    this.callAll("resize", t, e, i, s)
            },
            o.prototype.destroy = function() {
                this.callAll("destroy"),
                    this.components = [],
                    TweenMax.killTweensOf(this.view),
                    this.view = null,
                    i.prototype.destroy.call(this)
            },
            o.prototype.prepare = function() {
                TweenMax.set(this.view.find(".js-slide-left, .js-slide-right"), {
                    opacity: 0,
                    transition: "none"
                }),
                0 === (window.scrollY ? window.scrollY: $window.scrollTop()) && this.view.css("background-color", "transparent")
            },
            o.prototype.buildComponents = function() {
                for (var e = this,
                         t = this.view.parent().find("[data-comp]"), i = t.length - 1; 0 <= i; i--) {
                    var s = t.eq(i),
                        o = s.data("comp") + "";
                    if (void 0 !== Components[o]) {
                        var n = s.data("options"),
                            a = new Components[o](s, n);
                        this.components.push(a),
                            a.on(Components.ComponentEvents.CHANGE,
                                function(t) {
                                    e.trigger(l.CHANGE, t)
                                })
                    }
                }
            },
            o.prototype.callAll = function(t) {
                for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i];
                for (var s = 0,
                         o = this.components; s < o.length; s++) {
                    var n = o[s];
                    "function" == typeof n[t] && n[t].apply(n, [].slice.call(arguments, 1))
                }
            },
            o);
        function o(t, e) {
            i.call(this),
                this.view = t,
                this.options = e,
                this.components = [],
                this.settings = {},
                $.extend(this.settings, e),
                this.buildComponents(),
                this.prepare()
        }
        t.Page = s
    } (Pages = Pages || {});
var Pages, site;
__extends = this && this.__extends ||
    function(t, e) {
        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
        function s() {
            this.constructor = t
        }
        t.prototype = null === e ? Object.create(e) : (s.prototype = e.prototype, new s)
    }; !
    function(t) {
        var i, e = (i = t.Page, __extends(s, i), s.prototype.onState = function() {
            return this.loadByPathname()
        },
            s.prototype.destroy = function() {
                this.unbind(),
                    this.swipe.destroy(),
                    i.prototype.destroy.call(this)
            },
            s.prototype.animateIn = function() {
                i.prototype.animateIn.call(this),
                    TweenMax.fromTo(this.view.find(".lightbox__wrapper"), .6, {
                            opacity: 0,
                            y: 60
                        },
                        {
                            delay: .6,
                            opacity: 1,
                            y: 0,
                            clearProps: "y,opacity,transition",
                            ease: Project.Site.CUSTOM_EASE
                        }),
                    TweenMax.fromTo(this.view.find(".lightbox__info"), .6, {
                            yPercent: 100,
                            opacity: 1
                        },
                        {
                            delay: .4,
                            yPercent: 0,
                            clearProps: "y,transition",
                            ease: Project.Site.CUSTOM_EASE
                        }),
                    TweenMax.fromTo(this.view.find(".lightbox__closer"), .4, {
                            scale: .7,
                            opacity: 0,
                            rotation: -90
                        },
                        {
                            delay: 1,
                            scale: 1,
                            opacity: 1,
                            rotation: 0,
                            clearProps: "transform,transition",
                            ease: Back.easeOut.config(1.5)
                        }),
                    TweenMax.fromTo(this.arrowPrev, .8, {
                            xPercent: -100,
                            opacity: 1
                        },
                        {
                            xPercent: 0,
                            clearProps: "x,transition",
                            delay: .6,
                            ease: Back.easeOut.config(1.2)
                        }),
                    TweenMax.fromTo(this.arrowNext, .8, {
                            xPercent: 100,
                            opacity: 1
                        },
                        {
                            xPercent: 0,
                            clearProps: "x,transition",
                            delay: .6,
                            ease: Back.easeOut.config(1.2)
                        })
            },
            s.prototype.animateOut = function(t) {
                var i = this;
                return Components.Player.pauseAllIn(this.view),
                    new Promise(function(t, e) {
                        new TimelineMax({
                            onComplete: function() {
                                return t()
                            }
                        }).to(i.view.find(".lightbox__wrapper"), .6, {
                                opacity: 0,
                                y: 60,
                                ease: Project.Site.CUSTOM_EASE
                            },
                            .2).to(i.view.find(".lightbox__info"), .6, {
                                yPercent: 100,
                                ease: Project.Site.CUSTOM_EASE
                            },
                            0).to(i.view.find(".lightbox__closer"), .4, {
                                scale: .7,
                                opacity: 0,
                                rotation: -90,
                                clearProps: "transform,transition",
                                ease: Project.Site.CUSTOM_EASE
                            },
                            0).fromTo(i.arrowPrev, .8, {
                                transition: "none"
                            },
                            {
                                xPercent: -100,
                                ease: Project.Site.CUSTOM_EASE
                            },
                            0).fromTo(i.arrowNext, .8, {
                                transition: "none"
                            },
                            {
                                xPercent: 100,
                                ease: Project.Site.CUSTOM_EASE
                            },
                            0)
                    })
            },
            s.prototype.bind = function() {
                var e = this;
                this.swipe.on(Components.SwipeEvents.END,
                    function(t) {
                        return e.onSwipeEnd(t)
                    }),
                    this.arrowPrev.on("click.lightbox",
                        function(t) {
                            t.preventDefault(),
                                t.stopPropagation(),
                                e.go( - 1)
                        }),
                    this.arrowNext.on("click.lightbox",
                        function(t) {
                            t.preventDefault(),
                                t.stopPropagation(),
                                e.go(1)
                        }),
                    $doc.off(".lightbox-" + this.uid).on("keyup.lightbox-" + this.uid,
                        function(t) {
                            switch (t.keyCode || t.which) {
                                case Utils.keys.right:
                                    e.go(1);
                                    break;
                                case Utils.keys.left:
                                    e.go( - 1);
                                    break;
                                case Utils.keys.esc:
                                    e.exit()
                            }
                        })
            },
            s.prototype.unbind = function() {
                this.swipe.off(),
                    this.arrowPrev.off(".lightbox"),
                    this.arrowNext.off(".lightbox"),
                    $doc.off(".lightbox-" + this.uid)
            },
            s.prototype.loadByPathname = function(t, e) {
                t = (t = void 0 !== t ? t: window.location.pathname).replace(/^\/|\/$/g, "");
                var i = this.items.filter('[data-lightbox-path="/' + t + '"]');
                return i[0] ? this.load(i.index()) : e && this.load(0),
                0 < i.length || e
            },
            s.prototype.go = function(t) {
                this.current + t < 0 || this.current + t > this.items.length - 1 || this.load(this.current + t)
            },
            s.prototype.exit = function() {
                Project.PushStates.back()
            },
            s.prototype.load = function(t) {
                var e = this;
                this.old = this.current,
                    this.current = t,
                    this.hideOld().then(function() {
                        return e.showCurrent()
                    })
            },
            s.prototype.hideOld = function() {
                var i = this;
                return new Promise(function(t, e) {
                    i.animating ? e() : (Components.Player.pauseAllIn(i.view), i.animating = !0, TweenMax.to(i.items.eq(i.old), .3, {
                        opacity: 0,
                        ease: Sine.easeOut,
                        onComplete: function() {
                            i.animating = !1,
                                t()
                        }
                    }))
                })
            },
            s.prototype.showCurrent = function() {
                var t = this.items.eq(this.current);
                t.addClass("is-current").siblings().removeClass("is-current"),
                    Project.PushStates.changePath(t.data("lightbox-path"), !0),
                    this.updateArrows(),
                    this.updateCaption(),
                    this.view.toggleClass("has-video", 0 < t.find(".player--video").length),
                    TweenMax.fromTo(t, .6, {
                            opacity: 0
                        },
                        {
                            opacity: 1,
                            ease: Sine.easeOut
                        })
            },
            s.prototype.updateArrows = function() {
                this.arrowPrev.toggleClass("is-disabled", this.current <= 0),
                    this.arrowNext.toggleClass("is-disabled", this.current >= this.items.length - 1)
            },
            s.prototype.updateCaption = function() {
                var t = this.items.eq(this.current);
                this.caption.text(t.find(".js-caption").text()),
                    this.count.text(("0" + (this.current + 1)).slice( - 2) + " / " + ("0" + this.items.length).slice( - 2))
            },
            s.prototype.onSwipeEnd = function(t) {
                t.direction && "none" !== t.direction && "click" !== t.direction && this.go({
                    left: 1,
                    right: -1
                } [t.direction])
            },
            s);
        function s(t, e) {
            i.call(this, t, e),
                this.view = t,
                this.options = e,
                this.components = [],
                this.settings = {},
                this.current = 0,
                this.old = 0,
                this.animating = !1,
                this.uid = Utils.generateUID(),
                this.arrowPrev = this.view.find(".js-lightbox-prev"),
                this.arrowNext = this.view.find(".js-lightbox-next"),
                this.items = this.view.find(".js-lightbox-item"),
                this.caption = this.view.find(".js-lightbox-caption"),
                this.count = this.view.find(".js-lightbox-count"),
                this.swipe = new Components.Swipe(this.view),
                this.bind(),
                this.loadByPathname(window.location.pathname, !0),
                TweenMax.set(this.view.find(".lightbox__info").add(this.view.find(".lightbox__closer")).add(this.view.find(".lightbox__wrapper")).add(this.arrowPrev).add(this.arrowNext), {
                    opacity: 0,
                    transition: "none"
                })
        }
        t.Lightbox = e
    } (Pages = Pages || {});
var Project, $doc = $(document),
    $window = $(window),
    $body = $("body"); !
    function(l) {
        var t = (s.prototype.preloadAssets = function() {
            var t = [],
                i = imagesLoaded(".preload-bg", {
                    background: !0
                });
            if (0 < t.length) for (var e = 0; e < t.length; ++e) i.addBackground(t[e], null);
            return new Promise(function(t, e) {
                i.jqDeferred.always(function() {
                    t(!0)
                })
            })
        },
            s.prototype.setCurrentPage = function() {
                var e = this,
                    t = $(l.PushStates.CONTENT_SELECTOR).find("[data-page]"),
                    i = t.data("page") + "" || "Page",
                    s = t.data("options");
                void 0 === Pages[i] && (i = "Page"),
                1 < t.length || 0 === t.length && (t = $("#content").find("article")[0] ? $("#content").find("article") : $("#content").children().first());
                var o = new Pages[i](t, s);
                return (this.currentPage = o).on(Pages.PageEvents.CHANGE,
                    function(t) {
                        return e.onPageAppend(t)
                    }),
                    l.PushStates.setTitle(),
                    $body.toggleClass("is-lightbox", 0 < $("[data-lightbox]").length),
                    this.scrolling.load(),
                    Widgets.All.bind(),
                    this.resize(),
                    o.preload()
            },
            s.prototype.setBackgrounds = function() {
                $body.toggleClass("is-home", 0 < $("[data-home]").length),
                    $body.toggleClass("is-performances", 0 < $("[data-performances]").length),
                    $body.toggleClass("is-performance", 0 < $("[data-performance]").length),
                    $body.toggleClass("is-news", 0 < $("[data-news]").length),
                    $body.toggleClass("is-contact", 0 < $("[data-contact]").length),
                    $body.toggleClass("is-info", 0 < $("[data-info]").length),
                    $body.toggleClass("is-partners", 0 < $("[data-partners]").length),
                    $body.toggleClass("is-repertoire", 0 < $("[data-repertoire]").length && $("[data-repertoire-alt]").length <= 0),
                    $body.toggleClass("is-repertoire-alt", 0 < $("[data-repertoire-alt]").length),
                    $body.toggleClass("is-team", 0 < $("[data-team]").length),
                    $body.toggleClass("is-bio", 0 < $("[data-bio]").length),
                    $body.toggleClass("is-tickets", 0 < $("[data-tickets]").length),
                    $body.toggleClass("is-history", 0 < $("[data-history-comp]").length),
                    $body.toggleClass("is-search", 0 < $("[data-search]").length),
                    $body.toggleClass("is-404", 0 < $("[data-404]").length)
            },
            s.prototype.onState = function() {
                var t = this,
                    e = this.scrolling.onState(),
                    i = this.currentPage.onState(),
                    s = this.menu.isShown();
                this.menu.toggle(!1);
                var o = !(!this.interlude || s || $body.hasClass("is-loading-lightbox") || $body.hasClass("is-lightbox"));
                if (!e && !i) {
                    Widgets.Analytics.sendPageview(window.location.pathname);
                    var n = this.pushStates.load(),
                        a = o ? null: this.currentPage.animateOut(!o),
                        r = o ? this.interlude.animateIn() : null;
                    $body.toggleClass("is-showing-interlude", o),
                    o || $body.removeClass("is-home is-performances is-news is-contact is-info is-repertoire is-repertoire-alt is-team is-bio is-tickets is-history is-search is-404"),
                        $body.addClass("is-loading-content"),
                        this.scrolling.stop(),
                        l.Site.header.clear();
                    var h = [n, a, r];
                    Promise.all(h).then(function() {
                        return t.render()
                    })
                }
            },
            s.prototype.onPageAppend = function(t) {
                l.PushStates.bind(t[0]),
                    Widgets.All.bind(t[0]),
                    this.scrolling.load()
            },
            s.prototype.render = function() {
                var t = this;
                this.currentPage && (this.currentPage.off(), this.currentPage.destroy(), this.currentPage = null),
                    this.scrolling.destroy(),
                    this.pushStates.render(),
                    this.scrolling.scrollToCached(),
                    this.setCurrentPage().then(function() {
                        return t.onPageLoaded()
                    })
            },
            s.prototype.onPageLoaded = function() {
                var t = this;
                this.setBackgrounds(),
                this.isReady || $body.addClass("first-animation"),
                    $body.removeClass("is-not-ready is-loading-content is-loading-lightbox"),
                    this.splash.hide().then(function() {
                        t.menu.hideCurtain(),
                            t.currentPage.animateIn(0),
                            $body.removeClass("first-animation"),
                        t.interlude && t.interlude.animateOut().then(function() {
                            $body.removeClass("is-showing-interlude")
                        }),
                            t.scrolling.start(),
                        t.isReady || t.cookies.tryToShow(),
                            t.isReady = !0
                    })
            },
            s.prototype.resize = function() {
                l.Breakpoint.update();
                var t = $window.width(),
                    e = $window.height(),
                    i = l.breakpoint,
                    s = !this.lastBreakpoint || this.lastBreakpoint.value !== i.value;
                this.lastBreakpoint = i,
                this.currentPage && this.currentPage.resize(t, e, i, s),
                this.interlude && this.interlude.resize(t, e),
                    this.scrolling.resize(t, e),
                    this.menu.resize(t, e, i, s)
            },
            s);
        function s() {
            var e = this;
            if (this.isReady = !1, s.instance = this, s.lang = $("html").attr("lang"), s.pixelRatio = Math.floor(window.devicePixelRatio || 1), s.debug = 0 <= window.location.search.indexOf("debug"), s.CUSTOM_EASE = CustomEase.create("custom", "M0,0,C0.5,0,0.3,1,1,1"), l.Breakpoint.update(), l.browser = Utils.getBrowser(), this.pushStates = new l.PushStates, this.pushStates.on(l.PushStatesEvents.CHANGE,
                function() {
                    return e.onState()
                }), this.pushStates.on(l.PushStatesEvents.LIGHTBOX_CLICK,
                function() {
                    $body.addClass("is-loading-lightbox")
                }), this.scrolling = new l.Scrolling, this.menu = new l.Menu($(".js-menu")), this.cookies = new l.Cookies($(".js-cookies")), s.header = new l.Header($(".js-header")), this.newsletter = new l.Newsletter($(".js-newsletter")), "en" === s.lang && l.breakpoint.desktop) {
                var t = $(".js-interlude");
                this.interlude = new l.Interlude(t, t.data("options"))
            }
            this.splash = new l.Splash($(".js-splash")),
                this.splash.show(),
                this.visibility = new Widgets.Visibility,
                this.visibility.on(Widgets.VisibilityState.HIDDEN,
                    function(t) {
                        e.currentPage.turnOff()
                    }).on(Widgets.VisibilityState.VISIBLE,
                    function(t) {
                        e.currentPage.turnOn()
                    });
            var i = [this.setCurrentPage(), this.preloadAssets(), this.interlude ? this.interlude.preload() : null];
            Promise.all(i).then(function() {
                return e.onPageLoaded()
            }),
                $window.on("resize",
                    function() {
                        return e.resize()
                    }),
                Widgets.Accessbility.init(),
            s.debug && Utils.stats()
        }
        l.Site = t
    } (Project = Project || {}),
    jQuery,
    site = new Project.Site,
    FastClick.attach(document.body);
