H.util.eval("N.prototype.N=ca(0,function(a){var b=this.g,c,d=this;a!==x?(B(a,Vg,N.prototype.N,0),c=a):c=bh;c!==b&&b.Ea(function(a,b,g){return d.m(a)?(c.add(a,b,g),!0):!1});this.g=c});function S(a,b,c,d,e,f){if(a&&b)this.ce(a),this.nd(b),this.mc(c),this.j(e),this.l(f),this.zf(d);else throw Error('Parameters \"scheme\" and \"host\" must be specified');}r(\"H.service.Url\",S);\nfunction km(a,b){var c=a,d=w.document,e,f,g,h,k=d&&d.createElement(\"a\"),l=\"\";d?(b&&(f=(e=d.getElementsByTagName(\"base\")[0])&&e.href,g=d.head,h=e||g.appendChild(d.createElement(\"base\")),h.href=b),k.href=c,l=k.href,b&&(e?e.href=f:g.removeChild(h))):/[\\w]+:\\/\\//.test(c)&&(l=c);g=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(l);c=g[1];k=g[4];d=g[5];h=g[6];e=g[7];f=g[8];!g[2]&&k&&/@/.test(k)&&(k=k.split(\"@\")[1]);g=k;h=h&&0<h.length?h.substr(1):\"\";var k=\n{},m;if(e)for(l=/([?&]?([^=&+]+))(=([^&]+))?/g;m=l.exec(e);)k[decodeURIComponent(m[2])]=m[4]?decodeURIComponent(m[4]):void 0;return new S(c,g,h,k,isNaN(+d)?void 0:+d,f&&0<f.length?f.substr(1):\"\")}S.parse=km;var lm=0;S.prototype.clone=function(){lm++;var a={},b;for(b in this.b)a[b]=this.b[b];return new S(this.g,this.vc,this.c,a,this.f,this.a)};S.prototype.clone=S.prototype.clone;\nS.prototype.ce=function(a){if(!a||\"string\"!==typeof a)throw Error('The \"scheme\" parameter must be a non-empty string.');this.g=a;return this};S.prototype.setScheme=S.prototype.ce;S.prototype.B=function(){return this.g};S.prototype.getScheme=S.prototype.B;S.prototype.nd=function(a){if(!a||\"string\"!==typeof a||\"-\"===a.charAt(0)||\".\"===a.charAt(0)||\".\"===a.charAt(a.length-1))throw Error('The \"host\" parameter is not a valid host name.');this.vc=a;return this};S.prototype.setHost=S.prototype.nd;\nS.prototype.o=function(){return this.vc};S.prototype.getHost=S.prototype.o;S.prototype.mc=function(a){this.c=a||void 0;return this};S.prototype.setPath=S.prototype.mc;S.prototype.m=function(){return this.c};S.prototype.getPath=S.prototype.m;S.prototype.zf=function(a){if(a)if(\"object\"==typeof a)this.b=a;else throw Error('Parameter \"params\" must be an object.');else this.b={};return this};S.prototype.setQuery=S.prototype.zf;S.prototype.i=function(){return!mm(this)};S.prototype.hasQuery=S.prototype.i;\nS.prototype.s=function(){return this.b};S.prototype.getQuery=S.prototype.s;S.prototype.j=function(a){if(a&&isNaN(parseInt(a,10)))throw Error('Parameter \"port\" must be a number or undefined');this.f=+a||void 0;return this};S.prototype.setPort=S.prototype.j;S.prototype.v=function(){return this.f};S.prototype.getPort=S.prototype.v;S.prototype.l=function(a){this.a=a||void 0;return this};S.prototype.setAnchor=S.prototype.l;S.prototype.A=function(){return this.a};S.prototype.getAnchor=S.prototype.A;\nS.prototype.$=function(a){if(\"object\"!==typeof a)throw Error('Parameter \"other\" must be an object.');var b=this.b,c;for(c in a)a.hasOwnProperty(c)&&\"function\"!==typeof a[c]&&(b[c]=a[c]);return this};S.prototype.mergeQuery=S.prototype.$;S.prototype.xa=function(a){if(!a||\"string\"!==typeof a)throw Error('Parameter \"subDomain\" must be a non-empty string');\".\"===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.nd(a+\".\"+this.vc)};S.prototype.addSubDomain=S.prototype.xa;\nS.prototype.R=function(a){if(!a||\"string\"!==typeof a)throw Error('Parameter \"subPath\" must be a non-empty string');return this.mc((this.c?this.c+\"/\":\"\")+a)};S.prototype.addSubPath=S.prototype.R;S.prototype.toString=function(){return[this.g+\"://\",this.vc,this.f?\":\"+this.f:\"\",this.c||!mm(this)||this.a?\"/\":\"\",this.c?encodeURI(this.c):\"\",nm(this),this.a?\"#\"+encodeURIComponent(this.a):\"\"].join(\"\")};S.prototype.toString=S.prototype.toString;\nfunction nm(a){var b=[],c,d=a.b,e;for(c in d)d.hasOwnProperty(c)&&\"function\"!==typeof d[c]&&(e=a.b[c],b.push(encodeURIComponent(c)+(void 0===e?\"\":\"=\"+encodeURIComponent(e))));return 0<b.length?\"?\"+b.join(\"&\"):\"\"}function mm(a){var b,c=0;for(b in a.b)if(a.b.hasOwnProperty(b)&&\"function\"!==typeof a.b[b]&&(c++,0<c))break;return!c};function om(a){function b(b){d.contains(e)&&d.removeChild(e);l&&clearTimeout(l);delete om.a[f];b&&a.Zc&&a.Zc.call(k,b)}if(!a.url||!a.oc)throw Error('Parameter \"options\" must specify at least a URL and a callback.');if(\"function\"!==typeof a.oc)throw Error(\"Parmaters options.callback must be a function\");var c=a.Ui||document,d=c.getElementsByTagName(\"head\")[0],e=c.createElement(\"script\"),c=a.url instanceof S?a.url:km(a.url,a.Ti),f=om.c++,g=a.xd||\"callback\",h=a.oc,k={},l=null;k.id=f;k.cancel=function(){b(\"cancelled\")};\n0!==a.timeout&&(l=w.setTimeout(function(){b(\"timeout\")},a.timeout||3E4));om.a[f]=function(a){b();h.call(k,a)};e.type=\"text/javascript\";e.src=c.toString()+(c.i()?\"&\":\"?\")+g+\"=\"+(a.rf?\"H.service.jsonp.handleResponse(\"+f+\")\":encodeURI(\"H.service.jsonp.handleResponse(\"+f+\")\"));d.appendChild(e);return k}r(\"H.service.jsonp\",om);om.b=function(a){return(a=om.a[a])?a:function(){}};om.handleResponse=om.b;om.c=0;om.a={};function pm(a){a=a||{};this.F=a.subDomain;this.c=a.path;this.N=a.callbackKey;this.f=a.baseUrl}r(\"H.service.AbstractRestService\",pm);pm.prototype.W=function(a,b,c,d,e){this.a=(e||this.f).clone();this.F&&this.a.xa(this.F);this.c&&this.a.mc(this.c);c&&this.a.ce(\"https\");return this};pm.prototype.configure=pm.prototype.W;pm.prototype.aa=function(){return this.a};\nfunction qm(a,b,c,d){if(!sa(c))throw Error(\"onResult callback needed\");if(!sa(d))throw Error(\"onError callback needed\");return om({url:b,oc:function(a){c(a)},Zc:function(a){d(Error(\"[\"+a+\"] \"+b+\" request failed\"))},xd:a.N})};function U(a){a=rm(sm,a);this.v(a.baseUrl);this.c(a.useCIT);this.g(a.useHTTPS);tm(this,a.app_id,a.app_code);this.a={}}r(\"H.service.Platform\",U);function tm(a,b,c){a.l=b;a.i=c;a.f.$({app_id:b,app_code:c})}U.prototype.W=function(a){if(a.configure)return a.configure(this.l,this.i,this.B,this.s,this.f);throw Error(\"Object is not configurable\");};U.prototype.configure=U.prototype.W;U.prototype.g=function(a){this.B=a;this.f.ce(a?\"https\":\"http\")};U.prototype.setUseHTTPS=U.prototype.g;\nU.prototype.c=function(a){this.s=a;this.f.nd((a?\"cit.\":\"\")+this.A)};U.prototype.setUseCIT=U.prototype.c;U.prototype.v=function(a){this.A=a.vc;this.f=a=a.clone();a.$({xnlp:\"CL_JSMv3.\"+sl().version});this.c(this.s);this.g(this.B);tm(this,this.l,this.i)};U.prototype.setBaseUrl=U.prototype.v;U.prototype.C=function(){return this.f};U.prototype.getBaseUrl=U.prototype.C;var sm={app_id:null,app_code:null,useHTTPS:!1,useCIT:!1,baseUrl:new S(\"http\",\"api.here.com\")};\nr(\"H.service.setOptions\",function(a,b){sm[a]=b});r(\"H.service.getOptions\",function(a){return sm[a]});function rm(a,b){var c=b||{},d;for(d in a)!a.hasOwnProperty(d)||d in c||(c[d]=a[d]),b&&b.hasOwnProperty(d)&&(c[d]=b[d]);return c};function um(a){a=rm(sm.trafficIncidents,a);a.callbackKey=\"jsoncallback\";um.u.constructor.call(this,a)}v(um,pm);r(\"H.service.TrafficIncidentsService\",um);um.prototype.W=function(a,b,c,d,e){um.u.W.apply(this,[a,b,c,d,e]);this.f&&(this.a=this.f.clone());return this};um.prototype.configure=um.prototype.W;um.prototype.g=function(a,b,c){a=this.aa().clone().R(\"incidents.json\").$(a);return qm(this,a,b,c)};um.prototype.requestIncidents=um.prototype.g;\num.prototype.b=function(a,b,c,d,e,f){a=this.aa().clone().R([\"incidents/json\",c,a,b].join(\"/\")).$(f||{});return qm(this,a,d,e)};um.prototype.requestIncidentsByTile=um.prototype.b;sm.trafficIncidents={subDomain:\"traffic\",path:\"traffic/6.1\"};U.prototype.o=function(){return this.W(new um)};U.prototype.getTrafficIncidentsService=U.prototype.o;function vm(){this.Ff={}}function wm(a){var b,c=a.boxes,d,e;this.label=a.label;this.min=a.minLevel;this.max=a.maxLevel;this.b=[];if(c&&(b=c.length))for(d=c[0],e=new G(d[0],d[1],d[2],d[3]),this.b.push(e),this.a=new G(d[0],d[1],d[2],d[3]),a=1;a<b;a++)d=c[a],e=new G(d[0],d[1],d[2],d[3]),this.b.push(e),this.a.wb(e,!1,this.a)}wm.prototype.xc=function(a,b){var c;if(a>=this.min&&a<=this.max)if((c=this.b.length)&&this.a){if(this.a.xc(b))for(;c--;)if(this.b[c].xc(b))return!0}else return!0;return!1};function xm(a){var b=0,c,d,e=a.length;if(0===e)return b;for(c=0;c<e;c++)d=a.charCodeAt(c),b=(b<<5)-b+d,b|=0;return b}var ym=Function(\"return this\")();function zm(a,b){function c(){k=Aa();te.font=g;h=Math.round(te.measureText(\"BESbswyMi\").width);-1===e.indexOf(h)?b():3E5<k-d?b(\"timeout\"):(l=50*++f,ym.setTimeout(c,Math.min(l,d+3E5-k)))}var d=Aa(),e=Am(),f=0,g=\"35px \"+a+\",\"+Bm.join(\",\"),h,k,l;-1!==Bm.indexOf(a)?b():ym.setTimeout(c,50)}\nfunction Cm(a,b){function c(a){a?b(a):0===--d&&b()}var d=a.length;a.forEach(function(a){zm(a,c)})}var Bm=Ra(\"monospace serif\");function Am(){var a=[];Bm.forEach(function(b){te.font=\"35px \"+b;a.push(Math.round(te.measureText(\"BESbswyMi\").width))});return a}function Dm(a,b){var c=b||document,d=c.createElement(\"style\"),e;d.appendChild(c.createTextNode(\"\"));c.head.appendChild(d);e=d.sheet;a.forEach(function(a,b){e.insertRule(a,b)});return d}function Em(){}\nEm.prototype.pop=function(a){this[a]||(this[a]=[]);return this[a].pop()||ym.document.createElement(\"canvas\")};Em.prototype.push=function(a,b){this[b]||(this[b]=[]);this[b].push(a)};var Fm=new Em;function Gm(a,b,c,d,e,f,g){var h=this;g=g||{};f=f?f:{};var k=a.aa().clone().R(b+\"/\"+a.Cb()+\"/\"+c).$(f),l=a.i;this.service_=a;this.tileBaseUrl_=k;Pk.call(this,{tileSize:d,max:512===d?19:20,min:512===d?2:0,getURL:function(a,b,c){var f=h.tileBaseUrl_.clone();l&&f.xa(l[(c+b+a)%l.length]);f.R(c+\"/\"+a+\"/\"+b+\"/\"+d+\"/\"+e);return f.toString()},crossOrigin:g.crossOrigin,uri:k.toString().replace(/_/g,\"\")+d});this.tileType_=b;this.scheme_=c;this.params_=f;this.copyrightKey_=c.split(\".\")[0];this.C=z(this.C,this);\nthis.getCopyrights=this.Ia;this.U=wc();a.addEventListener(\"versionupdate\",this.C)}v(Gm,Pk);Gm.prototype.MAX_STORE_TIME=2592E6;Gm.prototype.D=function(){Pk.prototype.D.call(this);this.service_.removeEventListener(\"versionupdate\",this.C)};Gm.prototype.Ia=function(a,b){var c=this.service_.Ia().Ff[this.copyrightKey_],d,e=c?c.length:0,f=[];for(d=0;d<e;d++)c[d].xc(b,a)&&f.push(c[d]);return f};\nGm.prototype.C=function(){var a=this.service_;this.tileBaseUrl_=a.aa().clone().R(this.tileType_+\"/\"+a.Cb()+\"/\"+this.scheme_).$(this.params_);this.j(!1)};Gm.prototype.Rc=function(){return this.U};r(\"H.service.MapTileProvider.prototype.canStore\",Gm.prototype.Rc);Gm.prototype.B=function(){return this.Rc()?vc():N.prototype.B.call(this)};r(\"H.service.MapTileProvider.prototype.getStorage\",Gm.prototype.B);function Hm(a){a=rm(sm.maptile,a);I.call(this);this.f=a.baseUrl;this.c=a.path;this.m=a.subDomain;this.i=a.shards;this.ra=(this.s=!!a.ignoreTypes)?null:a.type;this.g=a.version;this.j=new vm;this.o={};this.Ad=0}v(Hm,I);r(\"H.service.MapTileService\",Hm);function Im(a,b){for(var c={},d=a[b+\"s\"][b],e=d.length;e--;)c[d[e].id]=d[e];a[b+\"s\"]=c}\nHm.prototype.W=function(a,b,c,d,e){this.a=(this.f||e).clone();this.m&&this.a.xa(this.m);this.ra&&this.a.xa(this.ra);this.c&&this.a.mc(this.c);\"newest\"===this.g&&Jm(this);return this};Hm.prototype.configure=Hm.prototype.W;Hm.prototype.aa=function(){return this.a};Hm.prototype.A=function(){return this.ra};Hm.prototype.getType=Hm.prototype.A;Hm.prototype.Cb=function(){return this.g};Hm.prototype.getVersion=Hm.prototype.Cb;\nHm.prototype.Ia=function(){this.Ad||(this.g&&\"newest\"!==this.g||\"traffic\"===this.ra)&&Km(this);return this.j};Hm.prototype.getCopyrights=Hm.prototype.Ia;\nfunction Jm(a){var b=a.aa().clone().R(\"info\").$({output:\"json\"});a.i&&b.xa(a.i[0]);om({url:b,xd:\"callback_func\",oc:function(b){b=JSON.parse(b.replace(/,\\s?\\]/g,\"]\")).response;var d;Im(b,\"map\");Im(b,\"scheme\");Im(b,\"tiletype\");Im(b,\"format\");Im(b,\"resolution\");Im(b,\"language\");if(\"newest\"===a.g&&\"traffic\"!==a.ra)for(d in b.maps)b.maps[d].hash&&b.maps[d].newest&&(a.g=b.maps[d].hash,a.dispatchEvent(\"versionupdate\"));a.l=b;a.dispatchEvent(\"infoupdate\")},Zc:function(a){throw Error(\"[\"+a+\"]: Could not fetch meta-info from map tile service @ \"+\nb.toString());},rf:!0})}function Km(a){var b=a.aa().clone().R(\"copyright\").R(a.Cb()).$({output:\"json\"});a.i&&b.xa(a.i[0]);a.Ad=1;om({url:b,xd:\"callback_func\",oc:function(b){this.Ad=2;b=JSON.parse(b);var d=a.j,e;for(e in b)if(b.hasOwnProperty(e))for(var f=b[e],g=d.Ff[e]||(d.Ff[e]=[]),h=void 0,k=f.length,h=0;h<k;h++)g.push(new wm(f[h]));a.dispatchEvent(\"copyrightupdate\")},Zc:function(a){this.Ad=-1;throw Error(\"[\"+a+\"]: Could not fetch copyrights from map tile service @\"+b.toString());},rf:!0})}\nHm.prototype.B=function(){return this.l};Hm.prototype.getInfo=Hm.prototype.B;Hm.prototype.v=function(a,b,c,d,e,f){var g;g=xm(this.aa().clone().R(a+\"/\"+this.Cb()+\"/\"+b+\"/\"+c+\"/\"+d).$(e?e:{}).toString());var h=this.o[g];h||(h=new Gm(this,a,b,c,d,e,f),this.o[g]=h);return h};Hm.prototype.createTileProvider=Hm.prototype.v;Hm.prototype.b=function(a,b,c,d,e,f,g,h){a=this.v(a,b,c,d,e,h);return new oh(a,{opacity:f,dark:!!g})};Hm.prototype.createTileLayer=Hm.prototype.b;\nsm.maptile={type:\"base\",version:\"newest\",subDomain:\"maps\",path:\"maptile/2.1\",shards:[\"1\",\"2\",\"3\",\"4\"]};U.prototype.b=function(a){var b;b=rm(sm.maptile,a);var c;c=\"\"+(b.ignoreTypes?\"\":b.type);c+=b.path;c+=b.subDomain;c+=b.baseUrl;c+=b.shards?b.shards.join(\"\"):\"\";b=xm(c);c=this.a[b];c||(c=this.W(new Hm(a)),this.a[b]=c);return c};U.prototype.getMapTileService=U.prototype.b;function Lm(a){this.f=a;this.hb=this.a(\"general\",\"default\")||Mm;this.c=new Vg(200)}Lm.prototype.b=function(a,b){var c,d,e,f,g;for(g=1;g<arguments.length;g++)for(c in d=arguments[g],d)if(d.hasOwnProperty(c))for(e in a[c]||(a[c]={}),f=d[c],f)f.hasOwnProperty(e)&&void 0!==f[e]&&(a[c][e]=f[e]);return a};Lm.prototype.Na=function(a,b){var c=this.a(\"spaceToGroup\",b);return Nm(this,a,c?c+\"\":void 0)};\nfunction Nm(a,b,c){var d,e,f;f=(b?b+\"_\":\"\")+(c?c:\"default\");d=a.hb;(e=a.c.get(f))?d=e:(b&&c?(d=Nm(a,b,void 0),e=Nm(a,void 0,c),b=a.a(\"venues\",b,\"groups\",c),d=a.b({},a.hb,d,e,b)):b&&!c?d=a.b({},a.hb,a.a(\"venues\",b,\"default\")):!b&&c&&(d=a.b({},a.hb,a.a(\"general\",\"groups\",c))),a.c.add(f,d,1));return d}Lm.prototype.a=function(a){for(var b=this.f,c=arguments,d=c.length,e=0;e!==d;)if(b=b[c[e++]],!b)return;return b};\nvar Mm={space:{fillColor:\"rgba(198, 175, 255, .7)\",strokeColor:\"rgb(162, 141, 216)\",lineWidth:.5},spaceLabel:{fillColor:\"rgb(78,66,111)\"},floor:{fillColor:\"rgba(249, 244, 253, .7)\",strokeColor:\"rgba(255, 255, 255, .7)\",lineWidth:1}};function Om(a,b,c,d,e,f,g,h){this.Ta=[];this.A={};Yk.call(this,a,b,c,d,e,f,g,h)}v(Om,Yk);function Pm(){}Pm.prototype.Ib=function(){};r(\"H.service.remote.IObject.prototype.retain\",Pm.prototype.Ib);Pm.prototype.v=function(){};r(\"H.service.remote.IObject.prototype.release\",Pm.prototype.v);function Qm(a,b){var c={};this.I=a;Ca(c,b||c);Kk.call(this,c);this.lc={};Rm(this)}v(Qm,Kk);r(\"H.service.remote.ObjectProvider\",Qm);Qm.prototype.J=function(){Kk.prototype.J.call(this)};function Rm(a){a=a.N(Pe.SPATIAL);a.c(a.a+1,Me.ADD)}var Sm=[];Qm.prototype.c=function(){return Sm};Qm.prototype.requestMarkers=Qm.prototype.c;Qm.prototype.b=function(){return Sm};Qm.prototype.requestDomMarkers=Qm.prototype.b;Qm.prototype.l=Be;Qm.prototype.providesMarkers=Qm.prototype.l;Qm.prototype.i=Be;\nQm.prototype.providesDomMarkers=Qm.prototype.i;Qm.prototype.s=function(){return!0};Qm.prototype.providesSpatials=Qm.prototype.s;Qm.prototype.m=function(){return Sm};Qm.prototype.requestSpatials=Qm.prototype.m;function Tm(a){return a.getVisibility(!0)}Qm.prototype.g=function(a,b){var c=Um(this,a,Vm);b&&(c=c.filter(Tm));return c};Qm.prototype.requestSpatialsByTile=Qm.prototype.g;function Um(a,b,c){var d=b.i&&b.i[c],e;!d&&(e=b.v)&&(delete b.v,(b.i=a=a.I.parse(a,b,e))&&(d=a[c]));return d||Sm}\nQm.prototype.V=function(a){var b=a.ta();if(this.lc[b])throw new kc(this.V,\"Remote object \"+b+\" already added\");return this.lc[b]=a};Qm.prototype.a=function(a){delete this.lc[a.ta()]};var Vm=\"spatials\";function Wm(a,b,c){Qm.call(this,b,c);this.f=a;this.responseQueue_=[];Xm(this.f)||(this.Vd=z(this.Vd,this),this.f.addEventListener(\"statechange\",this.Vd));this.v=a.m;this.j=0;this.B={onSpaceCreated:c&&c.onSpaceCreated,floorLevel:0,styler:null};this.requestSpatialsByTile=z(this.g,this)}v(Wm,Qm);Wm.prototype.T=function(a,b,c,d){this.vf?this.Ug.apply(this,arguments):d||this.responseQueue_.push({Ci:a,response:c,Vh:b});d&&(a.A[b]=!0)};function Ym(a){return a.getVisibility(!0)}\nWm.prototype.g=function(a,b,c){var d;this.$g||Zm(this);d=a.a;b&&(d=d.filter(Ym));if(!c){b=this.j;var e,f,g,h;if(!a.A[b]&&Xm(this.f)){e=this.f.aa();c=a.x;f=a.y;h=g=a.z;for(var k=1,l;h--;)l=1<<h,k*=4,k+=(c&l&&1)|(f&l&&2);h=k.toString(4).substr(1);e=e.clone().R(\"0/tiles-ia\").R(\"L\"+b).R(h+\".json\");this.v&&e.xa(this.v[(c+f+g)%this.v.length]);c=new Gh(\"text/plain\",e.toString());c.then(z(this.T,this,a,b),sc);a.A[b]=!0}a.A[this.j]=!0}a.l&&(d=d.concat(a.l),delete a.l);return d};\nr(\"H.service.venues.ObjectProvider.prototype.requestSpatialsByTile\",Wm.prototype.g);p=Wm.prototype;p.Kc=function(a){var b,c,d;for(b in this.lc)for(c in d=this.lc[b].C,d)d[c].Kc(a);Rm(this);Rg(this);this.j=a};p.Ug=function(a,b,c,d){if(!d&&(this.B.floorLevel=b,b=(b=this.I.parse(this,a,c,this.B))&&b.spatials))for(a.l=a.l?a.l.concat(b):b,a=b.length;a--;)b[a].ua(Me.ADD)};p.Vd=function(){Xm(this.f)&&($m(this),this.f.removeEventListener(\"statechange\",this.Vd))};\nfunction $m(a){Xm(a.f)&&a.vf&&a.dispatchEvent(\"reload\")}function Zm(a){a.$g=!0;an(a,function(b,c){c?a.dispatchEvent(\"error\"):(a.B.styler=b,bn(a,z(a.si,a)))})}p.si=function(a){a?this.dispatchEvent(\"error\"):(this.responseQueue_.forEach(function(a){this.Ug(a.Ci,a.Vh,a.response)},this),this.responseQueue_=null,this.vf=!0,$m(this))};p.$g=!1;p.vf=!1;function an(a,b){(new Gh(\"application/json\",a.f.l.clone().R(\"styles/styles.json\").toString())).then(function(a){b(new Lm(a))},function(a){b(null,a)})}\nvar cn=0;\nfunction bn(a,b){var c=a.f.l.clone().R(\"fonts\"),d=document,e=[],f,g=[];2===cn?b():(dn.forEach(function(a){g.push(\"FiraGO-Regular\".replace(\"{name}\",a))}),1!==cn&&(dn.forEach(function(a,b){f=c.clone().R(g[b]);e.push('@font-face {font-family: \"FiraGO-Regular\";src: url(\"{url}.woff2\") format(\"woff2\"),url(\"{url}.woff\") format(\"woff\"),url(\"{url}.ttf\") format(\"truetype\");font-weight: normal;font-style: normal;}'.replace(/\\{name\\}/g,a).replace(/\\{url\\}/g,f.toString()))}),a.A=Dm(e,d),cn=1),Cm(g,function(c){cn=c?\n0:2;c&&a.A&&Ge(a.A);b(c)}))}var dn=[\"\"];function en(a,b,c,d){P.call(this,fn(a));this.i=c;this.f=d;this.o={};this.Za=b;this.c=0}v(en,P);r(\"H.service.venues.Building\",en);en.prototype.ta=function(){return this.Za};en.prototype.getId=en.prototype.ta;en.prototype.wa=function(){return this.Da};en.prototype.getVenue=en.prototype.wa;en.prototype.sa=function(){return this.i};en.prototype.getMinLevel=en.prototype.sa;en.prototype.Ya=function(){return this.f};en.prototype.getMaxLevel=en.prototype.Ya;en.prototype.Va=function(){return this.c};\nen.prototype.getCurrentLevel=en.prototype.Va;en.prototype.Kc=function(a){var b,c,d;if(!isNaN(a)&&(b=this.i,c=this.f,a!==this.c))for(this.c=a;b<=c;b++)(d=this.o[b])&&d.setVisibility(b===a);return this.c};en.prototype.ad=function(a){return this.o[a]};en.prototype.getFloor=en.prototype.ad;en.prototype.ba=function(a,b){this.i=Math.min(this.i,a);this.f=Math.max(this.f,b)};en.prototype.adjustMinMaxLevels=en.prototype.ba;function gn(a,b){P.call(this,fn(a));this.C={};this.f=b;a.V(this)}v(gn,P);r(\"H.service.venues.Venue\",gn);gn.prototype.N=function(a){return this.C[a]};gn.prototype.getBuilding=gn.prototype.N;gn.prototype.c=function(){return this.C};gn.prototype.getBuildings=gn.prototype.c;gn.prototype.ta=function(){return this.f};gn.prototype.getId=gn.prototype.ta;function hn(a,b,c,d){d=d||jn;this.Ic={};d.provider=a;this.invalidate=sc;hn.u.constructor.call(this,b,d);delete this.invalidate;c&&(this.f=c);this.ua(Me.ADD)}v(hn,Gf);r(\"H.service.remote.Spatial\",hn);var jn={};hn.prototype.ta=function(){return this.f||Gf.prototype.ta.call(this)};hn.prototype.getId=hn.prototype.ta;hn.prototype.Ib=Function();hn.prototype.retain=hn.prototype.Ib;hn.prototype.v=Function();hn.prototype.release=hn.prototype.v;function kn(a,b){this.a=a;b&&(this.b=b)}var ln=new kn([]);\nhn.prototype.ec=function(a){return(this.Ic[a.key]||ln).a};hn.prototype.getGeometriesForTile=hn.prototype.ec;hn.prototype.ba=function(a){return(this.Ic[a.key]||ln).b};hn.prototype.getLabels=hn.prototype.ba;function mn(a,b,c,d){a.Ic[b.key]=new kn(c,d)};function nn(a,b,c){this.ra=c&&c.type||\"\";hn.call(this,a,!0,b);this.g(c)}v(nn,hn);r(\"H.service.venues.Space\",nn);nn.prototype.i=function(){return this.ra};nn.prototype.getType=nn.prototype.i;nn.prototype.c=function(){return\"floor/polygon\"===this.ra};nn.prototype.isFloorSpace=nn.prototype.c;nn.prototype.b=function(a){a&&(this.ai=new zf(a))};nn.prototype.initLabelStyle=nn.prototype.b;nn.prototype.ad=function(){var a=this.Da;return this.isFloorSpace()?a:a&&a.Da};nn.prototype.getFloor=nn.prototype.ad;\nnn.prototype.a=0;nn.prototype.Ib=function(){++this.a};nn.prototype.retain=nn.prototype.Ib;nn.prototype.v=function(){var a=--this.a,b;a||(b=this.ad(),this.isFloorSpace()?b.ib&&(b.a(b.ib),b.ib=null,on(b)):b&&(delete b.i[this.ta()],b.c.a(this),on(b)));return 1>a};nn.prototype.release=nn.prototype.v;function pn(){}pn.prototype.parse=function(){};r(\"H.service.remote.IParser.prototype.parse\",pn.prototype.parse);function qn(a,b,c){P.call(this,fn(a));this.f=c;this.ib=new nn(a,b.id,b);this.V(this.ib);this.c=new P(fn(a));this.V(this.c);this.i={}}v(qn,P);r(\"H.service.venues.Floor\",qn);qn.prototype.sa=function(){return this.f};qn.prototype.getLevel=qn.prototype.sa;qn.prototype.o=function(){return this.ib};qn.prototype.getFloorSpace=qn.prototype.o;qn.prototype.ba=function(){return this.c};qn.prototype.getSpaces=qn.prototype.ba;qn.prototype.N=function(){return this.Da};qn.prototype.getBuilding=qn.prototype.N;\nqn.prototype.getData=function(){return this.ib&&this.ib.getData()};qn.prototype.getData=qn.prototype.getData;qn.prototype.g=function(a){this.ib.g(a);return this};qn.prototype.setData=qn.prototype.g;qn.prototype.jg=function(a){return this.i[a]};qn.prototype.getSpace=qn.prototype.jg;function on(a){if(!a.c.b&&!a.ib){var b=a.N(),c=a.f;c===b.c&&(b.c=0);delete b.o[c];b.a(a);b.b||(a=b.Da,delete a.C[b.ta()],a.a(b),a.b||a.Pa().a(a))}};function rn(){}var sn;rn.prototype.a=Math.PI/180;function tn(a,b){return a&&a.category&&a.category[b||\"id\"]}function un(a){var b,c;return a.sort(function(a,e){b=a.object.type;c=e.object.type;return b>c?-1:b<c?1:0})}\nrn.prototype.parse=function(a,b,c,d){var e=d.floorLevel,f=d.onSpaceCreated;d=d.styler;var g=[],h,k,l,m,n,q,t,u,y,J={};sn=!1;c=c.replace(/''( )?/g,'$1\\\\\"');try{c=ym.JSON.parse(c)}catch(T){sn=!0}if(c.length)for(c=un(c),h=c.length;h--;){k=c[h];l=k.area;n=l.length;t=u=q=void 0;(u=0<n)||(sn=!0,u=void 0);if(u)for(q=Array(n/2);n;)t=l[--n],u=l[--n],q[n/2]=new M(u,t);l=q?{Ra:[q]}:A;k=k.object;u=y=x;if(1!==k.type)switch(n=k.type.replace(\"/polygon\",\"\"),n){case \"floor\":n=q=k.buildingId;(u=a.lc[n])||(u=new gn(a,\nn),u.ia(a));t=k.buildingMinLevel;y=k.buildingMaxLevel;(n=u.N(q))?n.adjustMinMaxLevels(t,y):(n=new en(a,q,t,y),q=u,u=n,q.C[u.ta()]=u,q.V(u),n.Kc(a.j));0>b.Ta.indexOf(n)&&b.Ta.push(n);(q=n.ad(e))?(n=q.ib,u=n.ec(b),u.length&&(l?l.Ra=u[0].Ra.concat(l.Ra):l=u[0])):(u=q=new qn(a,k,e),t=u.f,u.setVisibility(t===n.c),n.o[t]=u,n.V(u),n=q.ib,f&&f(n),t=tn(q.getData(),\"profileKey\"),y=d.Na(t,void 0),n.O(y.floor));J[k.id]=q;0>g.indexOf(n)&&g.push(n);l&&mn(n,b,[l]);break;case \"hollow\":u=\"hollow-area\";case \"space\":if(m=\nk.id,q=J[/_d$/.test(k.outerAreaId)?k.outerAreaId:k.outerAreaId+\"_d\"])n=q.jg(m),t=tn(q.getData(),\"profileKey\"),u=u||tn(n?n.getData():k),n||(y=n=new nn(a,m,k),q.i[y.ta()]=y,q.c.V(y),y=d.Na(t,u),n.O(y.space),f&&f(n)),n.Ib(),(k=k.label)&&k.firstLinePos?(y=y||d.Na(t,u),q=n.ai,q=[{lines:Ra(k.text,\"\\n\"),angle:k.rotation*this.a,font:\"FiraGO-Regular\",size:k.font.size,lineHeight:k.font.lineHeight,color:q&&q.fillColor||y.spaceLabel.fillColor,x:k.firstLinePos[0],y:k.firstLinePos[1]}],\"nokiapuretextac_rg-webfont\"===\nk.font.face&&(q[0].size=Math.floor(k.font.size/1.26))):q=null,g.push(n),l&&mn(n,b,[l],q)}}else sn=!0;return sn?void 0:{spatials:g}};r(\"H.service.venues.Parser.prototype.parse\",rn.prototype.parse);function vn(a,b){var c=b||{};if(!(a&&a instanceof wn))throw Error(\"InvalidArgument: service required\");this.Ye=z(this.Ye,this);this.b=new Wm(a,new rn,{min:16,max:20,onSpaceCreated:c.onSpaceCreated});this.b.ia(this);this.Xe=z(this.Xe,this);this.b.addEventListener(\"update\",this.Xe);this.lf=z(this.lf,this);this.b.addEventListener(\"reload\",this.lf);this.kf=z(this.kf,this);this.b.addEventListener(\"error\",this.kf);this.Ze=c.pixelRatio||c.pixelratio||1;this.tileSize=256;this.f=Tg(this.tileSize,this.Ze);\nN.call(this,{min:16,max:20});this.N(new Vg(c.tileCacheSize||256,z(this.Ye,this)))}v(vn,N);r(\"H.service.venues.TileProvider\",vn);p=vn.prototype;p.Ze=1;p.Xe=function(){this.dispatchEvent(\"update\")};p.kf=function(){this.dispatchEvent(\"error\")};p.lf=function(){this.j(!0)};p.Ye=function(a,b){var c,d,e;c=b.a;for(e=c.length;e--;)d=c[e],delete d.Ic[b.key],d.v();b.data&&Fm.push(b.o(),this.tileSize);b.m()};p.Kc=function(a){this.b.Kc(a)};vn.prototype.setCurrentLevel=vn.prototype.Kc;vn.prototype.C=function(){return this.b.j};\nvn.prototype.getCurrentLevel=vn.prototype.C;vn.prototype.c=function(a,b,c,d){var e;this.g.get(this.getTileKey(a,b,c))?d(null,null):e=ym.setTimeout(function(){d(null,null)},500);return{cancel:function(){ym.clearTimeout(e)}}};vn.prototype.requestInternal=vn.prototype.c;vn.prototype.P=function(a,b,c){var d=Fm.pop(this.tileSize),e=this.g.get(this.getTileKey(a,b,c));e||(e=new Om(this.A(a,b,c),a,b,c,this.tileSize,this.Ze,c+this.f,this.b));e.ca(d)||Fm.push(d,this.tileSize);return e};\nvn.prototype.createTileInternal=vn.prototype.P;function wn(a){var b=sm.venues;a=rm(b,a||{});I.call(this);this.f=b.baseUrl;this.c=a.path;this.g=a.subDomain;this.m=b.shards}v(wn,I);r(\"H.service.venues.Service\",wn);var xn={ERROR:-1,INIT:0,READY:1};wn.State=xn;\nwn.prototype.W=function(a,b,c,d,e){this.a=(this.f||e).clone();this.l=this.a.clone().xa(\"js\").R(\"statics/venues\").zf();this.g&&this.a.xa(this.g);this.ra&&this.a.xa(this.ra);this.c&&this.a.mc(this.c);a=sm.venueSignature;b=this.a.clone();b.xa(a.subDomain);b.R(a.path);b.R(a.version);this.v=b;this.o=this.a.clone();this.G===xn.INIT&&this.b();return this};wn.prototype.configure=wn.prototype.W;function Xm(a){return a.G===xn.READY}wn.prototype.aa=function(){return Xm(this)?this.a:void 0};\nwn.prototype.b=function(){var a=this;(new Gh(\"application/json\",this.v.toString())).then(function(b){var c=b.SignatureTokens,d=(b=new Date(b.Expires))?b.getTime()-Aa()-36E5:0;a.a.$(c);b&&4E9>d&&ym.setTimeout(z(a.b,a),Math.max(d,0));yn(a,xn.READY)},function(){yn(a,xn.ERROR,\"Error fetching signature\")})};\nwn.prototype.j=function(a,b,c){var d=sm.venuesDiscovery;a=this.o.clone().xa(d.subDomain).R(d.path).R(d.version).$(rm(a,d.params));(new Gh(\"application/json\",a.toString())).then(b,function(a){a.json().then(function(a){c(a.status.message)},function(){c(a.statusText)})})};wn.prototype.discover=wn.prototype.j;wn.prototype.i=function(a){return new oh(new vn(this,a))};wn.prototype.createTileLayer=wn.prototype.i;wn.prototype.G=xn.INIT;wn.prototype.getState=function(){return this.G};\nwn.prototype.getState=wn.prototype.getState;function yn(a,b,c){var d=new Bc(\"statechange\",a);c&&(d.errorCode=c);a.G=b;a.dispatchEvent(d)}U.prototype.m=function(a){return this.W(new wn(a))};U.prototype.getVenueService=U.prototype.m;var zn={subDomain:\"venue.maps\",path:\"\",shards:Ra(\"1 2 3 4\").map(function(a){return\"static-\"+a})};sm.venues=zn;sm.venueSignature={version:\"v1\",subDomain:\"signature\",path:\"venues/signature\"};sm.venuesDiscovery={version:\"v1\",subDomain:\"discovery\",path:\"venues/discovery\"};var An={};function fn(a){An.provider=a;return An};function Bn(){this.a={}}Bn.prototype.sb=function(a,b){var c=a+b,d,e,f;if(!(d=this.a[c])){f={size:{w:26,h:32},anchor:{x:13,y:30}};if(\"CLOSURE\"!==a)switch(d=Cn,a){case \"CONGESTION\":d=d.replace(\"{{icon}}\",Dn);break;case \"ROADWORKS\":d=d.replace(\"{{icon}}\",En);break;case \"ACCIDENT\":d=d.replace(\"{{icon}}\",Fn);break;default:d=d.replace(\"{{icon}}\",Gn)}else d=Hn,f.anchor.y=16;e=In[b]||In.BLOCKING;d=d.replace(\"{{color}}\",e);this.a[c]=d=new ri(d,f)}return d};\nvar In={BLOCKING:\"#323232\",VERYHIGH:\"#d5232f\",HIGH:\"#ffa100\"},Dn='<path d=\"m 18,15 0,0 c 0,-0.1 0,-0.2 0,-0.4 l 0,-0.2 c 0,-0.1 0,-0.2 0,-0.4 0,0 0,0 0,0 0.6,0 1.1,-0.4 1.1,-1 0,-0.5 -0.5,-1 -1,-1 -0.7,0 -1.1,0.5 -1.1,1 -0.1,0 -0.3,-0.1 -0.4,-0.1 l -0.6,0 -0.3,-0.5 C 15.2,11.6 14.3,11 13.3,11 L 18,11 17.2,9.6 C 17,9.3 16.7,9 16.3,9 L 12.8,9 C 12.4,9 12,9.3 11.8,9.6 L 11.1,11 9.8,11 C 9.7,11 9.6,11 9.5,11 9.2,11 9,10.9 9,10.6 L 9,10.4 C 9,10.2 9.2,9.9 9.5,9.9 l 1.2,0 0.6,-1.04 c 0.3,-0.5 0.9,-0.9 1.5,-0.9 l 3.5,0 c 0.6,0 1.2,0.4 1.5,0.9 l 0.6,1.04 1.2,0 c 0.2,0 0.4,0.3 0.4,0.5 l 0,0.2 c 0,0.3 -0.2,0.5 -0.4,0.5 l -0.1,0 c 0.3,0.3 0.5,0.7 0.5,1.1 l 0,3.4 c 0,0.2 -0.2,0.4 -0.4,0.4 l -1.1,0 C 18.3,16 18,15.8 18,15.6 L 18,15 z M 8,18.1 c 0.6,0 1.1,-0.5 1.1,-1.1 0,-0.5 -0.5,-1 -1.1,-1 -0.6,0 -1.1,0.5 -1.1,1 0,0.6 0.5,1.1 1.1,1.1 m 7,0 c 0.6,0 1.1,-0.5 1.1,-1.1 0,-0.5 -0.5,-1 -1.1,-1 -0.5,0 -1,0.5 -1,1 0,0.6 0.5,1.1 1,1.1 M 14.2,13.6 C 14,13.3 13.7,13 13.3,13 L 9.8,13 C 9.4,13 9,13.3 8.8,13.6 L 8.1,15 15,15 14.2,13.6 z m -8.2,1 0,-0.2 c 0,-0.2 0.2,-0.5 0.5,-0.5 l 1.1,0 0.7,-1 C 8.6,12.4 9.2,12 9.8,12 l 3.5,0 c 0.6,0 1.2,0.4 1.5,0.9 l 0.6,1 1.2,0 c 0.2,0 0.4,0.3 0.4,0.5 l 0,0.2 c 0,0.3 -0.2,0.5 -0.4,0.5 l -0.1,0 c 0.3,0.3 0.5,0.7 0.5,1.1 l 0,3.4 c 0,0.2 -0.2,0.4 -0.4,0.4 l -1.1,0 C 15.3,20 15,19.8 15,19.6 L 15,19 8,19 8,19.6 C 8,19.8 7.8,20 7.5,20 l -1,0 C 6.2,20 6,19.8 6,19.6 l 0,-3.4 c 0,-0.4 0.2,-0.8 0.6,-1.1 l -0.1,0 C 6.2,15.1 6,14.9 6,14.6\" fill=\"#ffffff\" />',\nEn='<path d=\"m 9.24,13.2 -3.7,6.8 1.3,0 2.8,-5.1 1.36,1.5 0,3.6 1.1,0 0,-4 -1.4,-1.6 -1.46,-1.2 z M 14.2,9.5 c 0.7,0 1.3,-0.5 1.3,-1.21 0,-0.7 -0.6,-1.2 -1.3,-1.2 -0.7,0 -1.2,0.5 -1.2,1.2 0,0.71 0.5,1.21 1.2,1.21 m -4.46,0.5 1.06,0 -0.96,2.1 -1,-0.8 0.9,-1.3 z m 2.56,4 -1,-0.7 1,-1.9 0,2.6 z m 6.9,1.7 c -0.4,-0.5 -1.5,-1.1 -2.3,0 -0.2,0.3 -0.6,0.7 -0.9,1.2 l -2.7,-2.1 0,-5 -0.8,-0.7 -3.26,0 -1.5,2.3 7.86,6 C 14.7,18.6 13.8,20 13.8,20 l 6,0 1.5,-1.6 c 0,0 -1.7,-2.2 -2.1,-2.7\" fill=\"#ffffff\" />',Fn=\n'<path d=\"m 10.2,15.9 c 0.4,-0.5 1,-0.5 1.4,0 0.5,0.4 0.5,1 0,1.4 -0.4,0.4 -1,0.4 -1.4,0 -0.45,-0.4 -0.45,-1 0,-1.4 m 4.9,-5 c 0.4,-0.4 1.1,-0.4 1.5,0 0.4,0.4 0.4,1.1 0,1.5 -0.4,0.4 -1.1,0.4 -1.5,0 -0.4,-0.4 -0.4,-1.1 0,-1.5 m 2.6,3.8 c 0.1,0.3 0,0.7 -0.3,1 l -1.9,1 c 0,0 0,0.8 0,1.1 0,0.3 0,0.2 -0.1,0.3 -0.1,0.1 -0.3,0.2 -0.5,0.2 l -2.6,-0.3 4.9,-4.9 0.5,1.6 z m -6.5,5 0.1,0.2 c 0.2,0.1 0.5,0.1 0.7,0 l 0.8,-0.9 1.8,0.1 c 1.1,0 1.4,0 1.7,-0.6 l 0.1,-1.3 1.8,-0.8 c 0.4,-0.4 0.6,-1.1 0.4,-1.7 l -0.3,-1.1 0.8,-0.8 c 0.2,-0.2 0.2,-0.5 0,-0.7 L 19,12 c -0.2,-0.2 -0.5,-0.2 -0.7,0 l -0.1,0.1 c 0.1,-0.5 -0.1,-0.9 -0.4,-1.3 L 15.5,8.44 C 15.3,8.26 15,8.26 14.8,8.44 l -0.7,0.74 c -0.2,0.19 -0.2,0.49 0,0.68 l 0.3,0.34 -4.92,5 -0.36,-0.4 C 8.93,14.6 8.63,14.6 8.45,14.8 L 7.7,15.6 c -0.18,0.1 -0.18,0.4 0,0.6 l 2.4,2.4 c 0.3,0.3 0.7,0.4 1.2,0.4 l -0.1,0.1 c -0.2,0.2 -0.2,0.5 0,0.7 m 5.6,-0.8 3.9,0 1.6,-2 -5.5,2 z m -8.08,0 -3.28,-1.8 0.9,1.8 2.38,0 z\" fill=\"#ffffff\" />',\nGn='<path d=\"m 12.9,15.1 c 0.6,0 1.1,-0.5 1.1,-1 l 0.4,-5.9 c 0,-0.6 -0.6,-1.04 -1.5,-1.04 -0.8,0 -1.4,0.44 -1.4,1.04 l 0.3,5.9 c 0,0.5 0.6,1 1.1,1 m 0,1.3 c -0.7,0 -1.3,0.6 -1.3,1.3 0,0.8 0.6,1.4 1.3,1.4 0.8,0 1.4,-0.6 1.4,-1.4 0,-0.7 -0.6,-1.3 -1.4,-1.3\" fill=\"#ffffff\" />',Cn='<svg width=\"26\" height=\"32\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m 16.8,29.4 c 0,-1.1 -1.8,-2 -4,-2 -2.2,0 -4.01,0.9 -4.01,2 0,1.1 1.81,2 4.01,2 2.2,0 4,-0.9 4,-2\" style=\"fill:#878787\"/><path d=\"m 24.1,17.8 c 1.6,-1.6 1.6,-3.8 0,-5.7 L 15.8,1.9 C 15,0.998 14,0.498 12.9,0.498 11.8,0.498 10.7,1.1 10,1.9 L 1.7,12.1 c -1.6,1.9 -1.6,4.1 0,5.7 L 12.9,29 24.1,17.8 z\" stroke=\"#fff\" stroke-width=\"1\" fill=\"{{color}}\" />{{icon}}</svg>',\nHn='<svg width=\"26\" height=\"32\" xmlns=\"http://www.w3.org/2000/svg\"><circle cx=\"13\" cy=\"15\" r=\"11\" fill=\"{{color}}\" stroke=\"#ffffff\" stroke-width=\"1\"/><rect x=\"6\" y=\"13\" width=\"14\" height=\"5\" fill=\"#ffffff\" /></svg>';function Jn(a,b,c){c=c?c:{};c.criticality||(c.criticality=\"major,critical\");if(!(a instanceof um))throw Error(\"IllegalArgument: service\");eh.call(this,{max:20,min:8,requestData:z(this.wa,this)});this.I=new Bn;this.P=a;this.b=c;this.j=z(this.j,this);this.U=setInterval(this.j,b||18E4)}v(Jn,eh);r(\"H.service.TrafficIncidentsProvider\",Jn);Jn.prototype.f={minor:\"HIGH\",\"low impact\":\"HIGH\",major:\"VERYHIGH\",critical:\"BLOCKING\"};\nJn.prototype.wa=function(a,b,c,d,e){var f=this,g=this.f,h=this.I;return this.P.b(a,b,c,function(a){var b=[];a=a.TRAFFIC_ITEMS;var c,e,q,t;if(a)for(a=a.TRAFFIC_ITEM,t=a.length;t--;){c=a[t];e=c.TRAFFIC_ITEM_TYPE_DESC;switch(e){case \"ACCIDENT\":case \"CONGESTION\":q=e;break;case \"CONSTRUCTION\":q=\"ROADWORKS\";break;default:q=\"OTHER\"}q=h.sb(q,g[c.CRITICALITY.DESCRIPTION]);e=c.LOCATION.GEOLOC.ORIGIN;e=new xi({lat:e.LATITUDE,lng:e.LONGITUDE},{provider:f,icon:q});e.g(c);b.push(e)}d(b)},e,this.b)};\nJn.prototype.J=function(){eh.prototype.J.call(this);clearInterval(this.U)};function Kn(a){var b;if(a)for(this.a={},b=a.length;b--;)this.a[a[b]]=!0;this.hh={}}var Ln;Kn.prototype.a={};Kn.prototype.parse=function(a,b,c){var d,e,f,g,h,k;Ln=!1;try{c=ym.JSON.parse(c)}catch(l){Ln=!0}if(c&&(d=c.metadata))for(e in k={spatials:[]},d){if(c=!this.a[e]&&(f=Mn[e]))(g=d[e])||(Ln=!0,g=void 0),c=g;if(c)for(c=g.length;c--;){var m;(m=g[c])||(Ln=!0,m=void 0);(h=m)&&f(b,a,this,e,h,k)}}else Ln=!0;return Ln?void 0:k};r(\"H.service.metaInfo.Parser.prototype.parse\",Kn.prototype.parse);\nvar Mn={\"street labels\":function(a,b,c,d,e,f){var g;(g=e.vertices)||(Ln=!0,g=void 0);if(g){var h=g.length,k,l,m;(l=0<h)||(Ln=!0,l=void 0);if(l)for(k=Array(h/2);h;)m=g[--h],l=g[--h],k[h/2]=new M(l,m);k=k?{Ra:[k]}:A;h=+e[\"font size\"]/a.Wb;g=c.hh[h];g||(Nn.lineWidth=h,g=c.hh[h]=c.hb.f(Nn));On(a,b,k,!1,g,e,d,f)}delete e.vertices},\"city center labels\":function(a,b,c,d,e,f){On(a,b,Pn(e,new Sf([])),!0,c.hb,e,d,f)},labels:function(a,b,c,d,e,f){var g;(g=e[\"bounding boxes\"])||(Ln=!0,g=void 0);if(g){for(var h=\ng.length,k=new Sf([]),l;h--;){var m;(m=g[h])||(Ln=!0,m=void 0);(l=m)&&Pn(l,k)}On(a,b,k,!0,c.hb,e,d,f)}delete e[\"bounding boxes\"]},buildings:function(a,b,c,d,e,f){var g=e.id,h=b.lc[g],k,l,m,n=[],q=[];(k=e)||(Ln=!0,k=void 0);if(k&&((l=k.vertices)||(Ln=!0,l=void 0),l)){var t;(t=k.polygons)||(Ln=!0,t=void 0);(m=t)&&n.push.apply(n,Qn(l,m));(k=k.outlines)||(Ln=!0,k=void 0);(m=k)&&q.push.apply(q,Qn(l,m))}m=n.length;n.push.apply(n,q);q=new Sf(n,Lb,m);(n=n.length)||(Ln=!0,n=void 0);n&&(h?(mn(h,a,[q]),f.spatials.push(h)):\n(h=On(a,b,q,!0,c.hb,e,d,f,g),b.V(h)))}};Mn[\"transit stops\"]=Mn.POIs=Mn.labels;var Rn=[\"box 2\",\"box 1\",\"annotation box\",\"icon box\"];function Pn(a,b){for(var c=Rn.length,d,e;c--;)if(d=Rn[c],e=a[d]){var f=e[0],g=e[1],h=e[2];e=e[3];b.Ra.push([new M(f,g),new M(f+h,g),new M(f+h,g+e),new M(f,g+e)]);delete a[d]}return b}\nfunction Qn(a,b){var c=b.length,d,e,f,g,h;if(0<c)for(e=Array(c);c--;)if((d=b[c])||(Ln=!0,d=void 0),d&&(g=d.length,0<g))for(e[c]=f=Array(g);g--;)h=2*d[g],f[g]=new M(a[h],a[h+1]);return e||[]}var Sn={};function On(a,b,c,d,e,f,g,h,k){Sn.style=e;d=new hn(b,d,k,Sn);c&&mn(d,a,[c]);Tn(f);f.category=g;d.g(f);h.spatials.push(d);d.ia(b);return d}Kn.prototype.hb=new zf({strokeColor:\"transparent\",fillColor:\"transparent\",lineWidth:0});var Nn={};\nfunction Tn(a){var b,c=!1;switch(typeof a){case \"object\":if(a instanceof Array)for(b=a.length;b--;)Tn(a[b])?c=!0:delete a[b];else if(a)for(b in a)Tn(a[b])?c=!0:delete a[b];break;case \"number\":c=!0;break;default:c=!!a}return c};function Un(a,b,c){c=c||{};b=b||{};var d=c.tileType||\"maptile\",e=c.aj||\"normal.day\";N.call(this,{min:0,max:20});!0===b.pois&&(b.pois=\"!F\");this.b=b;if(!(a&&a instanceof Vn))throw Error(\"InvalidArgument: service required\");this.O=a;this.I=z(this.I,this);this.O.addEventListener(\"versionupdate\",this.I);this.f=a.aa().clone().R(d+\"/\"+a.Cb()+\"/\"+e).$(this.ea).$(b);this.Ua=a.g||null;this.wa=c.pixelRatio||c.pixelratio||1;this.tileSize=c.tileSize||256;this.tileType=d;this.scheme=e;this.C=new Qm(new Kn(c.categoryFilter));\nthis.C.ia(this);this.U=z(this.U,this);this.C.addEventListener(\"update\",this.U);N.call(this,{min:0,max:20});this.N(new Vg(c.tileCacheSize||256,z(this.Xa,this)))}v(Un,N);r(\"H.service.metaInfo.TileProvider\",Un);Un.prototype.Xa=function(a,b){for(var c=b.a,d=c.length,e;d--;)e=c[d],delete e.Ic[b.key],e.v();b.data&&(Fm.push(b.o(),this.tileSize),b.m())};Un.prototype.U=function(){this.dispatchEvent(\"update\")};\nUn.prototype.c=function(a,b,c,d,e){var f=this.f.clone(),g=this.Ua,h=this.tileSize,k=this.getTileKey(a,b,c),k=this.g.get(k),l,m,n;k&&!k.yc()?(d(Fm.pop(this.tileSize),null),l={cancel:function(){}}):(g&&f.xa(g[(c+b+a)%g.length]),f.R(c+\"/\"+a+\"/\"+b+\"/\"+h+\"/png8\"),m=ym.setTimeout(function(){n=(new Gh(\"text/plain\",f.toString())).then(function(a){d(null,a)},e)},500));return l||{cancel:function(){n?n.cancel():ym.clearTimeout(m)}}};Un.prototype.requestInternal=Un.prototype.c;\nUn.prototype.P=function(a,b,c,d,e){var f=this.C,g;g=d||Fm.pop(this.tileSize);if(d)a=this.g.get(this.getTileKey(a,b,c)),a.ca(d);else if(d=a=new Yk(this.A(a,b,c),a,b,c,this.tileSize,this.wa,c+0,f),delete d.i,d.v=e,a.ca(g))for(e=a.a,g=e.length;g--;)e[g].Ib();else Fm.push(g,this.tileSize);return a};Un.prototype.createTileInternal=Un.prototype.P;Un.prototype.J=function(){this.C.J();this.O.removeEventListener(\"versionupdate\",this.I);N.prototype.J.call(this)};\nUn.prototype.I=function(){var a=this.O;this.f=a.aa().clone().R(this.tileType+\"/\"+a.Cb()+\"/\"+this.scheme).$(this.ea).$(this.b);this.j(!1)};Un.prototype.ea={metadata:\"metaonly\",mgen:\"2\"};function Vn(a){a=rm(sm.maptile,a||{});I.call(this);this.f=a.baseUrl;this.c=a.path;this.i=a.subDomain;this.g=a.shards;this.ra=(this.v=!!a.ignoreTypes)?null:a.type;this.b=a.version;this.m=new vm}v(Vn,I);r(\"H.service.metaInfo.Service\",Vn);function Wn(a,b){for(var c={},d=a[b+\"s\"][b],e=d.length;e--;)c[d[e].id]=d[e];a[b+\"s\"]=c}Vn.prototype.W=function(a,b,c,d,e){this.a=(this.f||e).clone();this.i&&this.a.xa(this.i);this.ra&&this.a.xa(this.ra);this.c&&this.a.mc(this.c);\"newest\"===this.b&&Xn(this);return this};\nVn.prototype.configure=Vn.prototype.W;Vn.prototype.aa=function(){return this.a};Vn.prototype.Cb=function(){return this.b};Vn.prototype.getVersion=Vn.prototype.Cb;Vn.prototype.Ia=function(){return this.m};Vn.prototype.getCopyrights=Vn.prototype.Ia;\nfunction Xn(a){var b=a.aa().clone().R(\"info\").$({output:\"json\"});a.g&&b.xa(a.g[0]);om({url:b,xd:\"callback_func\",oc:function(b){b=JSON.parse(b.replace(/,\\s?\\]/g,\"]\")).response;var d;Wn(b,\"map\");Wn(b,\"scheme\");Wn(b,\"tiletype\");Wn(b,\"format\");Wn(b,\"resolution\");Wn(b,\"language\");if(\"newest\"===a.b&&\"traffic\"!==a.ra)for(d in b.maps)b.maps[d].hash&&b.maps[d].newest&&(a.b=b.maps[d].hash,a.dispatchEvent(\"versionupdate\"));a.l=b;a.dispatchEvent(\"infoupdate\")},Zc:function(a){throw Error(\"[\"+a+\"]: Could not fetch meta-info from map tile service @\"+\nb.toString());},rf:!0})}Vn.prototype.s=function(){return this.l};Vn.prototype.getInfo=Vn.prototype.s;Vn.prototype.o=function(a,b,c,d,e,f){return new Un(this,d,{tileSize:a,pixelRatio:b,categoryFilter:c,tileType:e,scheme:f})};Vn.prototype.createTileProvider=Vn.prototype.o;Vn.prototype.j=function(a,b,c,d,e,f){a=this.o(a,b,c,d,e,f);return new oh(a)};Vn.prototype.createTileLayer=Vn.prototype.j;\nU.prototype.j=function(a){var b;b=rm(sm.metainfotile,a||{});var c;c=\"\"+(b.ignoreTypes?\"\":b.type);c+=b.path;c+=b.subDomain;c+=b.baseUrl;c+=b.shards?b.shards.join(\"\"):\"\";b=xm(c);c=this.a[\"meta\"+b];c||(c=this.W(new Vn(a)),this.a[\"meta\"+b]=c);return c};U.prototype.getMetaInfoService=U.prototype.j;sm.metainfotile={type:\"base\",version:\"newest\",subDomain:\"maps\",path:\"maptile/2.1\",shards:[\"1\",\"2\",\"3\",\"4\"]};U.prototype.F=function(a,b,c,d,e,f){var g=this.b(),h=this.b({type:\"aerial\"}),k=this.b({type:\"traffic\"}),l=this.b({type:\"pano\"}),m=this.j(),n=this.o(),q=this.m(),t={},u={crossOrigin:\"anonymous\"},y;\"object\"===typeof a&&(f=a,u.crossOrigin=\"crossOrigin\"in f?f.crossOrigin:\"anonymous\",a=f.tileSize,b=f.ppi,c=f.lg,d=f.lg2,e=f.style,f=f.pois);a=a||256;y=320===b?2:1;320===b&&(t.ppi=b);c&&(t.lg=c);d&&(t.lg2=d);e&&(t.style=e);f&&(t.pois=f);b=new Jn(n,void 0,c?t:null);this.U=new uh(b);return{normal:{xbase:g.b(\"xbasetile\",\n\"normal.day\",a,\"png8\",t,1,!1,u),xbasenight:g.b(\"xbasetile\",\"normal.night\",a,\"png8\",t,1,!1,u),base:g.b(\"basetile\",\"normal.day\",a,\"png8\",t,1,!1,u),basenight:g.b(\"basetile\",\"normal.night\",a,\"png8\",t,1,!1,u),map:g.b(\"maptile\",\"normal.day\",a,\"png8\",t,1,!1,u),mapnight:g.b(\"maptile\",\"normal.night\",a,\"png8\",t,1,!1,u),traffic:k.b(\"traffictile\",\"normal.day\",a,\"png8\",t,1,!1,u),trafficnight:k.b(\"traffictile\",\"normal.night\",a,\"png8\",t,1,!1,u),transit:g.b(\"maptile\",\"normal.day.transit\",a,\"png8\",t,1,!1,u),panorama:l.b(\"rctile\",\n\"normal.day\",a,\"png8\",t,1,!1,u),panoramanight:l.b(\"rctile\",\"normal.night\",a,\"png8\",t,1,!1,u),labels:g.b(\"labeltile\",\"normal.day\",a,\"png\",t,1,!1,u),metaInfo:m.j(a,y,[\"buildings\"],t)},satellite:{xbase:h.b(\"xbasetile\",\"hybrid.day\",a,\"jpg\",t,1,!0,u),base:h.b(\"basetile\",\"hybrid.day\",a,\"jpg\",t,1,!0,u),map:h.b(\"maptile\",\"hybrid.day\",a,\"jpg\",t,1,!0,u),traffic:k.b(\"traffictile\",\"hybrid.day\",a,\"jpg\",t,1,!0,u),panorama:l.b(\"rctile\",\"hybrid.day\",a,\"jpg\",t,1,!0,u),labels:h.b(\"labeltile\",\"hybrid.day\",a,\"png\",t,\n1,!0,u)},terrain:{xbase:h.b(\"xbasetile\",\"terrain.day\",a,\"jpg\",t,1,!1,u),base:h.b(\"basetile\",\"terrain.day\",a,\"jpg\",t,1,!1,u),map:h.b(\"maptile\",\"terrain.day\",a,\"jpg\",t,1,!1,u),traffic:k.b(\"traffictile\",\"terrain.day\",a,\"jpg\",t,1,!1,u),panorama:l.b(\"rctile\",\"terrain.day\",a,\"jpg\",t,1,!1,u),labels:h.b(\"labeltile\",\"terrain.day\",a,\"png\",t,1,!1,u)},incidents:this.U,venues:q.i({tileSize:a,pixelRatio:y})}};U.prototype.createDefaultLayers=U.prototype.F;function Yn(a){a=rm(sm.routing,a);a.callbackKey=\"jsoncallback\";Yn.u.constructor.call(this,a)}v(Yn,pm);r(\"H.service.RoutingService\",Yn);Yn.prototype.W=function(a,b,c,d,e){Yn.u.W.apply(this,[a,b,c,d,e]);this.f&&(this.a=this.f.clone(),this.a.$({app_id:a,app_code:b}));return this};Yn.prototype.configure=Yn.prototype.W;Yn.prototype.g=function(a,b,c){a=this.aa().clone().R(\"calculateroute.json\").$(a);qm(this,a,b,c)};Yn.prototype.calculateRoute=Yn.prototype.g;\nYn.prototype.b=function(a,b,c){a=this.aa().clone().xa(\"isoline\").R(\"calculateisoline.json\").$(a);qm(this,a,b,c)};Yn.prototype.calculateIsoline=Yn.prototype.b;sm.routing={subDomain:\"route\",path:\"routing/7.2\"};U.prototype.O=function(a){return this.W(new Yn(a))};U.prototype.getRoutingService=U.prototype.O;function Zn(a){a=rm(sm.geocoding,a);a.callbackKey=\"jsoncallback\";Zn.u.constructor.call(this,a);this.b=a.reverseSubDomain}v(Zn,pm);r(\"H.service.GeocodingService\",Zn);Zn.prototype.W=function(a,b,c,d,e){Zn.u.W.apply(this,[a,b,c,d,e]);this.f&&(this.a=this.f.clone(),this.a.$({app_id:a,app_code:b}));return this};Zn.prototype.configure=Zn.prototype.W;Zn.prototype.g=function(a,b,c){a=this.aa().clone().R(\"geocode.json\").$(a);return qm(this,a,b,c)};Zn.prototype.geocode=Zn.prototype.g;\nZn.prototype.l=function(a,b,c){a=this.aa().clone().R(\"reversegeocode.json\").$(a);this.b&&a.xa(this.b);return qm(this,a,b,c)};Zn.prototype.reverseGeocode=Zn.prototype.l;Zn.prototype.i=function(a,b,c){a=this.aa().clone().R(\"search.json\").$(a);return qm(this,a,b,c)};Zn.prototype.search=Zn.prototype.i;sm.geocoding={subDomain:\"geocoder\",path:\"6.2\",reverseSubDomain:\"reverse\"};U.prototype.I=function(a){return this.W(new Zn(a))};U.prototype.getGeocodingService=U.prototype.I;function $n(a){a=rm(sm.places,a);a.callbackKey=\"callback\";$n.u.constructor.call(this,a)}v($n,pm);r(\"H.service.PlacesService\",$n);$n.EntryPoint={SEARCH:\"discover/search\",SUGGEST:\"suggest\",EXPLORE:\"discover/explore\",AROUND:\"discover/around\",HERE:\"discover/here\",CATEGORIES:\"categories/places\"};$n.prototype.b=function(a,b,c,d){b=b||{};a=this.aa().clone().R(a).$(b);return qm(this,a,c,d)};$n.prototype.request=$n.prototype.b;$n.prototype.m=function(a,b,c){return this.b(\"discover/search\",a,b,c)};\n$n.prototype.search=$n.prototype.m;$n.prototype.v=function(a,b,c){return this.b(\"suggest\",a,b,c)};$n.prototype.suggest=$n.prototype.v;$n.prototype.l=function(a,b,c){return this.b(\"discover/explore\",a,b,c)};$n.prototype.explore=$n.prototype.l;$n.prototype.g=function(a,b,c){return this.b(\"discover/around\",a,b,c)};$n.prototype.around=$n.prototype.g;$n.prototype.j=function(a,b,c){return this.b(\"discover/here\",a,b,c)};$n.prototype.here=$n.prototype.j;\n$n.prototype.i=function(a,b,c){return this.b(\"categories/places\",a,b,c)};$n.prototype.categories=$n.prototype.i;$n.prototype.o=function(a,b,c,d){a=km(a);d&&a.$(d);return qm(this,a,b,c)};$n.prototype.follow=$n.prototype.o;sm.places={subDomain:\"places\",path:\"places/v1\"};U.prototype.P=function(){return this.W(new $n)};U.prototype.getPlacesService=U.prototype.P;function ao(a){a=rm(sm.enterpriseRouting,a);a.callbackKey=\"jsoncallback\";if(!B(a.baseUrl,S))throw new C(ao,0,\"Invalid base url\");this.i=a;ao.u.constructor.call(this,a)}v(ao,pm);r(\"H.service.EnterpriseRoutingService\",ao);ao.prototype.j=function(a,b,c){a=this.aa().clone().R(\"calculateroute.json\").$(a);qm(this,a,b,c)};ao.prototype.calculateRoute=ao.prototype.j;ao.prototype.g=function(a,b,c){a=this.aa().clone().R(\"getroute.json\").$(a);qm(this,a,b,c)};ao.prototype.getRoute=ao.prototype.g;\nao.prototype.b=function(a,b,c){a=this.aa().clone().R(\"getlinkinfo.json\").$(a);qm(this,a,b,c)};ao.prototype.getLinkInfo=ao.prototype.b;ao.prototype.l=function(a,b,c){a=this.aa().clone().R(\"calculateisoline.json\").$(a);qm(this,a,b,c)};ao.prototype.calculateIsoline=ao.prototype.l;ao.prototype.W=function(a,b,c,d,e){var f,g=sm.enterpriseRouting;this.i.baseUrl===g.baseUrl&&e&&(f=e.clone(),f.nd(g.host||g.baseUrl.vc),d&&f.xa(g.citSubDomain));return pm.prototype.W.apply(this,[a,b,c,d,f])};\nao.prototype.configure=ao.prototype.W;var bo={subDomain:\"route\",path:\"routing/6.2\",baseUrl:new S(\"http\",\"nlp.nokia.com\"),host:\"nlp.nokia.com\",citSubDomain:\"st\"};sm.enterpriseRouting=bo;U.prototype.K=function(a){return this.W(new ao(a))};U.prototype.getEnterpriseRoutingService=U.prototype.K;function co(){}r(\"H.service.extension.dataView.ITable\",co);co.prototype.getMeta=co.prototype.cd;co.prototype.getRowCount=co.prototype.g;co.prototype.getRow=co.prototype.Qb;co.prototype.getColumnNames=co.prototype.c;co.prototype.getColumn=co.prototype.l;co.prototype.getCell=co.prototype.f;co.prototype.concat=co.prototype.concat;function eo(){}r(\"H.service.extension.dataView.IRow\",eo);eo.prototype.getColumnNames=eo.prototype.c;eo.prototype.getCell=eo.prototype.a;eo.prototype.getTable=eo.prototype.uc;function fo(a,b){this.b=a;this.f=b}r(\"H.service.extension.dataView.ObjRow\",fo);fo.prototype.c=function(){return this.b.c()};fo.prototype.getColumnNames=fo.prototype.c;fo.prototype.a=function(a){return this.b.f(this.f,a)};fo.prototype.getCell=fo.prototype.a;fo.prototype.uc=function(){return this.b};fo.prototype.getTable=fo.prototype.uc;function go(){}r(\"H.service.extension.dataView.IColumn\",go);go.prototype.getCell=go.prototype.a;function ho(a,b){this.c=a;this.b=b}r(\"H.service.extension.dataView.ObjColumn\",ho);ho.prototype.a=function(a){return this.c.f(a,this.b)};ho.prototype.getCell=ho.prototype.a;function io(a,b,c){var d;b=b||(a&&a.length?Object.keys(a[0]):A);this.cb=a;if(b)for(this.qc=b,this.we=a=Ka(),d=b.length;d--;)a[b[d]]=!0;c!==A&&(this.cf=c)}r(\"H.service.extension.dataView.ObjTable\",io);p=io.prototype;p.cf=A;p.cb=A;p.qc=A;p.we=A;p.cd=function(){return this.cf};io.prototype.getMeta=io.prototype.cd;io.prototype.g=function(){return this.cb?this.cb.length:0};io.prototype.getRowCount=io.prototype.g;io.prototype.Qb=function(a){var b=this.cb;return b&&b[a]?new fo(this,a):A};\nio.prototype.getRow=io.prototype.Qb;io.prototype.c=function(){return this.qc||De};io.prototype.getColumnNames=io.prototype.c;io.prototype.l=function(a){return this.we[a]?new ho(this,a):A};io.prototype.getColumn=io.prototype.l;io.prototype.f=function(a,b){var c=this.cb;return(c=c&&this.we[b]&&c[a])&&c[b]};io.prototype.getCell=io.prototype.f;\nio.prototype.concat=function(){var a=arguments.length,b,c=this.qc,d=\"\"+this.qc,e=(this.cb||[]).slice(),f;for(b=0;b<a;b++){f=arguments[b];if(!(f instanceof io))throw new C(this.concat,b);if(f.cb){if(c&&\"\"+f.qc!==d)throw new C(this.concat,b,\"Incompatible columns!\");e=e.concat(f.cb)}}return new io(e,this.qc,this.cf)};io.prototype.concat=io.prototype.concat;function jo(a,b){a.cb?a.cb.push(b):a.cb=[b];return a.cb.length-1};function ko(a,b,c,d){if(!a||!ra(we(a.layerId,a.layer))||!ab(a.level)||Ta(a.rowFilter)&&!sa(a.rowFilter)||Ta(a.rowFilterContext)&&!Pa(a.rowFilterContext))throw new C(b,c,Ta(d)?d:a);};function lo(a,b,c){var d;B(a,mo,lo,0,\"has invalid type\");B(b,G,lo,1,\"has invalid type\");if(!Za(c))throw new C(lo,2,\"has invalid type\");for(d=0;d<c.length;d++)ko(c[d],lo,2,\"has invalid type\");lo.u.constructor.call(this);this.a=b;this.b=c;(new Lh).md(no,\"H.service.extension.worker.processor\");a=a.aa().clone().R(oo+\".\"+po).$({meta:\"1\"});new Nh(no,{message:[qo,0,{serverUrl:a.toString()}]})}v(lo,I);r(\"H.service.extension.platformData.SearchRequest\",lo);\nlo.prototype.send=function(){var a=no,b=qo,c=[],d,e,f,g=this;for(f=0;f<this.b.length;f++)d=this.b[f],c.push({layerId:we(d.layerId,d.layer),level:d.level,rowFilter:Ta(d.rowFilter)?d.rowFilter+\"\":A,rowFilterContext:d.rowFilterContext,columns:d.columns});e=[this.a.ka,this.a.ga,this.a.ja,this.a.ha,c];this.c=w.setTimeout(function(){(new Nh(a,{message:[b,2,e]})).then(z(ro,g),z(so,g))},1)};lo.prototype.send=lo.prototype.send;lo.prototype.cancel=function(){w.clearTimeout(this.c)};lo.prototype.cancel=lo.prototype.cancel;\nfunction ro(a){var b,c;for(c=0;c<a.length;c++){b=a[c].Rows;for(var d=b.length,e=void 0;d--;)e=b[d],e.geometry&&(e.geometry=[e.geometry.path]);b=new io(b,null,a[c].Meta);this.dispatchEvent(new Cc(\"data\",b))}this.dispatchEvent(new Bc(\"end\"))}function so(a){this.dispatchEvent(new Dc(\"error\",a))}var no=\"pde\",qo=\"pdeSearchRequestProvider\";function to(a,b,c){var d=uo,e=a===d.POLYGON,f=a===d.POLYLINE;this.b=b;this.c=c||sc;(this.a=f||e)?this.l=e:this.g=a===d.MARKER;this.f=this.a?\"$HProjGeometry\":\"geometry\"}\nto.prototype.parse=function(a,b,c){var d,e,f,g,h,k={},l=[],m,n,q,t;m=0;for(n=c.length;m<n;m++)if(d=c[m],q=d.Rows,d=q.length)for(e=Object.keys(q[0]).filter(function(a){return\"geometry\"!==a&&\"$HProjGeometry\"!==a}),e=new io(q,e),t=0;t<d;t++)if(f=q[t],h=f[this.f]){if(delete f[this.f],f=e.Qb(t))try{this.a?g=vo(this,a,b,f,h):g=wo(this,a,f,h.path),g.ia(a),l.push(g)}catch(u){this.c(u.message)}}else this.c(\"Layer must contain geometries\");k[this.a?\"spatials\":this.g?\"markers\":\"domMarkers\"]=l;return k};\nfunction vo(a,b,c,d,e){var f=[],g=e.paths,h=g.length,k=0,l=a.b&&a.b(d);for(a=new hn(b,a.l,A,{style:l||a.i,data:d});k!==h;)f.push(xo(g[k++]));mn(a,c,[new Sf(f,e.interiorsIndex,e.outlinesIndex)]);return a}function wo(a,b,c,d){d=new gc(d[0],d[1]);var e=a.b&&a.b(c);a.g?(a={icon:e,data:c,provider:b},a=new xi(d,a)):(a={icon:e,data:c,provider:b},a=new fh(d,a));return a}function xo(a){for(var b=0,c=a.length,d=[];b<c;)d.push(new M(a[b++],a[b++]));return d};function yo(a){a=a||{};var b=a.tileCacheSize||1024,c=a.resultType,d=a.styleCallback,e=uo;Ta(a.min)||(a.min=12);yo.u.constructor.call(this,a);if(-1===zo.indexOf(c))throw new C(yo,2,\"invalid resultType\");this.b=c;if(d&&!sa(d))throw new C(yo,2,\"invalid style callback\");this.ea=d;this.U=a.pixelRatio||1;this.f=z(this.f,this);this.N(new Vg(b,z(this.fi,this)));this.createTileInternal=c===e.POLYLINE||c===e.POLYGON?z(this.Nh,this):z(this.Mh,this)}v(yo,N);r(\"H.service.extension.TileProvider\",yo);\nyo.prototype.I=!1;var Ao=ri.prototype.Pc.READY;yo.prototype.o=function(a,b,c,d){return this.I?yo.u.o.call(this,a,b,c,d):A};yo.prototype.requestTile=yo.prototype.o;yo.prototype.f=function(a){a=ra(a)?a:a+\"\";this.dispatchEvent(new Dc(\"error\",a,this))};yo.prototype.l=function(){return this.b===uo.MARKER};yo.prototype.providesMarkers=yo.prototype.l;yo.prototype.i=function(){return this.b===uo.DOM_MARKER};yo.prototype.providesDomMarkers=yo.prototype.i;\nyo.prototype.s=function(){return this.b===uo.POLYLINE||this.b===uo.POLYGON};yo.prototype.providesSpatials=yo.prototype.s;function Bo(a){a.C||(a.O||(a.O=a.P(a.b,a.ea,a.f)),a.C=new Qm(a.O),a.C.ia(a),a.C.addEventListener(a.F.la,z(a.ei,a)),a.C.P=!0);return a.C}p=yo.prototype;\np.Mh=function(a,b,c,d){var e=this.getTileKey(a,b,c),e=this.g.get(e),f=this.b==uo.DOM_MARKER,g=[],h=Bo(this);e?e.valid=!0:(a=e=new $g(a,b,c,x),delete a.i,a.v=d);d=f?Um(h,e,\"domMarkers\"):Um(h,e,\"markers\");for(b=d.length;b--;)a=d[b],a.If=e,(f||a.sb().getState()===Ao)&&g.push(a);e.data=g;return e};p.ei=function(a){if(a=a.target.If)a.valid=!1};\np.Nh=function(a,b,c,d){var e=Bo(this),f,g=this.getTileKey(a,b,c),h=this.g.get(g);f=Fm.pop(this.tileSize);h||(a=h=new Yk(g,a,b,c,this.tileSize,this.U,c,e),delete a.i,a.v=d);h.ca(f)||Fm.push(f,this.tileSize);return h};p.fi=function(a,b){var c,d;c=uo;if(this.b===c.POLYLINE||this.b===c.POLYGON){c=b.a;for(d=c.length;d--;)delete c[d].Ic[b.key];b.data&&(Fm.push(b.o(),this.tileSize),b.m())}else for(c=b.data,d=c.length;d--;)delete c[d].If};p.D=function(){yo.u.D.call(this);Bo(this).J()};\nvar uo={MARKER:0,DOM_MARKER:1,POLYLINE:2,POLYGON:3};yo.ResultType=uo;var zo=[uo.MARKER,uo.DOM_MARKER,uo.POLYLINE,uo.POLYGON];function Do(a,b,c){var d=this,e=b&&b.rowFilter,f=c.resultType,g=uo;Do.u.constructor.call(this,c);B(a,mo,Do,0);ko(b,Do,1,\"invalid layer config\");e?(c=Qa(b),c.rowFilter=e.toString()):c=Qa(b);delete c.layer;c.layerId=we(b.layerId,b.layer);(new Lh).md(\"pde\",\"H.service.extension.worker.processor\");a=a.aa().clone().R(oo+\".\"+po).$({meta:1});(new Nh(\"pde\",{message:[this.uid,0,{tileSize:this.tileSize,projected:!0,onlyOutline:f===g.POLYLINE,serverUrl:a.toString(),layerConfigs:[c]}]})).then(function(){d.I=\n!0;Rg(d)},this.f)}v(Do,yo);r(\"H.service.extension.platformData.TileProvider\",Do);Do.prototype.P=function(a,b,c){a=new to(a,b,c);a.i=Eo;return a};var Eo=new zf({strokeColor:\"transparent\",fillColor:\"transparent\",lineWidth:0,lineJoin:\"round\",lineCap:\"round\"});\nDo.prototype.c=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h,g=this.g.get(g),k={cancel:sc},l=!0,m,n=uo;g&&(this.b===n.POLYLINE||this.b===n.POLYGON?g.yc()||(d(Fm.pop(this.tileSize),null),l=!1):(d(x),l=!1));l&&(m=ym.setTimeout(function(){h=new Nh(\"pde\",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500),k.cancel=function(){h?h.cancel():ym.clearTimeout(m)});return k};Do.prototype.requestInternal=Do.prototype.c;Do.prototype.D=function(){Do.u.D.call(this);new Nh(\"pde\",{message:[this.uid,3]})};\nDo.ResultType=uo;function Fo(a,b,c,d,e,f){Go(Fo,1,b,c);Go(Fo,2,d,e);(this.f=a.length)?(this.m=a,this.o=b,this.i=c,this.b=0,this.c=z(this.c,this),this.j=d,this.l=e,this.a=Ka(),Ca(this.a,Ho,f||{}),this.g={},w.setTimeout(this.c,0)):b(De,!0)}var Ho={duration:100,Yh:\"geometry\",Xh:\"WKT\",Ai:\"searchAttributes\",cg:A};\nFo.prototype.c=function(){var a,b,c,d=[];a=!1;for(var e=tj(),f;this.b<this.f;){b=this.m[this.b];a=b.attributes;f=b.layerId||this.a.cg;b.distance&&(a[this.a.Ai]={nearest:new gc(b.nearestLat,b.nearestLon),distance:b.distance});if(b=b[this.a.Yh]){try{c=ug(new Pg(b))}catch(g){this.i(new w.Error(g.message));a=!0;break}a[this.a.Xh]=c}(b=this.g[f])||(b=this.g[f]=this.j({layerId:f,columnNames:Object.keys(a)}));a=this.l(b,a);d.push(a);this.b++;if((a=this.b===this.f)||tj()-e>=this.a.duration){this.o(d,a);break}}a?\nthis.g=x:this.fe=w.setTimeout(this.c,0)};Fo.prototype.cancel=function(){w.clearTimeout(this.fe);this.b<this.f&&this.i(new w.Error(\"parsing canceled\"))};r(\"H.service.extension.util.AsyncParser.prototype.cancel\",Fo.prototype.cancel);function Io(a){this.a=a}Io.prototype.cancel=function(){for(var a=this.a,b=a.length;b--;)a[b].cancel();a.length=0};function Go(a,b,c,d){if(!sa(c))throw new C(a,b,\"has invalid type\");if(!sa(d))throw new C(a,b+1,\"has invalid type\");};function mo(a){a=rm(sm.pde,a||{});mo.u.constructor.call(this,a)}v(mo,pm);r(\"H.service.extension.platformData.Service\",mo);\nmo.prototype.b=function(a,b,c,d,e){var f=\"text/plain\";if(!a)throw new C(this.b,0,a);if(!b)throw new C(this.b,1,b);if(!d)throw new C(this.b,3,d);if(!e)throw new C(this.b,4,e);a=this.aa().clone().R(a+\".\"+b).$(c);b===Jo.JSON&&(f=\"application/json\");b=new Gh(f,a.toString());b.then(d,function(a){\"error\"===a.type?e(a.statusText||\"Unable to load data\"):a.json().then(function(a){e(a.error_description||a.message)},function(){e(a.statusText)})});return b};mo.prototype.request=mo.prototype.b;\nsm.pde={subDomain:\"pde\",path:\"1\"};var oo=\"tiles\";mo.EntryPoint={DOC_ATTRIBUTES:\"doc/attributes\",DOC_LAYER:\"doc/layer\",DOC_LAYERS:\"doc/layers\",DOC_MAPS:\"doc/maps\",DOC_INDEXES:\"doc/indexes\",SEARCH_BBOX:\"search/bbox\",SEARCH_CORRIDOR:\"search/corridor\",SEARCH_PROXIMITY:\"search/proximity\",SEARCH_QUADKEY:\"search/quadkey\",SERVICE_CONFIGURATION:\"serviceconfiguration\",STATIC:\"static\",TILE:\"tile\",TILES:oo,FILE:\"file\",INDEX:\"index\"};var po=\"json\",Jo={TXT:\"txt\",JSON:po,HTML:\"html\",BIN:\"bin\"};\nmo.EntryPointType=Jo;mo.prototype.j=function(a,b){var c=b&&b.resultType,d=new Do(this,a,b),e,f=uo;c==f.MARKER||c===f.DOM_MARKER?e=new uh(d):e=new oh(d);return e};mo.prototype.createTileLayer=mo.prototype.j;function Ko(a,b,c,d,e){var f=[],g,h=c.layer_id||c.layer_ids;a=a.b(b,po,c,function(a){g=new Fo(a.geometries,d,e,function(a){return new io([],a.columnNames,a)},function(a,b){return a.Qb(jo(a,b))},{cg:h});f.push(g)},function(a){e(new w.Error(a))});f.push(a);return new Io(f)}\nfunction Lo(a,b,c){if(!Za(a))throw new C(c,0,\"has invalid type\");if(!Za(b))throw new C(c,1,\"has invalid type\");if(a.length!==b.length||!a.length)throw new C(c,1,\"specify one key attribute for each given layer id in the same order\");}\nmo.prototype.l=function(a,b,c,d,e,f){function g(a,b){b&&h--;d(a,!h)}var h,k=[];Lo(a,b,this.l);Go(this.l,3,d,e);B(c,G,this.l,2);c={bbox:c.ka+\",\"+c.ga+\";\"+c.ja+\",\"+c.ha};f&&Ca(c,f);a=c.layer_id?[c.layer_id]:a;f=0;for(h=a.length;f<h;f++)c.layer_id=a[f],c.key_attribute=b[f],k.push(Ko(this,\"search/bbox\",c,g,e));return new Io(k)};mo.prototype.searchByBoundingBox=mo.prototype.l;\nmo.prototype.i=function(a,b,c,d,e,f,g){Lo(a,b,this.i);B(c,gc,this.i,1,\"has invalid type\");if(!ab(d))throw new C(this.i,2,\"has invalid type\");Go(this.i,4,e,f);a={layer_ids:a.join(\",\"),key_attributes:b.join(\",\"),proximity:c.lat+\",\"+c.lng+\",\"+d};g&&Ca(a,g);return Ko(this,\"search/proximity\",a,e,f)};mo.prototype.searchByProximity=mo.prototype.i;\nmo.prototype.g=function(a,b,c,d,e,f,g){var h=\"\";Lo(a,b,this.g);if(!ra(c)&&!B(c,F))throw new C(this.g,1,\"has invalid type\");if(!ab(d))throw new C(this.g,2,\"has invalid type\");Go(this.g,4,e,f);a={layer_ids:a.join(\",\"),key_attributes:b.join(\",\"),radius:d};if(ra(c))a.route_id=c;else{d=c.na;c=0;for(b=d.length;c<b;c+=3)h+=d[c]+\",\"+d[c+1],c<b-3&&(h+=\";\");a.corridor=h}g&&Ca(a,g);return Ko(this,\"search/corridor\",a,e,f)};mo.prototype.searchByCorridor=mo.prototype.g;\nU.prototype.T=function(a){var b;b=rm(sm.pde,a||{});var c;c=\"\"+(b.path||\"\");c+=b.subDomain||\"\";c+=b.baseUrl?b.baseUrl.toString():\"\";b=xm(c);c=this.a[\"pde\"+b];c||(c=this.W(new mo(a)),this.a[\"pde\"+b]=c);return c};U.prototype.getPlatformDataService=U.prototype.T;function Mo(a){a=rm(sm.gfe,a);Mo.u.constructor.call(this,a)}v(Mo,pm);r(\"H.service.extension.geofencing.Service\",Mo);sm.gfe={subDomain:\"gfe\",path:\"2\"};U.prototype.pb=function(a){return this.W(new Mo(a))};U.prototype.getGeofencingService=U.prototype.pb;Mo.prototype.W=function(a,b,c,d,e){Mo.u.W.apply(this,[a,b,c,d,e]);this.f&&(this.a=this.f.clone());return this};Mo.prototype.configure=Mo.prototype.W;\nMo.prototype.b=function(a,b,c,d){var e;if(!a)throw new C(this.b,0,a);if(!sa(c))throw new TypeError(\"onResult must be a function\");if(!sa(d))throw new TypeError(\"onError must be a function\");e=function(a){d(new w.Error(a))};a=this.aa().clone().R(a+\".json\").$(b);a=new Gh(\"application/json\",a.toString());a.then(c,function(a){\"error\"===a.type?e(a.statusText||\"Unable to load data\"):a.json().then(function(a){e(a.error_description||a.issues[0].message)},e)});return a};Mo.prototype.request=Mo.prototype.b;\nMo.EntryPoint={SEARCH_PROXIMITY:\"search/proximity\"};r(\"H.service.extension.customLocation.Permission\",{READ:\"read\",WRITE:\"write\",EXPORT:\"export\"});r(\"H.service.extension.customLocation.Storage\",{READONLY:\"readonly\",UPDATABLE:\"updatable\"});function No(){if(Oo)throw new kc(No);}r(\"H.service.extension.customLocation.Table\",No);var Oo=!0;function Po(a,b){var c,d,e,f;Oo=!1;c=new No;Oo=!0;c.j=Oa(w.JSON.parse(w.JSON.stringify(a)));d=a.columnNames;e=Ka();for(f=d.length;f--;)e[d[f]]=f;c.o=e;c.b=d.length;if(e=b){if(e.length%d.length)throw new C(Po,1,\"Invalid number of cells\");}else e=[];c.a=e;return c}No.prototype.cd=function(){return this.j};No.prototype.getMeta=No.prototype.cd;No.prototype.g=function(){return this.a.length/this.b};\nNo.prototype.getRowCount=No.prototype.g;No.prototype.Qb=function(a){return a<this.a.length/this.b?new Qo(this,a):A};No.prototype.getRow=No.prototype.Qb;No.prototype.v=function(){var a=this.a.length/this.b,b,c=new w.Array(a);for(b=0;b<a;b++)c[b]=new Qo(this,b);return c};No.prototype.getRows=No.prototype.v;No.prototype.qe=function(a){var b=this.b,c=this.a,d=c.length/this.b;if(!a||a.length%b)throw new C(this.qe,0,\"Invalid number of cells\");this.a=c.concat(a);return d};No.prototype.addCells=No.prototype.qe;\nNo.prototype.m=function(){for(var a=this.b,b=this.a,c=this.a.length/this.b;a--;)b.push(x);return this.Qb(c)};No.prototype.addRow=No.prototype.m;No.prototype.c=function(){return this.j.columnNames};No.prototype.getColumnNames=No.prototype.c;No.prototype.l=function(a){return this.o[a]===A?A:new Ro(this,a)};No.prototype.getColumn=No.prototype.l;No.prototype.f=function(a,b){return this.a[a*this.b+this.o[b]]};No.prototype.getCell=No.prototype.f;\nNo.prototype.i=function(a,b,c){b=this.o[b];if(a>=this.a.length/this.b)throw new C(this.i,0,\"Row index out of bounds\");if(b===A)throw new C(this.i,0,\"Column unknown\");this.a[a*this.b+b]=c};No.prototype.setCell=No.prototype.i;\nNo.prototype.concat=function(){var a=arguments.length,b,c=\"\"+this.c(),d=this.a?this.a.slice():[],e;for(b=0;b<a;b++){e=arguments[b];if(!(e instanceof No))throw new C(this.concat,b);if(\"\"+e.c()!==c)throw new C(this.concat,b,\"Incompatible columns!\");e.a&&(d=d.concat(e.a))}return Po(this.j,d)};No.prototype.concat=No.prototype.concat;var So=/(\\n|\\t|\\r|\")/;\nNo.prototype.Df=function(a,b){var c,d=this.b,e=this.c(),f=[],g,h=[],k=this.a,l=-1,m;for(c=0;c<d;c++)if(!a||a.test(e[c]))\"WKT\"===e[c]&&(l=f.length),f.push(c);if(!(g=f.length))throw new C(this.Df,1,\"No columns filtered\");To(this,h,e,0,d,f,g,l);if(b)for(m=b.length,c=0;c<m;c++)h.push(\"\\n\"),e=b[c],To(this,h,k,e,d,f,g,l);else for(m=this.g(),e=0;e<m;e++)h.push(\"\\n\"),To(this,h,k,e,d,f,g,l);return h.join(\"\")};\nfunction To(a,b,c,d,e,f,g,h){var k,l;for(k=0;k<g;k++)if(k&&b.push(\"\\t\"),l=c[d*e+f[k]],k!==h){if(l!==x){l=String(l);if(So.test(l))throw new C(a.Df,0,'Invalid character (\\\\n, \\\\r, \\\\t, or \") in row '+d+\" column \"+a.j.columnNames[f[k]]);b.push(l)}}else b.push(l)}function Ro(a,b){this.c=a;this.b=b}No.Column=Ro;Ro.prototype.a=function(a){return this.c.f(a,this.b)};Ro.prototype.getCell=Ro.prototype.a;Ro.prototype.f=function(a,b){this.c.i(a,this.b,b)};Ro.prototype.setCell=Ro.prototype.f;\nfunction Qo(a,b){this.b=a;this.Ve=b}No.Row=Qo;Qo.prototype.c=function(){return this.b.c()};Qo.prototype.getColumnNames=Qo.prototype.c;Qo.prototype.a=function(a){return this.b.f(this.Ve,a)};Qo.prototype.getCell=Qo.prototype.a;Qo.prototype.f=function(a,b){this.b.i(this.Ve,a,b)};Qo.prototype.setCell=Qo.prototype.f;Qo.prototype.uc=function(){return this.b};Qo.prototype.getTable=Qo.prototype.uc;function Uo(a){var b=Vo;if(!a||!ra(a.layerId)||Ta(a.rowFilter)&&!sa(a.rowFilter)||Ta(a.rowFilterContext)&&!Pa(a.rowFilterContext))throw new C(b,1,Ta(\"invalid layer config\")?\"invalid layer config\":a);}function Wo(a){return ra(a)&&/^[A-Z][A-Z0-9_]*$/.test(a)}function Xo(a){for(var b=a&&a.length,c=2<=b&&\"WKT\"===a[--b]&&\"GEOMETRY_ID\"===a[--b];c&&b--;)c=Wo(a[b]);return c}\nfunction Yo(a,b){var c=\"\",d,e,f,g,h,k=[];if(!b){g={};k=[];if(a.geometries)for(e=0;e<a.geometries.length;e++)f=a.geometries[e],g[f.layerId]||(g[f.layerId]=[]),g[f.layerId].push(f);for(d in g)k.push({layerId:d,geometries:g[d]});for(d=0;d<k.length;d++)c+=Yo(k[d],k[d].layerId)}else if(a.geometries&&a.geometries.length)for(h=Object.keys(a.geometries[0].attributes),c=c+(\"Meta:\\t\"+b+\"\\n\")+h.join(\"\\t\"),c+=\"\\tWKT\\n\",d=0;d<a.geometries.length;d++){g=a.geometries[d].attributes;f=a.geometries[d].geometry;for(e=\n0;e<h.length;e++)k.push(g[h[e]]);c+=k.join(\"\\t\");c+=\"\\t\"+f+\"\\n\";k=[]}return c};function Zo(a){if(a===A)a=\"\\t\";else if(!/^[^\"\\r\\n]$/.test(a))throw new C(Zo,0);this.b=String(a).charCodeAt(0);this.We=z(this.We,this);this.G=$o}var $o=0;p=Zo.prototype;p.getState=function(){return this.G};function ap(a,b,c){var d=a.G;if(d!==b)throw 1===d&&(a.G=$o),new kc(c,\"Requires state: \"+[\"READY\",\"PARSE\",\"PAUSE\"][b]+\" but found \"+[\"READY\",\"PARSE\",\"PAUSE\"][d]);}p.We=function(a){this.G=$o;throw new C(Zo.prototype.parse,0,\"Malformed DSV at row \"+this.a.o+\" column \"+this.a.c+\": \"+a);};\nfunction bp(a,b){var c=[];a.parse(b,function(a,b,f){1>a&&(c[b]=f);return 0<a});a.G=$o;return c}p.parse=function(a,b,c){ap(this,$o,Zo.prototype.parse);a=a.trim();this.a=new cp(a,this.b,this.We);this.c=b;this.Fg=c||Ce;this.G=2;this.wf()};p.Fg=Ce;\np.wf=function(){var a=this.a,b,c,d=[],e,f,g;ap(this,2,Zo.prototype.wf);this.G=1;do{if(!a.B){this.G=$o;break}if(c>a.c){if(void 0!==f&&f!==c){this.a.b(\"The number of columns must be the same for all rows\");return}f=c}b=a.o;c=a.c;e=a.g;g=this.Fg(b,c,a);if(a.g>e)for(;-1!==a.next(););else{for(;-1!==(e=a.next());)d.push(e);g=String.fromCharCode.apply(x,d);d.length=0}dp(a);this.c(b,c,g)&&(this.G=2)}while(1===this.G);2!=this.G&&void 0!==f&&0<c&&f!==c&&this.a.b(\"The number of columns must be the same for all rows\")};\nfunction cp(a,b,c){this.f=new Pg(a);this.v=b;this.B=!0;this.g=this.o=this.c=0;dp(this);this.b=c;this.i=[];this.j=!1}cp.prototype.g=0;var ep={me:10,Pf:13,oe:34,Mc:-1};function dp(a){var b=a.f.a();a.s=!1;(a.A=34===b)&&a.f.next()}function fp(a,b){var c=a.f;a.s=!0;switch(b){case a.v:a.c++;break;case ep.Pf:c.next(),c.a()!==ep.me&&a.b(\"CR without LF\");case ep.me:a.c=0;a.o++;break;case ep.Mc:a.B=!1;break;default:a.b(\"End of field expected\")}c.next();return ep.Mc}\ncp.prototype.a=function(){var a,b;if(this.s)b=ep.Mc;else if(a=this.f,b=a.a(),this.A)switch(b){case ep.oe:a.next();b=a.a();b!==ep.oe&&(b=fp(this,b));break;case ep.Mc:this.b(\"Closing quotation mark expected\")}else switch(b){case ep.oe:this.b(\"Unexpected quotation mark\");case this.v:case ep.Pf:case ep.me:case ep.Mc:b=fp(this,b)}return b};cp.prototype.m=function(){this.j=!0;this.i=[]};cp.prototype.l=function(){var a=this.i.slice();this.j=!1;this.i=[];return a};\ncp.prototype.next=function(){var a=this.a();-1!==a&&this.f.next();this.j&&this.i.push(a);this.g++;return a};function gp(a,b,c,d){d=d||{};if(!b)throw new C(gp,1,\"has to be a function\");if(!c)throw new C(gp,2,\"has to be a function\");this.c=b;this.g=c;this.a=[];this.i=d.duration||hp;this.b=z(this.b,this);this.f={};var e;a=a.split(\"Meta:\\t\").slice(1);for(b=0;b<a.length;b++)d=a[b].split(\"\\n\"),c=d[0].split(\"\\t\")[0],d=d.slice(1).join(\"\\n\"),this.sc[c]=new Zo,this.Ke[c]=bp(this.sc[c],d),e={layerId:c,columnNames:this.Ke[c]},this.Ne.push(c),this.f[c]=Po(e),this.Kb[c]=tj(),ip(this,d,c),this.b(c)}var hp=100;p=gp.prototype;\np.Ke={};p.Ne=[];p.sc={};p.Kb={};p.Ue={};function ip(a,b,c){var d=[],e=a.Ke[c].length-1,f=a.f[c];try{a.sc[c].parse(b,function(b,g,l){var m=!1;0<b&&(d[g]=l,g===e&&(a.a.push(f.Qb(f.qe(d))),tj()-a.Kb[c]>a.i&&(m=!0)));return m},function(a,b,c){if(0<a&&b===e)return ug(c)})}catch(g){a.g(g)}}p.cancel=function(){for(var a in this.Ue)w.clearTimeout(this.Ue[a])};r(\"H.service.extension.customLocation.AsyncParser.prototype.cancel\",gp.prototype.cancel);\ngp.prototype.b=function(a){var b=this,c;this.Ue[a]=w.setTimeout(function(){if(2===b.sc[a].getState())b.Kb[a]=tj(),b.c(b.a,!1),b.a=[],b.sc[a].wf(),b.b(a);else{c=!0;for(var d=0;d<b.Ne.length;d++)if(b.sc[b.Ne[d]].getState()!==$o){c=!1;break}c&&(0<b.a.length&&b.c(b.a,!0),b.a=[])}},0)};function V(a){a=rm(sm.cle,a);V.u.constructor.call(this,a)}v(V,pm);r(\"H.service.extension.customLocation.Service\",V);V.prototype.W=function(a,b,c,d,e){V.u.W.apply(this,[a,b,c,d,e]);this.f&&(this.a=this.f.clone());return this};V.prototype.configure=V.prototype.W;V.prototype.Ta=function(a,b){var c=b&&b.resultType,d=new Vo(this,a,b),e,f=uo;c==f.MARKER||c===f.DOM_MARKER?e=new uh(d):e=new oh(d);return e};V.prototype.createTileLayer=V.prototype.Ta;U.prototype.N=function(a){return this.W(new V(a))};\nU.prototype.getCustomLocationService=U.prototype.N;function jp(a,b,c,d){var e;a=a===kp?\"changes\":\"file\";var f=b[a],g=ra(f),h=!g&&B(f,Blob);if(!g&&!h)throw new C(d,0,\"Invalid \"+a+\" parameter\");if(lp)h?e=f:e=Ke(f,\"text/plain\"),d=new w.FormData,d.append(a,e,e.name||a+\".wkt\"),c.method=\"POST\",c.data=d,delete b[a];else if(h)throw new C(d,0,\"Sending Blob data is not supported by the browser\");}var lp=w.FormData&&!!w.FormData.prototype.append;\nV.prototype.b=function(a,b,c,d,e){function f(a){e(new w.Error(a))}var g=\"text/plain\",h=mp,k=a===h.LAYERS_UPLOAD||a===h.LAYERS_MODIFY||a===h.LAYERS_IMPORT,l=c,h={data:A,method:\"GET\"};if(!a)throw new C(this.b,0,a);if(!b)throw new C(this.b,1,b);Go(this.b,3,d,e);k&&(B(c,Object,this.b,2,\"Invalid request parameters\"),l=Qa(c),jp(a,l,h,this.b));a=this.aa().clone().R(a+\".\"+b).$(l);b===np.JSON&&(g=\"application/json\");b=new Gh(g,a.toString(),ud,h);b.then(function(a){var b=a.issues;b&&a.error_id&&a.response_code?\nf(b[0].message):d(a)},function(a){\"error\"===a.type||404===a.status?f(a.statusText||\"Unable to load data\"):a.json().then(function(a){f(a.error_description||a.issues[0].message)},f)});return b};V.prototype.request=V.prototype.b;\nvar kp=\"layers/modify\",mp={LAYERS_DELETE:\"layers/delete\",LAYERS_GRANT:\"layers/access/grant\",LAYERS_LIST:\"layers/list\",LAYERS_MODIFY:kp,LAYERS_UPLOAD:\"layers/upload\",LAYERS_IMPORT:\"layers/import\",SEARCH_ALL:\"search/all\",SEARCH_BBOX:\"search/bbox\",SEARCH_CORRIDOR:\"search/corridor\",SEARCH_PROXIMITY:\"search/proximity\",SEARCH_QUADKEY:\"search/quadkey\",SEARCH_TILE:\"tiled/tile\"};V.EntryPoint=mp;var np={TXT:\"txt\",JSON:\"json\"};V.EntryPointType=np;sm.cle={subDomain:\"cle\",path:\"2\"};\nV.prototype.l=function(a,b,c){var d=this;return this.b(\"search/all\",\"txt\",{filter:'WKT==\"\"',layer_id:a},function(e){var f=e.replace(/[\\r\\n]+$/g,\"\").split(\"\\t\");d.b(\"layers/list\",\"json\",{layer_id:a,detail_level:\"all\"},function(a){a=a.layers[0];a.columnNames=f;b(Po(a))},c)},c)};V.prototype.getLayer=V.prototype.l;\nV.prototype.A=function(a,b,c,d){function e(){return++g<f?h.b(\"layers/access/grant\",\"json\",{layer_id:a,granted_app_id:b[g].grantedAppId,permissions:b[g].permissions.join(\",\")},e,d):h.l(a,c,d)}var f=b&&b.length,g=-1,h=this;return e()};V.prototype.grantAccess=V.prototype.A;V.prototype.s=function(a,b,c){return this.b(\"layers/delete\",\"json\",{layer_ids:a},b,c)};V.prototype.deleteLayer=V.prototype.s;\nV.prototype.v=function(a,b,c){function d(){setTimeout(function(){l.l(h,function(a){setTimeout(e.bind(null,a),n)},function(){64E3>m?(m+=n,d()):c(w.Error(\"Timeout\"))})},n);n*=2}function e(d){var e=JSON.stringify(d.c()),f=a.grants,g;e!==JSON.stringify(k)?(g=\"Results into different column names on the backend: \"+e,setTimeout(function(){l.s(h,function(){c(w.Error(g))},function(a){c(w.Error(g+\". \"+a.message))})},n)):f&&f.length?l.A(h,f,b,c):b(d)}var f,g,h,k,l=this,m=0,n=1E3;g=!a||!Wo(h=a.layerId)&&(f=\"layerId\")||\n!Xo(k=a.columnNames)&&(f=\"columnNames\")?0:sa(b)?sa(c)?-1:2:1;if(0<=g)throw new C(l.v,g,f||arguments[g]);return l.l(h,function(){c(w.Error(\"Layer exists already\"))},function(){var b={layer_id:h,file:k.join(\"\\t\")},e=a.level,f=a.storage;e!==A&&(b.level=e);f!==A&&(b.storage=f);l.b(\"layers/upload\",\"json\",b,d,c)})};V.prototype.createLayer=V.prototype.v;\nfunction op(a,b,c,d,e){var f=[],g;a=a.b(b,\"json\",c,function(a){a.geometries.length?(a=Yo(a,c.layer_id),g=new gp(a,d,e),f.push(g)):d(De,!0)},e);f.push(a);return new Io(f)}V.prototype.i=function(a,b,c,d,e,f){if(!Za(a))throw new C(this.i,0,\"has invalid type\");B(b,gc,this.i,1,\"has invalid type\");if(!ab(c))throw new C(this.i,2,\"has invalid type\");Go(this.i,3,d,e);a={layer_ids:a.join(\",\"),proximity:b.lat+\",\"+b.lng+\",\"+c};f&&Ca(a,f);return op(this,\"search/proximity\",a,d,e)};\nV.prototype.searchByProximity=V.prototype.i;V.prototype.g=function(a,b,c,d,e,f){var g,h=\"\";if(!Za(a))throw new C(this.g,0,\"has invalid type\");if(!ra(b)&&!B(b,F))throw new C(this.g,1,\"has invalid type\");if(!ab(c))throw new C(this.g,2,\"has invalid type\");Go(this.g,3,d,e);a={layer_ids:a.join(\",\"),radius:c};if(ra(b))a.route_id=b;else{g=b.na;b=0;for(c=g.length;b<c;b+=3)h+=g[b]+\",\"+g[b+1],b<c-3&&(h+=\",\");a.corridor=h}f&&Ca(a,f);return op(this,\"search/corridor\",a,d,e)};V.prototype.searchByCorridor=V.prototype.g;\nV.prototype.j=function(a,b,c,d,e){function f(a,b){b&&h--;c(a,!h)}var g=[],h;if(!Za(a))throw new C(this.j,0,\"has invalid type\");B(b,G,this.j,1,\"has invalid type\");Go(this.j,2,c,d);b={bbox:b.ka+\",\"+b.ga+\";\"+b.ja+\",\"+b.ha};e&&Ca(b,e);a=b.layer_id?[b.layer_id]:a;e=0;for(h=a.length;e<h;e++)b.layer_id=a[e],g.push(op(this,\"search/bbox\",b,f,d));return new Io(g)};V.prototype.searchByBoundingBox=V.prototype.j;\nV.prototype.o=function(a,b,c,d){var e,f,g=[];if(!ra(a))throw new C(this.o,0,\"has invalid type\");Go(this.o,1,b,c);e={layer_id:a};d&&Ca(e,d);d=this.b(\"search/all\",\"json\",e,function(d){d.geometries.length?(d=Yo(d,a),f=new gp(d,b,c),g.push(f)):b(De,!0)},c);g.push(d);return new Io(g)};V.prototype.searchAll=V.prototype.o;var pp={\"delete\":/^GEOMETRY_ID$/,append:/^(?!GEOMETRY_ID$)/,update:null};\nfunction qp(a,b,c,d,e,f){function g(){ea++;d(this,ea===J)}function h(a){ea++;e(a,this,ea===J)}var k=\"append\"!==b,l,m,n,q,t,u={},y=Ka(),J=0,T=[],ea=0;if(!Za(c))throw new C(f,0,c);Go(f,1,d,e);for(l=c.length;l--;){m=c[l];if(B(m,Qo))if(n=m.uc().cd().layerId,q=m.a(\"GEOMETRY_ID\"),k){if(q===x||\"\"===String(q))t='GEOMETRY_ID must not be null or \"\"';u[q=n+\"_\"+q]&&(t=\"same GEOMETRY_ID for multiple rows\");u[q]=m}else q!==x&&\"\"!==String(q)&&(t='GEOMETRY_ID must be null or \"\"');else t=\"Invalid type\";if(t)throw new C(f,\n0,\"- Invalid row at index \"+l+\", \"+t);q=y[n];q||(q=y[n]=[],J++);q.push(m)}for(n in y){q=y[n];c=[];for(l=q.length;l--;)c.push(q[l].Ve);T.push(a.b(kp,\"json\",{layer_id:n,action:b,changes:q[0].uc().Df(pp[b],c)},z(g,q),z(h,q)))}return new Io(T)}V.prototype.m=function(a,b,c){return qp(this,\"append\",a,b,c,this.m)};V.prototype.appendRows=V.prototype.m;V.prototype.C=function(a,b,c){return qp(this,\"update\",a,b,c,this.C)};V.prototype.updateRows=V.prototype.C;\nV.prototype.B=function(a,b,c){return qp(this,\"delete\",a,b,c,this.B)};V.prototype.deleteRows=V.prototype.B;function Vo(a,b,c){var d=this,e=b&&b.rowFilter,f,g,h,k,l=uo;Vo.u.constructor.call(this,c);B(a,V,Vo,0);h=c.resultType;Uo(b);e?(f=Qa(b),f.rowFilter=e.toString()):f=b;(new Lh).md(\"cle\",\"H.service.extension.worker.processor\");k=b.layerId;a.b(\"layers/list\",\"json\",{detail_level:\"all\",layer_id:k},function(b){b=b.layers;var c;for(c=0;c<b.length;c++)if(b[c].layerId===k){f.level=b[c].level;break}g=a.aa().clone().R(\"tiled/tile.json\").$({meta:1});(new Nh(\"cle\",{message:[d.uid,0,{tileSize:d.tileSize,projected:!0,\nonlyOutline:h===l.POLYLINE,serverUrl:g.toString(),layerConfigs:[f],batchTiles:!1}]})).then(function(){d.I=!0;Rg(d)},d.f)},function(a){d.f(a.message)})}v(Vo,yo);r(\"H.service.extension.customLocation.TileProvider\",Vo);Vo.prototype.P=function(a,b,c){return new to(a,b,c)};\nVo.prototype.c=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h,g=this.g.get(g),k={cancel:sc},l=!0,m,n=uo;g&&(this.b===n.POLYLINE||this.b===n.POLYGON?g.yc()||(d(Fm.pop(this.tileSize),null),l=!1):(d(x),l=!1));l&&(m=ym.setTimeout(function(){h=new Nh(\"cle\",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500),k.cancel=function(){h?h.cancel():ym.clearTimeout(m)});return k};Vo.prototype.requestInternal=Vo.prototype.c;Vo.prototype.D=function(){Vo.u.D.call(this);new Nh(\"cle\",{message:[this.uid,3]})};function rp(a){a=rm(sm.cre,a);rp.u.constructor.call(this,a)}v(rp,pm);r(\"H.service.extension.customRoute.Service\",rp);sm.cre={subDomain:\"cre\",path:\"2\"};U.prototype.Ta=function(a){return this.W(new rp(a))};U.prototype.getCustomRoutingService=U.prototype.Ta;\nrp.prototype.b=function(a,b,c){function d(a){c(new w.Error(a))}Go(this.b,1,b,c);a=this.aa().clone().R(\"calculateroute.json\").$(a);(new Gh(\"application/json\",a.toString())).then(b,function(a){\"error\"===a.type?d(a.statusText||\"Unable to load data\"):a.json().then(function(a){d(a.error_description||a.issues[0].message)},d)})};rp.prototype.calculateRoute=rp.prototype.b;r(\"H.service.buildInfo\",function(){return Bh(\"mapsjs-service\",\"0.17.0\",\"378d765\")});\n");